<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Packaging functionality | Reproducible Research Data and Project Management in R</title>
  <meta name="description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Packaging functionality | Reproducible Research Data and Project Management in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://annakrystalli.me/rrresearchACCE20" />
  
  <meta property="og:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="github-repo" content="annakrystalli/rrresearchACCE20" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Packaging functionality | Reproducible Research Data and Project Management in R" />
  
  <meta name="twitter:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  

<meta name="author" content="Course Instructor: Dr Anna Krystalli" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="managing-dependencies.html"/>
<link rel="next" href="creating-a-research-compendium-with-rrtools.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding-3.0.0/jsonedit.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Research Data & Project Management in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course description</a></li>
<li class="chapter" data-level="" data-path="welcome-slides.html"><a href="welcome-slides.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html"><i class="fa fa-check"></i>Intro to R &amp; Rstudio</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i>R Basics</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html"><i class="fa fa-check"></i>Data types, structures and classes</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html"><i class="fa fa-check"></i>Indexing and subsetting</a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html"><i class="fa fa-check"></i>The tidyverse way</a></li>
<li class="chapter" data-level="" data-path="rdm-intro-view.html"><a href="rdm-intro-view.html"><i class="fa fa-check"></i>Data management Basics</a></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html"><i class="fa fa-check"></i>Projects in Rstudio</a></li>
<li class="chapter" data-level="" data-path="filenaming-view.html"><a href="filenaming-view.html"><i class="fa fa-check"></i>Good File Naming</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html"><i class="fa fa-check"></i>Paths and Project structure</a></li>
<li class="part"><span><b>III Data Munging</b></span></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i>Iteration</a></li>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html"><i class="fa fa-check"></i>Merging data</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a></li>
<li class="part"><span><b>IV Working with metadata</b></span></li>
<li class="chapter" data-level="" data-path="metadata-slides.html"><a href="metadata-slides.html"><i class="fa fa-check"></i>Metadata</a></li>
<li><a href="dataspice.html#dataspice">Creating metadata with <code>dataspice</code></a></li>
<li class="part"><span><b>V Analysing and presenting analyses</b></span></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html"><i class="fa fa-check"></i>Plotting with ggplot2</a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html"><i class="fa fa-check"></i>Literate Programming in rmarkdown</a></li>
<li class="part"><span><b>VI Version Control</b></span></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html"><i class="fa fa-check"></i>Version Control with Git</a></li>
<li class="chapter" data-level="" data-path="collaborative-github.html"><a href="collaborative-github.html"><i class="fa fa-check"></i>Collaborative GitHub</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#practical-github-rstudio-for-collaborative-coding">Practical: <code>GitHub</code> &amp; <code>Rstudio</code> for collaborative coding</a></li>
<li class="part"><span><b>VII Packaging Research Projects</b></span></li>
<li class="chapter" data-level="" data-path="managing-dependencies.html"><a href="managing-dependencies.html"><i class="fa fa-check"></i>Managing Dependencies</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html"><i class="fa fa-check"></i>Packaging functionality</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html"><i class="fa fa-check"></i>Creating a research compendium with rrtools</a></li>
<li class="part"><span><b>VIII Closing</b></span></li>
<li class="chapter" data-level="" data-path="closing-remarks.html"><a href="closing-remarks.html"><i class="fa fa-check"></i>Closing Remarks</a></li>
<li class="part"><span><b>IX APPENDIX</b></span></li>
<li><a href="individual-r.html#individual.r"><code>individual.R</code></a></li>
<li><a href="geolocate-r.html#geolocate.r"><code>geolocate.R</code></a></li>
<li><a href="analysis-r-1.html#analysis.r-1"><code>analysis.R</code></a></li>
<li><a href="index-rmd.html#index.rmd"><code>index.Rmd</code></a></li>
<li><a href="gitignore.html#gitignore"><code>.gitignore</code></a></li>
<li><a href="mypackage-hello-r.html#mypackage-hello.r"><code>mypackage</code> <code>hello.R</code></a></li>
<li><a href="mypackage-readme-rmd.html#mypackage-readme.rmd"><code>mypackage</code> <code>README.Rmd</code></a></li>
<li><a href="mypackage-description.html#mypackage-description"><code>mypackage</code> <code>DESCRIPTION</code></a></li>
<li><a href="rrcompendium-description.html#rrcompendium-description"><code>rrcompendium</code> <code>DESCRIPTION</code></a></li>
<li><a href="rrcompendium-readme-rmd.html#rrcompendium-readme.rmd"><code>rrcompendium</code> <code>README.Rmd</code></a></li>
<li><a href="rrcompendium-paper-rmd-yaml-header.html#rrcompendium-paper.rmd-yaml-header"><code>rrcompendium</code> <code>paper.Rmd</code> YAML header</a></li>
<li><a href="rrcompendium-paper-rmd.html#rrcompendium-paper.rmd"><code>rrcompendium</code> <code>paper.Rmd</code></a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Software Setup</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i>Solutions</a></li>
<li class="divider"></li>
<li><a href="https://annakrystalli.me/rrreasearchACCE2020" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Data and Project Management in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="packaging-functionality" class="section level1">
<h1>Packaging functionality</h1>
<div id="r-package-structure" class="section level2">
<h2>R Package Structure</h2>
<p>Used to share functionality with the R community</p>
<ul>
<li><p>Useful <strong>conventions</strong></p></li>
<li><p>Useful <strong>software development tools</strong></p></li>
<li><p>Easy <strong>publishing</strong> through GitHub</p></li>
</ul>
</div>
<div id="r-package-conventions" class="section level2">
<h2>R Package conventions:</h2>
<ul>
<li><p><strong>metadata</strong>: in the <strong><code>DESCRIPTION</code> file</strong></p></li>
<li><p><strong>functions</strong> in <strong><code>.R</code> scripts</strong> in the <strong><code>R/</code> folder</strong></p></li>
<li><p><strong>tests</strong> in the <strong><code>tests/</code> folder</strong></p></li>
<li><p><strong>Documentation:</strong></p>
<ul>
<li><em>functions</em> using <strong>Roxygen notation</strong></li>
<li><em>workflows</em> using <strong><code>.Rmd</code> documents</strong> in the <strong><code>vignettes/</code></strong> folder</li>
</ul></li>
</ul>
</div>
<div id="software-engineering-approach" class="section level2">
<h2>Software Engineering approach</h2>
<p>Following conventions allows us to <strong>make use of automated tools</strong> for:</p>
<ul>
<li><p><strong>Checking</strong> and <strong>testing code</strong></p></li>
<li><p><strong>Producing documentation</strong> for code and workflows</p></li>
<li><p><strong>Publishing, distributing</strong> and <strong>citing</strong> code</p></li>
</ul>
</div>
<div id="anatomy-of-an-r-package" class="section level2">
<h2>Anatomy of an R package</h2>
<p>Let’s use <a href="https://github.com/ropensci-org/pkgreviewr"><code>pkgreviewr</code></a>, a package I authored to help automate some aspects of the rOpenSci review process, as an example to examine some elements of what makes a package:</p>
</div>
<div id="description-file" class="section level2">
<h2><code>DESCRIPTION</code> file</h2>
<p>Capture metadata around the package
- Functionality description
- Creators
- License</p>
<pre><code>Package: pkgreviewr
Type: Package
Title: rOpenSci package review project template
Version: 0.1.1
Authors@R: c(person(&quot;Anna&quot;, &quot;Krystalli&quot;, email = &quot;annakrystalli@googlemail.com&quot;,
                  role = c(&quot;aut&quot;, &quot;cre&quot;)),
             person(&quot;Maëlle&quot;, &quot;Salmon&quot;, email = &quot;maelle.salmon@yahoo.se&quot;, role = &quot;aut&quot;))
Description: Creates files and collects materials necessary to complete an rOpenSci package review. 
    Review files are prepopulated with review package specific metadata. Review package source code is
    also cloned for local testing and inspection.
License: GPL-3 + file LICENSE
URL: https://github.com/ropenscilabs/pkgreviewr
BugReports: https://github.com/ropenscilabs/pkgreviewr/issues
Encoding: UTF-8
LazyData: true
Imports:
    devtools,
    git2r (&gt;= 0.23.0),
    usethis (&gt;= 1.2.0),
    here,
    reprex,
    gh,
    base64enc,
    whoami,
    magrittr,
    covr,
    goodpractice,
    assertthat,
    httr,
    rstudioapi,
    clipr,
    clisymbols,
    crayon,
    dplyr,
    glue,
    fs,
    urltools,
    shiny
Suggests: 
    testthat,
    mockery,
    knitr,
    rmarkdown
RoxygenNote: 6.1.1
Remotes: 
    ropensci/git2r
VignetteBuilder: knitr
Roxygen: list(markdown = TRUE)
</code></pre>
<div id="citation" class="section level3">
<h3>citation</h3>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="packaging-functionality.html#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">&quot;pkgreviewr&quot;</span>)</span></code></pre></div>
<pre><code>## 
## To cite package &#39;pkgreviewr&#39; in publications use:
## 
##   Anna Krystalli and Maëlle Salmon (2021). pkgreviewr: rOpenSci package
##   review project template. R package version 0.2.0.
##   https://github.com/ropenscilabs/pkgreviewr
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {pkgreviewr: rOpenSci package review project template},
##     author = {Anna Krystalli and Maëlle Salmon},
##     year = {2021},
##     note = {R package version 0.2.0},
##     url = {https://github.com/ropenscilabs/pkgreviewr},
##   }</code></pre>
</div>
</div>
<div id="dependency-management" class="section level2">
<h2>Dependency management</h2>
<p>It’s the job of the DESCRIPTION to <strong>list the packages that your package needs to work</strong>.</p>
<pre><code>Imports:
    devtools,
    git2r (&gt;= 0.23.0),
    usethis (&gt;= 1.2.0),
    here,
    reprex,
    gh,
    base64enc,
    whoami,
    magrittr,
    covr,
    goodpractice,
    assertthat,
    httr,
    rstudioapi,
    clipr,
    clisymbols,
    crayon,
    dplyr,
    glue,
    fs,
    urltools,
    shiny</code></pre>
<p>Imports are necessary dependencies for the functions in your package to work</p>
<pre><code>Suggests: 
    testthat,
    mockery,
    knitr,
    rmarkdown</code></pre>
<p>Suggests are dependencies that are not necessary for the functions in your package but might be neccessary to run all the vignettes or tests in your package</p>
</div>
<div id="r-1" class="section level2">
<h2><code>R/</code></h2>
<ul>
<li>Keep all functions in R scripts in <code>R/</code> folder</li>
</ul>
<pre><code>.
├── github.R
├── pkgreview.R
├── pkgreviewr-package.R
├── render-templates.R
├── rmd-utils.R
├── style.R
└── utils.R

0 directories, 7 files</code></pre>
<div id="example-function-script" class="section level3">
<h3>example function script</h3>
<p>Create a new function <code>.R</code> file in the <code>R/</code> folder</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="packaging-functionality.html#cb589-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb589-2"><a href="packaging-functionality.html#cb589-2" aria-hidden="true" tabindex="-1"></a><span class="fu">use_r</span>(<span class="st">&quot;add&quot;</span>)</span></code></pre></div>
<pre><code>R
└── add.R

0 directories, 1 files</code></pre>
</div>
</div>
<div id="document-functions-with-roxygen" class="section level2">
<h2>Document functions with <code>Roxygen</code></h2>
<ul>
<li>Document functions with <strong>Roxygen</strong> notation</li>
<li>Automatically create help files on build</li>
</ul>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="packaging-functionality.html#cb591-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Add together two numbers.</span></span>
<span id="cb591-2"><a href="packaging-functionality.html#cb591-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb591-3"><a href="packaging-functionality.html#cb591-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param x A number.</span></span>
<span id="cb591-4"><a href="packaging-functionality.html#cb591-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param y A number.</span></span>
<span id="cb591-5"><a href="packaging-functionality.html#cb591-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return The sum of x and y.</span></span>
<span id="cb591-6"><a href="packaging-functionality.html#cb591-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb591-7"><a href="packaging-functionality.html#cb591-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; add(1, 1)</span></span>
<span id="cb591-8"><a href="packaging-functionality.html#cb591-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; add(10, 1)</span></span>
<span id="cb591-9"><a href="packaging-functionality.html#cb591-9" aria-hidden="true" tabindex="-1"></a>add <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb591-10"><a href="packaging-functionality.html#cb591-10" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> y</span>
<span id="cb591-11"><a href="packaging-functionality.html#cb591-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="tests" class="section level2">
<h2><code>tests/</code></h2>
<p>Tests provide confidence in what the code is doing.</p>
<p><em>Contents of <code>pkgreviewr</code> test folder</em></p>
<pre><code>.
├── testthat
│   ├── setup.R
│   ├── test-create-pkgreview.R
│   ├── test-gh-calls.R
│   ├── test-render-templates.R
│   └── test-setup.R
└── testthat.R

1 directory, 6 files</code></pre>
<div id="example-test" class="section level3">
<h3>Example test</h3>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="packaging-functionality.html#cb593-1" aria-hidden="true" tabindex="-1"></a><span class="fu">use_test</span>(<span class="st">&quot;add&quot;</span>)</span></code></pre></div>
<pre><code>tests
├── testthat
│   ├── test-add.R
└── testthat.R</code></pre>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="packaging-functionality.html#cb595-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;add works&quot;</span>, {</span>
<span id="cb595-2"><a href="packaging-functionality.html#cb595-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="fu">add</span>(<span class="dv">2</span>, <span class="dv">2</span>), <span class="dv">4</span>)</span>
<span id="cb595-3"><a href="packaging-functionality.html#cb595-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>The <strong>R package structure</strong> can help with providing a logical organisation of files, by <strong>providing a set of standard locations for certain types of files</strong>.</p>
<p>To work with packages in RStudio we use the <strong>Build pane</strong>, which includes a variety of tools for <strong>building, documenting and testing packages</strong>. This will appear if Rstudio recognises the project as an R package.</p>
<p><img src="assets/build-panel.png" height="200px"></p>
<p><img src="assets/reproducible-data-analysis-19.jpg" /></p>
</div>
</div>
<div id="create-your-first-package" class="section level2">
<h2>💻Create your first package</h2>
<p>Let’s go ahead and create our first package!</p>
<p>We can do that as we would any project, but this time we would select <strong><code>R package</code></strong> instead of <code>New Project</code> and call our new package <code>mypackage</code>.</p>
<div class="alert alert-info">
<strong>File &gt; New Project… &gt; New Directory &gt; R package &gt; mypackage </strong>
</div>
<p>Otherwise, we can <strong>use function <code>usethis::create_package("mypackage")</code></strong> to create a new package. The argument we provide is the path to here we want our new package created, the <strong>last element being the package name</strong>. Note that there are <a href="https://r-pkgs.org/workflows101.html#naming">restrictions on what characters can be used in a package name</a>.</p>
<p>To do this in Rstudio Cloud (which is a bit fiddlier) we will create a general project in which we will create our package project. In general, creating a project within a project is bad practice and you should avoid this when working locally, but given the more restrictive nature of working in Rstudio cloud, we will break this general best practice rule.</p>
<div id="copy-package-dev-project" class="section level3">
<h3>Copy <strong>package-dev</strong> Project</h3>
<p>In our shared space click on the <svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M352 240v32c0 6.6-5.4 12-12 12h-88v88c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-88h-88c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h88v-88c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v88h88c6.6 0 12 5.4 12 12zm96-160v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"></path></svg> copy button next to the <strong>package-dev</strong> Project.</p>
<p><img src="assets/copy-pkgdev-proj.png" /><!-- --></p>
<p>Click on <svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M352 240v32c0 6.6-5.4 12-12 12h-88v88c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-88h-88c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h88v-88c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v88h88c6.6 0 12 5.4 12 12zm96-160v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"></path></svg> <strong>Save a permanent copy</strong>. You now have a personal copy of the project.</p>
</div>
<div id="create-package" class="section level3">
<h3>Create package</h3>
<p>Create your package development project within the <strong>ACCE-projects</strong> project:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="packaging-functionality.html#cb596-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_package</span>(<span class="st">&quot;mypackage&quot;</span>)</span></code></pre></div>
<p>Your new project should have the following structure. The build pane should also be visible.</p>
<pre><code>.
├── DESCRIPTION
├── NAMESPACE
├── R
└── mypackage.Rproj</code></pre>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="packaging-functionality.html#cb598-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;assets/r_package_rstudio-cloud.png&quot;</span>)</span></code></pre></div>
<p><img src="assets/r_package_rstudio-cloud.png" /><!-- --></p>
</div>
</div>
<div id="initialise-git-and-commit-files." class="section level2">
<h2>Initialise git and commit files.</h2>
<p>Let’s also initialise our project as a git repository and commit our initial files. We’ll need to configure git again as this is a new Rstudio cloud project.</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="packaging-functionality.html#cb599-1" aria-hidden="true" tabindex="-1"></a><span class="co"># configure git</span></span>
<span id="cb599-2"><a href="packaging-functionality.html#cb599-2" aria-hidden="true" tabindex="-1"></a><span class="fu">use_git_config</span>(<span class="at">user.name =</span> <span class="st">&quot;Jane&quot;</span>,</span>
<span id="cb599-3"><a href="packaging-functionality.html#cb599-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">user.email =</span> <span class="st">&quot;jane@example.org&quot;</span>)</span>
<span id="cb599-4"><a href="packaging-functionality.html#cb599-4" aria-hidden="true" tabindex="-1"></a><span class="co"># intialise git and commit</span></span>
<span id="cb599-5"><a href="packaging-functionality.html#cb599-5" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git</span>()</span></code></pre></div>
</div>
<div id="functions-in-the-r-dir" class="section level2">
<h2>🚦 Functions in the <strong><code>R/</code></strong> dir</h2>
<div id="create-function-script-and-first-function" class="section level3">
<h3>Create function script and first function</h3>
<p>Let’s create a script and write our first function:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="packaging-functionality.html#cb600-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_r</span>(<span class="st">&quot;hello&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="packaging-functionality.html#cb601-1" aria-hidden="true" tabindex="-1"></a>✓ Setting active project to <span class="st">&#39;/cloud/project/mypackage&#39;</span></span>
<span id="cb601-2"><a href="packaging-functionality.html#cb601-2" aria-hidden="true" tabindex="-1"></a>• Modify <span class="st">&#39;R/hello.R&#39;</span></span>
<span id="cb601-3"><a href="packaging-functionality.html#cb601-3" aria-hidden="true" tabindex="-1"></a>• Call <span class="st">`</span><span class="at">use_test()</span><span class="st">`</span> to create a matching test file</span></code></pre></div>
<p><img src="assets/r_hello.png" /><!-- --></p>
<p>In the opened <code>hello.R</code> script, let’s write our first function:</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="packaging-functionality.html#cb602-1" aria-hidden="true" tabindex="-1"></a>hello <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb602-2"><a href="packaging-functionality.html#cb602-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello, world!&quot;</span>)</span>
<span id="cb602-3"><a href="packaging-functionality.html#cb602-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>It’s a function that takes no arguments and prints <code>Hello, world!</code> to the console when called.</p>
</div>
<div id="install-package." class="section level3">
<h3>Install package.</h3>
<p>You can install a package locally from it’s source code with function <code>devtools::install()</code></p>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="packaging-functionality.html#cb603-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install</span>()</span></code></pre></div>
<pre><code>✓  checking for file ‘/cloud/project/mypackage/DESCRIPTION’ ...
─  preparing ‘mypackage’:
✓  checking DESCRIPTION meta-information ...
─  checking for LF line-endings in source and make files and shell scripts
─  checking for empty or unneeded directories
─  building ‘mypackage_0.0.0.9000.tar.gz’
   
Running /opt/R/4.0.3/lib/R/bin/R CMD INSTALL \
  /tmp/RtmpVciSpz/mypackage_0.0.0.9000.tar.gz \
  --install-tests 
* installing to library ‘/home/rstudio-user/R/x86_64-pc-linux-gnu-library/4.0’
* installing *source* package ‘mypackage’ ...
** using staged installation
** R
** byte-compile and prepare package for lazy loading
** help
No man pages found in package  ‘mypackage’ 
*** installing help indices
** building package indices
** testing if installed package can be loaded from temporary location
** testing if installed package can be loaded from final location
** testing if installed package keeps a record of temporary installation path
* DONE (mypackage)</code></pre>
<p>You can now load it like any other package…</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="packaging-functionality.html#cb605-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;mypackage&quot;</span>)</span></code></pre></div>
<p>Let’s try using our function</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="packaging-functionality.html#cb606-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hello</span>()</span></code></pre></div>
<p>Oooops? Our function doesn’t seem to be available! 🤔</p>
<p>Let’s try something else:</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="packaging-functionality.html#cb607-1" aria-hidden="true" tabindex="-1"></a>mypackage<span class="sc">:::</span><span class="fu">hello</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Hello, world!&quot;</code></pre>
<p>So what’s happened here? Although the package contains our function, we have not <strong>exported</strong> to make available to a user. Currently it is contained as an <strong>internal function</strong>. Hence we can access it with the notation for internal functions (<code>:::</code>) but not directly when we load the package!</p>
<p>To export the function, we will need to add a tag to tell R to do so using a special documentation notation called <strong>Roxygen</strong>!</p>
<hr />
</div>
</div>
<div id="roxygen-documentation" class="section level2">
<h2>🚦 Roxygen documentation</h2>
<p><a href="http://r-pkgs.had.co.nz/man.html"><code>Roxygen2</code></a> allows you to write specially-structured comments preceeding each function definition to document:</p>
<ul>
<li>the inputs and outputs</li>
<li>a description of what it does</li>
<li>an example of how to use it</li>
<li>whether to export the function</li>
</ul>
<p>These are processed automatically to produce <code>.Rd</code> help files for your functions and control which functions are exported to the package <code>NAMESPACE</code>.</p>
<p>Let’s document our example function.</p>
<div id="insert-roxygen-skeleton" class="section level3">
<h3>Insert Roxygen skeleton</h3>
<p>You can insert a Roxygen skeleton by placing the curson with a function and clicking:</p>
<blockquote>
<p><strong>Code &gt; Insert Roxygen Skeleton</strong></p>
</blockquote>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="packaging-functionality.html#cb609-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Title</span></span>
<span id="cb609-2"><a href="packaging-functionality.html#cb609-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb609-3"><a href="packaging-functionality.html#cb609-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return</span></span>
<span id="cb609-4"><a href="packaging-functionality.html#cb609-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb609-5"><a href="packaging-functionality.html#cb609-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb609-6"><a href="packaging-functionality.html#cb609-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb609-7"><a href="packaging-functionality.html#cb609-7" aria-hidden="true" tabindex="-1"></a>hello <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb609-8"><a href="packaging-functionality.html#cb609-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello, world!&quot;</span>)</span>
<span id="cb609-9"><a href="packaging-functionality.html#cb609-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div id="roxygen-basics" class="section level4">
<h4>Roxygen basics</h4>
<ul>
<li><p><code>roxygen</code> notation indicated by <strong>beginning line with <code>#'</code></strong>.</p></li>
<li><p><strong>First line</strong> will be the <strong>title</strong> for the function.</p></li>
<li><p>After title, include a blank <code>#'</code> line and then write a <strong>longer description.</strong></p></li>
<li><p><code>@param argument_name</code> <strong>description of the argument.</strong></p></li>
<li><p><code>@return</code> description of <strong>what the function returns.</strong></p></li>
<li><p><code>@export</code> tells <code>Roxygen2</code> to <strong>add this function to the <code>NAMESPACE</code></strong> file, so that it will be <strong>accessible to users.</strong></p></li>
<li><p><code>@examples</code> allows to include example of how to use a function</p></li>
</ul>
</div>
</div>
<div id="complete-roxygen-documentation" class="section level3">
<h3>Complete Roxygen documentation</h3>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="packaging-functionality.html#cb610-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Hello World! </span></span>
<span id="cb610-2"><a href="packaging-functionality.html#cb610-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb610-3"><a href="packaging-functionality.html#cb610-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Print hello greeting</span></span>
<span id="cb610-4"><a href="packaging-functionality.html#cb610-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return prints hello greeting to console</span></span>
<span id="cb610-5"><a href="packaging-functionality.html#cb610-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb610-6"><a href="packaging-functionality.html#cb610-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb610-7"><a href="packaging-functionality.html#cb610-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb610-8"><a href="packaging-functionality.html#cb610-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; hello()</span></span>
<span id="cb610-9"><a href="packaging-functionality.html#cb610-9" aria-hidden="true" tabindex="-1"></a>hello <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb610-10"><a href="packaging-functionality.html#cb610-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello, world!&quot;</span>)</span>
<span id="cb610-11"><a href="packaging-functionality.html#cb610-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="autogenerate-documentation" class="section level3">
<h3>Autogenerate documentation</h3>
<p>Use function <code>devtools::document()</code> to create documentation. This re-creates a <code>hello.Rd</code> helpfile in the <code>man/</code> folder and populates the <code>NAMESPACE</code> with our functions</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="packaging-functionality.html#cb611-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">document</span>()</span></code></pre></div>
<p>Click <strong><svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"></path></svg> Install and Restart</strong> to re-install the package and make the documentation available.</p>
<p><img src="assets/rsc_build-package.png" /><!-- --></p>
<p><img src="assets/roxygen-done.png" /></p>
<p>You can configure your build tools in the <strong>Global Options</strong> (accessed through the build panel under <strong>More &gt; Configure Build Tools</strong>) to automatically build documentation every time you click <strong><svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"></path></svg> Install &amp; Rebuild</strong></p>
<p><img src="assets/conf-build-tools.png" />
Now clicking <strong><svg viewBox="0 0 576 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"></path></svg> Install &amp; Restart</strong> will also build your docs in the <code>man/</code> folder for you.</p>
</div>
</div>
<div id="personalise-function" class="section level2">
<h2>🚦 Personalise function</h2>
<p>Let’s go a step further and customise our function so that the greeting is from ourselves!</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="packaging-functionality.html#cb612-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Hello World!</span></span>
<span id="cb612-2"><a href="packaging-functionality.html#cb612-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb612-3"><a href="packaging-functionality.html#cb612-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Print hello greeting</span></span>
<span id="cb612-4"><a href="packaging-functionality.html#cb612-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return prints hello greeting to console from me</span></span>
<span id="cb612-5"><a href="packaging-functionality.html#cb612-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb612-6"><a href="packaging-functionality.html#cb612-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb612-7"><a href="packaging-functionality.html#cb612-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb612-8"><a href="packaging-functionality.html#cb612-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; hello()</span></span>
<span id="cb612-9"><a href="packaging-functionality.html#cb612-9" aria-hidden="true" tabindex="-1"></a>hello <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb612-10"><a href="packaging-functionality.html#cb612-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hello, world from Anna&quot;</span>)</span>
<span id="cb612-11"><a href="packaging-functionality.html#cb612-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="add-some-fun" class="section level2">
<h2>Add some fun!</h2>
<p>Programming is most useful for having fun. So let’s make our function extra fun!</p>
<p>We’ll use package <code>cowsay</code></p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="packaging-functionality.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;cowsay&quot;</span>)</span></code></pre></div>
<p>which has a single function <code>say</code>, which does this…</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="packaging-functionality.html#cb614-1" aria-hidden="true" tabindex="-1"></a>cowsay<span class="sc">::</span><span class="fu">say</span>(<span class="st">&quot;Say whaaaaaat?&quot;</span>, <span class="at">by =</span> <span class="st">&quot;shark&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  -------------- 
## Say whaaaaaat? 
##  --------------
##     \
##       \
##         \
##               /&quot;&quot;-._
##               .       &#39;-,
##                :          &#39;&#39;,
##                 ;      *     &#39;.
##                  &#39; *         () &#39;.
##                    \               \
##                     \      _.---.._ &#39;.
##                     :  .&#39; _.--&#39;&#39;-&#39;&#39;  \ ,&#39;
##         .._           &#39;/.&#39;             . ;
##         ; `-.          ,                \&#39;
##          ;   `,         ;              ._\
##           ;    \     _,-&#39;                &#39;&#39;--._
##           :    \_,-&#39;                          &#39;-._
##           \ ,-&#39;                       .          &#39;-._
##           .&#39;         __.-&#39;&#39;;            \...,__       &#39;.
##         .&#39;      _,-&#39;        \              \   &#39;&#39;--.,__  &#39;\
##         /    _,--&#39; ;         \              ;           \^.}
##         ;_,-&#39; )     \  )\      )            ;
##              /       \/  \_.,-&#39;             ;
##             /                              ;
##          ,-&#39;  _,-&#39;&#39;&#39;-.    ,-.,            ;      PFA
##       ,-&#39; _.-&#39;        \  /    |/&#39;-._...--&#39;
##      :--``             )/
##   &#39;
## </code></pre>
<p>😜</p>
<p>So let’s create a function that randomly chooses one of the animals available in <code>cowsay</code> to deliver the greeting, and also allow the user to customise who the recipient of the greeting is</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="packaging-functionality.html#cb616-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Hello World!</span></span>
<span id="cb616-2"><a href="packaging-functionality.html#cb616-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb616-3"><a href="packaging-functionality.html#cb616-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Print personalised hello greeting from me.</span></span>
<span id="cb616-4"><a href="packaging-functionality.html#cb616-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb616-5"><a href="packaging-functionality.html#cb616-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param name character string. Your name!</span></span>
<span id="cb616-6"><a href="packaging-functionality.html#cb616-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb616-7"><a href="packaging-functionality.html#cb616-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return prints hello greeting to console</span></span>
<span id="cb616-8"><a href="packaging-functionality.html#cb616-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb616-9"><a href="packaging-functionality.html#cb616-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb616-10"><a href="packaging-functionality.html#cb616-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb616-11"><a href="packaging-functionality.html#cb616-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; hello()</span></span>
<span id="cb616-12"><a href="packaging-functionality.html#cb616-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; hello(&quot;Lucy Elen&quot;)</span></span>
<span id="cb616-13"><a href="packaging-functionality.html#cb616-13" aria-hidden="true" tabindex="-1"></a>hello <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">name =</span> <span class="cn">NULL</span>) {</span>
<span id="cb616-14"><a href="packaging-functionality.html#cb616-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb616-15"><a href="packaging-functionality.html#cb616-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create greeting</span></span>
<span id="cb616-16"><a href="packaging-functionality.html#cb616-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.null</span>(name)){name <span class="ot">&lt;-</span> <span class="st">&quot;world&quot;</span>}</span>
<span id="cb616-17"><a href="packaging-functionality.html#cb616-17" aria-hidden="true" tabindex="-1"></a>    greeting <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;Hello&quot;</span>, name, <span class="st">&quot;from Anna!&quot;</span>)</span>
<span id="cb616-18"><a href="packaging-functionality.html#cb616-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb616-19"><a href="packaging-functionality.html#cb616-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># randomly sample an animal</span></span>
<span id="cb616-20"><a href="packaging-functionality.html#cb616-20" aria-hidden="true" tabindex="-1"></a>    animal_names <span class="ot">&lt;-</span> <span class="fu">names</span>(cowsay<span class="sc">::</span>animals)</span>
<span id="cb616-21"><a href="packaging-functionality.html#cb616-21" aria-hidden="true" tabindex="-1"></a>    i <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(animal_names), <span class="dv">1</span>)</span>
<span id="cb616-22"><a href="packaging-functionality.html#cb616-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb616-23"><a href="packaging-functionality.html#cb616-23" aria-hidden="true" tabindex="-1"></a>    cowsay<span class="sc">::</span><span class="fu">say</span>(greeting, animal_names[i])</span>
<span id="cb616-24"><a href="packaging-functionality.html#cb616-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Document, Install and restart to load our changes</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="packaging-functionality.html#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hello</span>(<span class="st">&quot;y&#39;all&quot;</span>)</span></code></pre></div>
<pre><code>## 
##  ----- 
## Hello y&#39;all from Anna! 
##  ------ 
##     \   
##      \  
##       \
##        ,
##     _,,)\.~,,._
##      (()`  ``)\))),,_
##       |     \ &#39;&#39;((\)))),,_          ____
##       |6`   |   &#39;&#39;((\())) &quot;-.____.-&quot;    `-.-,
##       |    .&#39;\    &#39;&#39;))))&#39;                  \)))
##       |   |   `.     &#39;&#39;                     ((((
##       \, _)     \/                          |))))
##        `&#39;        |                          (((((
##                  \                  |       ))))))
##                   `|    |           ,\     /((((((
##                    |   / `-.______.&lt;  \   |  )))))
##                    |   |  /         `. \  \  ((((
##                    |  / \ |           `.\  | (((
##                    \  | | |             )| |  ))
##                     | | | |             || |  &#39;   [endless.horse]
##                     | | | |             || |</code></pre>
<p>Let’s commit our current files and changes.</p>
</div>
<div id="check-package-integrity" class="section level2">
<h2>🚦 Check package integrity</h2>
<p>An <strong>important part of the package development process is <code>R CMD check</code></strong>. <code>R CMD check</code> automatically <strong>checks your code</strong> and can <strong>automatically detects many common problems</strong> that we’d otherwise discover the hard way.</p>
<p>To check our package, we can:</p>
<ul>
<li><p>use <code>devtools::check()</code></p></li>
<li><p>press Ctrl/Cmd + Shift + E</p></li>
<li><p>click on the ✅<strong>Check</strong> tab in the <strong>Build</strong> panel.</p></li>
</ul>
<p>This:</p>
<ul>
<li><p><strong>Ensures that the documentation is up-to-date</strong> by running
<code>devtools::document()</code>.</p></li>
<li><p><strong>Bundles the package</strong> before checking it.</p></li>
</ul>
<p>More info on <a href="http://r-pkgs.had.co.nz/check.html">checks</a> here.</p>
<p><br></p>
<p>Both these run <code>R CMD check</code> which <strong>return three types of messages</strong>:</p>
<ul>
<li><p><strong>ERRORs</strong>: Severe problems that you should fix regardless of whether or not you’re submitting to CRAN.</p></li>
<li><p><strong>WARNINGs</strong>: Likely problems that you must fix if you’re planning to submit to CRAN (and a good idea to look into even if you’re not).</p></li>
<li><p><strong>NOTEs</strong>: Mild problems. If you are submitting to CRAN, you should strive to eliminate all NOTEs, even if they are false positives.</p></li>
</ul>
<p>Let’s <strong>Check</strong> our package:</p>
<p>Click on the <strong>Check</strong> button (📋 ✅)</p>
<pre><code>   
── R CMD check results ──────────────────────────────────── mypackage 0.1.0 ────
Duration: 8.4s

❯ checking DESCRIPTION meta-information ... WARNING
  Non-standard license specification:
    What license is it under?
  Standardizable: FALSE

❯ checking dependencies in R code ... WARNING
  &#39;::&#39; or &#39;:::&#39; import not declared from: ‘cowsay’

0 errors ✔ | 2 warnings ✖ | 0 notes ✔
Error: R CMD check found WARNINGs
Execution halted

Exited with status 1.</code></pre>
<p>Aha, so our checks have thrown up some warnings! First, it’s telling us we haven’t added a <code>LICENSE</code>. It’s also telling us that we have a dependency (import) from package <code>cowsay</code> which we haven’t documented in the <code>DESCRIPTION</code> file. <code>usethis</code> to the rescue!</p>
</div>
<div id="add-dependencies" class="section level2">
<h2>🚦 Add dependencies</h2>
<p>Add <code>cowsay</code> as a dependency.</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb620-1"><a href="packaging-functionality.html#cb620-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_package</span>(<span class="st">&quot;cowsay&quot;</span>)</span></code></pre></div>
<pre><code>✔ Setting active project to &#39;/Users/Anna/Desktop/mypackage&#39;
✔ Adding &#39;cowsay&#39; to Imports field in DESCRIPTION
● Refer to functions with `cowsay::fun()`</code></pre>
</div>
<div id="add-license" class="section level2">
<h2>Add License</h2>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="packaging-functionality.html#cb622-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_mit_license</span>(<span class="st">&quot;Anna Krystalli&quot;</span>)</span></code></pre></div>
<p><img src="assets/clear-checks.png" /></p>
<p>Check again…All should be good!</p>
<pre><code>── R CMD check results ──────────────────────────────────── mypackage 0.1.0 ────
Duration: 9.3s

0 errors ✔ | 0 warnings ✔ | 0 notes ✔

R CMD check succeeded</code></pre>
<p>Let’s commit our current files and changes.</p>
<hr />
</div>
<div id="add-test" class="section level2">
<h2>🚦 Add Test</h2>
<p><strong>Testing is a vital part of package development</strong>. It ensures that our code does what you want it to do.</p>
<p>Once you’re set up with a testing framework, the workflow is simple:</p>
<ol style="list-style-type: decimal">
<li><p>Modify your code or tests.</p></li>
<li><p>Test your package with Ctrl/Cmd + Shift + T or <code>devtools::test()</code>.</p></li>
<li><p>Repeat until all tests pass.</p></li>
</ol>
</div>
<div id="create-test-file" class="section level2">
<h2>create test file</h2>
<p>To create a new test file (and the testing framework if required), use function
<code>usethis::use_test()</code>. It’s good practice to name the test files after the <code>.R</code> files containing the functions being tested.</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="packaging-functionality.html#cb624-1" aria-hidden="true" tabindex="-1"></a><span class="fu">use_test</span>(<span class="st">&quot;hello&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="packaging-functionality.html#cb625-1" aria-hidden="true" tabindex="-1"></a>✔ Setting active project to <span class="st">&#39;/Users/Anna/Documents/workflows/workshops/materials/mypackage&#39;</span></span>
<span id="cb625-2"><a href="packaging-functionality.html#cb625-2" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">&#39;testthat&#39;</span> to Suggests field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb625-3"><a href="packaging-functionality.html#cb625-3" aria-hidden="true" tabindex="-1"></a>✔ Creating <span class="st">&#39;tests/testthat/&#39;</span></span>
<span id="cb625-4"><a href="packaging-functionality.html#cb625-4" aria-hidden="true" tabindex="-1"></a>✔ Writing <span class="st">&#39;tests/testthat.R&#39;</span></span>
<span id="cb625-5"><a href="packaging-functionality.html#cb625-5" aria-hidden="true" tabindex="-1"></a>✔ Writing <span class="st">&#39;tests/testthat/test-hello.R&#39;</span></span>
<span id="cb625-6"><a href="packaging-functionality.html#cb625-6" aria-hidden="true" tabindex="-1"></a>● Modify <span class="st">&#39;tests/testthat/test-hello.R&#39;</span></span></code></pre></div>
<p>This just created the following folders and files</p>
<pre><code>tests
├── testthat
│   └── test-hello.R
└── testthat.R

1 directory, 2 files</code></pre>
<p>It also added <code>testthat</code> to the suggested packages in the <code>DESCRIPTION</code> file.</p>
<pre><code>Suggests: 
    testthat</code></pre>
<p>That’s because you don’t need test that to run the functions in <code>mypackage</code>, but you do
if you want to run the tests.</p>
<p>When the tests are run (either through running <code>devtools::test()</code>, clicking on <strong>More &gt; Test Package</strong> in the Build panel or <code>Cmd/Ctrl + Shift + T</code>), the code in each test script in directory <code>testthat</code> is run.</p>
<p><strong><code>test-hello.R</code></strong></p>
<p>Let’s load the library so we can explore the <code>testthat</code> testing framework</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb628-1"><a href="packaging-functionality.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat)</span></code></pre></div>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="packaging-functionality.html#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;multiplication works&quot;</span>, {</span>
<span id="cb629-2"><a href="packaging-functionality.html#cb629-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="dv">2</span> <span class="sc">*</span> <span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb629-3"><a href="packaging-functionality.html#cb629-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## Test passed 😀</code></pre>
<p>If the test doesn’t pass it throws an error</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="packaging-functionality.html#cb631-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;multiplication works&quot;</span>, {</span>
<span id="cb631-2"><a href="packaging-functionality.html#cb631-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_equal</span>(<span class="dv">2</span> <span class="sc">*</span> <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb631-3"><a href="packaging-functionality.html#cb631-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## ── Failure (&lt;text&gt;:2:3): multiplication works ──────────────────────────────────
## 2 * 2 not equal to 5.
## 1/1 mismatches
## [1] 4 - 5 == -1</code></pre>
</div>
<div id="write-test" class="section level2">
<h2>Write test</h2>
<p>Let’s write a simple test to check that we are getting an expected output type. The first thing to note, looking at the <code>say()</code> documentation is that it takes an argument <code>type</code> which allows us to specify the output we want. It defaults to <code>NULL</code> which means the output of the function is just sent to the console without producing an assignable output.</p>
<p>We can therefore use <code>testthat::expect_null()</code>. We’ll also suppress the printed output of the function so that we don’t pollute our testing logs.</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="packaging-functionality.html#cb633-1" aria-hidden="true" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;hello works&quot;</span>, {</span>
<span id="cb633-2"><a href="packaging-functionality.html#cb633-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_null</span>(<span class="fu">suppressMessages</span>(<span class="fu">hello</span>()))</span>
<span id="cb633-3"><a href="packaging-functionality.html#cb633-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## 
##  ----- 
## Hello world from Anna! 
##  ------ 
##     \   
##      \
##                    ____
##                 _.&#39; :  `._
##             .-.&#39;`.  ;   .&#39;`.-.
##    __      / : ___\ ;  /___ ; \      __
##   ,&#39;_ &quot;&quot;--.:__;&quot;.-.&quot;;: :&quot;.-.&quot;:__;.--&quot;&quot; _`,
##   :&#39; `.t&quot;&quot;--.. &#39;&lt;@.`;_  &#39;,@&gt;` ..--&quot;&quot;j.&#39; `;
##        `:-.._J &#39;-.-&#39;L__ `-- &#39; L_..-;&#39;
##           &quot;-.__ ;  .-&quot;  &quot;-.  : __.-&quot;
##              L &#39; /.------.\ &#39; J
##              &quot;-.   &quot;--&quot;   .-&quot;
##              __.l&quot;-:_JL_;-&quot;;.__
##          .-j/&#39;.;  ;&quot;&quot;&quot;&quot;  / .&#39;\&quot;-.
##          .&#39; /:`. &quot;-.:     .-&quot; .&#39;;  `.
##       .-&quot;  / ;  &quot;-. &quot;-..-&quot; .-&quot;  :    &quot;-.
##   .+&quot;-.  : :      &quot;-.__.-&quot;      ;-._   \
##   ; \  `.; ;                    : : &quot;+. ;
##   :  ;   ; ;                    : ;  : \:
##   ;  :   ; :                    ;:   ;  :
##   : \  ;  :  ;                  : ;  /  ::
##   ;  ; :   ; :                  ;   :   ;:
##   :  :  ;  :  ;                : :  ;  : ;
##   ;\    :   ; :                ; ;     ; ;
##   : `.&quot;-;   :  ;              :  ;    /  ;
##  ;    -:   ; :              ;  : .-&quot;   :
##   :\     \  :  ;            : \.-&quot;      :
##   ;`.    \  ; :            ;.&#39;_..--  / ;
##   :  &quot;-.  &quot;-:  ;          :/.&quot;      .&#39;  :
##    \         \ :          ;/  __        :
##     \       .-`.\        /t-&quot;&quot;  &quot;:-+.   :
##      `.  .-&quot;    `l    __/ /`. :  ; ; \  ;
##        \   .-&quot; .-&quot;-.-&quot;  .&#39; .&#39;j \  /   ;/
##         \ / .-&quot;   /.     .&#39;.&#39; ;_:&#39;    ;
##   :-&quot;&quot;-.`./-.&#39;     /    `.___.&#39;
##                \ `t  ._  /  bug
##                 &quot;-.t-._:&#39;
##   Test passed 🌈</code></pre>
<p>Now let’s test our package</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="packaging-functionality.html#cb635-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">test</span>()</span></code></pre></div>
<p>Success!</p>
<pre><code>==&gt; devtools::test()

Loading mypackage
Testing mypackage
✔ | OK F W S | Context
✔ |  1       | test-hello

══ Results ════════════════════════════════════════════════════════
OK:       1
Failed:   0
Warnings: 0
Skipped:  0</code></pre>
<p>Let’s commit our current files and changes.</p>
</div>
<div id="create-readme" class="section level2">
<h2>🚦 Create README</h2>
<p>The final document you will need for your package is a <code>README</code>.</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="packaging-functionality.html#cb637-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_readme_rmd</span>()</span></code></pre></div>
<pre><code>✔ Writing &#39;README.Rmd&#39;
✔ Adding &#39;^README\\.Rmd$&#39; to &#39;.Rbuildignore&#39;
● Modify &#39;README.Rmd&#39;
✔ Writing &#39;.git/hooks/pre-commit&#39;</code></pre>
<p>Because it’s an <code>.Rmd</code> but GitHub can only display an <code>md</code> document as it’s landing page, this is a special <code>.Rmd</code> that renders to a markdown document rather than <code>html</code>. The function adds a check to <code>.git</code> to ensure you commit an up to date version on the <code>md</code> when you commit changes to the <code>.Rmd</code>.</p>
<p>Complete the README, including an example. Here’s what mine looks like:</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="packaging-functionality.html#cb639-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;assets/mypackage-readme.png&quot;</span>)</span></code></pre></div>
<p><img src="assets/mypackage-readme.png" /><!-- --></p>
<p>Let’s commit our current files and changes.</p>
</div>
<div id="complete-package-metadata" class="section level2">
<h2>🚦 Complete package metadata</h2>
<p>Let’s head to the <code>DESCRIPTION</code> file and complete the details.</p>
</div>
<div id="authors" class="section level2">
<h2>Authors</h2>
<p>First let’s complete the authors. Remove the current author and maintainer lines and replace it with the following line:</p>
<pre><code>Authors@R: person(&quot;First&quot;, &quot;Last&quot;, email = &quot;first.last@example.com&quot;, role = c(&quot;aut&quot;, &quot;cre&quot;))</code></pre>
<p>completed with your own details</p>
</div>
<div id="add-a-title-and-description" class="section level2">
<h2>Add a title and description</h2>
<p>Complete the title and description fields with appropriate details. If you want to form a paragraph of text, make sure do indent the hanging lines by 4 spaces (one tab). And make sure that your Description field <strong>ends in a full-stop</strong>.</p>
</div>
<div id="add-a-date" class="section level2">
<h2>Add a date</h2>
<p>Use today’s date in ISO format, ie <strong>2021-05-07</strong>. This will populate a citation entry for us.</p>
<div id="completed-description" class="section level3">
<h3>Completed <code>DESCRIPTION</code></h3>
<p>The complete <code>DESCRIPTION</code> file should look something like this:</p>
<pre><code>Package: mypackage
Title: Customised greetings from me!
Version: 0.1.0
Authors@R: person(&quot;Anna&quot;, &quot;Krystalli&quot;, 
  email = &quot;annakrystalli@googlemail.com&quot;, 
  role = c(&quot;aut&quot;, &quot;cre&quot;))
Description: Prints a customised greeting from myself, 
    delivered by a friend.
License: MIT + file LICENSE
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1
Imports: 
    cowsay
Suggests: 
    testthat (&gt;= 3.0.0)
Config/testthat/edition: 3
URL: https://github.com/annakrystalli/mypackage
BugReports: https://github.com/annakrystalli/mypackage/issues
Date: 2021-05-07</code></pre>
<p>Check your package. If all is good, document, install and restart!</p>
<p>Now, check you’re package’s citation:</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb642-1"><a href="packaging-functionality.html#cb642-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">&quot;mypackage&quot;</span>)</span></code></pre></div>
<pre><code>To cite package ‘mypackage’ in publications use:

  Anna Krystalli (2021). mypackage: Customised greetings from me!. R
  package version 0.1.0.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {mypackage: Customised greetings from me!},
    author = {Anna Krystalli},
    year = {2021},
    note = {R package version 0.1.0},
  }</code></pre>
<p>Let’s commit our current files and changes.</p>
</div>
</div>
<div id="create-github-repo-and-push-to-github" class="section level2">
<h2>Create GitHub repo and push to GitHub</h2>
<p>Now you have everything you need to share your package on GitHub so create a GitHub repository and push our local content up to it.</p>
<p>You will need to set up <code>gitcreds</code> again in this new project!</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="packaging-functionality.html#cb644-1" aria-hidden="true" tabindex="-1"></a><span class="co"># configure GitHub PAT credentials</span></span>
<span id="cb644-2"><a href="packaging-functionality.html#cb644-2" aria-hidden="true" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>()</span>
<span id="cb644-3"><a href="packaging-functionality.html#cb644-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb644-4"><a href="packaging-functionality.html#cb644-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create GitHub repository and push</span></span>
<span id="cb644-5"><a href="packaging-functionality.html#cb644-5" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_github</span>(<span class="at">protocol =</span> <span class="st">&quot;https&quot;</span>)</span></code></pre></div>
<p>Anyone will be able to install it using, eg:</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="packaging-functionality.html#cb645-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;annakrystalli/mypackage&quot;</span>)</span></code></pre></div>
<p>Add the link to your package repo in the <a href="http://bit.ly/acce21-notepad">hackpad</a>. Visit someone else’s package repo, follow the instructions to install, load it and receive a personalised greeting from the author!</p>
</div>
<div id="setup-continuous-integration-with-github-actions" class="section level2">
<h2>Setup Continuous Integration with GitHub Actions</h2>
<p>Continuous integration (CI) is the practice of automating the integration of code changes from multiple contributors into a single software project. Automated tools are used to assert the new code’s correctness before integration. In our case this is what are tests are for. And GitHub Actions allows us to do this all within GitHub!</p>
<p>Once the appropriate CI workflow is set up, it will automatically run our tests for us every time we push new code to GitHub or when a new pull request is made. This way we can (try to) ensure we don’t merge new code into our code base that introduces bugs (cause our tests to fail). Obviously, our ability to screen for breaking changes is only as good as our testing framework! But atleast we can get GitHub to run our tests for us!</p>
<p>To run CI workflows through GitHub Actions, we specify the actions or jobs we want the CI system in a <code>.yaml</code> file that lives in <code>.github/workflows/</code> folder in the root of our package/project. This can be quite complicated for complex projects as you have to effectively specify instructions for GitHub to recreate a computational environment to run the tests in. The <code>.yaml</code> format can also be fiddly, with indents having special meaning. However for a simple projects like ours, there is a <code>usethis</code> functions that can create and appropriate <code>.yaml</code> for us that works right out of the box!</p>
<p>Let’s try it out:</p>
<div class="sourceCode" id="cb646"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb646-1"><a href="packaging-functionality.html#cb646-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_github_action_check_release</span>()</span></code></pre></div>
<pre><code>✓ Creating &#39;.github/&#39;
✓ Adding &#39;^\\.github$&#39; to &#39;.Rbuildignore&#39;
✓ Adding &#39;*.html&#39; to &#39;.github/.gitignore&#39;
✓ Creating &#39;.github/workflows/&#39;
✓ Writing &#39;.github/workflows/R-CMD-check.yaml&#39;
• Learn more at &lt;https://github.com/r-lib/actions/blob/master/examples/README.md✓ Adding R-CMD-check badge to &#39;README.Rmd&#39;
• Re-knit &#39;README.Rmd&#39;</code></pre>
<p>This workflow installs the latest release of R on macOS and runs R CMD check via the <code>rcmdcheck</code> package.</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb648-1"><a href="packaging-functionality.html#cb648-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For help debugging build failures open an issue on the RStudio community with the &#39;github-actions&#39; tag.</span></span>
<span id="cb648-2"><a href="packaging-functionality.html#cb648-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://community.rstudio.com/new-topic?category=Package%20development&amp;tags=github-actions</span></span>
<span id="cb648-3"><a href="packaging-functionality.html#cb648-3" aria-hidden="true" tabindex="-1"></a>on<span class="sc">:</span></span>
<span id="cb648-4"><a href="packaging-functionality.html#cb648-4" aria-hidden="true" tabindex="-1"></a>  push<span class="sc">:</span></span>
<span id="cb648-5"><a href="packaging-functionality.html#cb648-5" aria-hidden="true" tabindex="-1"></a>    branches<span class="sc">:</span></span>
<span id="cb648-6"><a href="packaging-functionality.html#cb648-6" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> main</span>
<span id="cb648-7"><a href="packaging-functionality.html#cb648-7" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> master</span>
<span id="cb648-8"><a href="packaging-functionality.html#cb648-8" aria-hidden="true" tabindex="-1"></a>  pull_request<span class="sc">:</span></span>
<span id="cb648-9"><a href="packaging-functionality.html#cb648-9" aria-hidden="true" tabindex="-1"></a>    branches<span class="sc">:</span></span>
<span id="cb648-10"><a href="packaging-functionality.html#cb648-10" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> main</span>
<span id="cb648-11"><a href="packaging-functionality.html#cb648-11" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> master</span>
<span id="cb648-12"><a href="packaging-functionality.html#cb648-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-13"><a href="packaging-functionality.html#cb648-13" aria-hidden="true" tabindex="-1"></a>name<span class="sc">:</span> R<span class="sc">-</span>CMD<span class="sc">-</span>check</span>
<span id="cb648-14"><a href="packaging-functionality.html#cb648-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-15"><a href="packaging-functionality.html#cb648-15" aria-hidden="true" tabindex="-1"></a>jobs<span class="sc">:</span></span>
<span id="cb648-16"><a href="packaging-functionality.html#cb648-16" aria-hidden="true" tabindex="-1"></a>  R<span class="sc">-</span>CMD<span class="sc">-</span>check<span class="sc">:</span></span>
<span id="cb648-17"><a href="packaging-functionality.html#cb648-17" aria-hidden="true" tabindex="-1"></a>    runs<span class="sc">-</span>on<span class="sc">:</span> macOS<span class="sc">-</span>latest</span>
<span id="cb648-18"><a href="packaging-functionality.html#cb648-18" aria-hidden="true" tabindex="-1"></a>    env<span class="sc">:</span></span>
<span id="cb648-19"><a href="packaging-functionality.html#cb648-19" aria-hidden="true" tabindex="-1"></a>      GITHUB_PAT<span class="sc">:</span> <span class="er">$</span>{{ secrets.GITHUB_TOKEN }}</span>
<span id="cb648-20"><a href="packaging-functionality.html#cb648-20" aria-hidden="true" tabindex="-1"></a>    steps<span class="sc">:</span></span>
<span id="cb648-21"><a href="packaging-functionality.html#cb648-21" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> uses<span class="sc">:</span> actions<span class="sc">/</span>checkout<span class="sc">@</span>v2</span>
<span id="cb648-22"><a href="packaging-functionality.html#cb648-22" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> uses<span class="sc">:</span> r<span class="sc">-</span>lib<span class="sc">/</span>actions<span class="sc">/</span>setup<span class="sc">-</span>r<span class="sc">@</span>v1</span>
<span id="cb648-23"><a href="packaging-functionality.html#cb648-23" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> name<span class="sc">:</span> Install dependencies</span>
<span id="cb648-24"><a href="packaging-functionality.html#cb648-24" aria-hidden="true" tabindex="-1"></a>        run<span class="sc">:</span> <span class="er">|</span></span>
<span id="cb648-25"><a href="packaging-functionality.html#cb648-25" aria-hidden="true" tabindex="-1"></a>          <span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;remotes&quot;</span>, <span class="st">&quot;rcmdcheck&quot;</span>))</span>
<span id="cb648-26"><a href="packaging-functionality.html#cb648-26" aria-hidden="true" tabindex="-1"></a>          remotes<span class="sc">::</span><span class="fu">install_deps</span>(<span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb648-27"><a href="packaging-functionality.html#cb648-27" aria-hidden="true" tabindex="-1"></a>        shell<span class="sc">:</span> Rscript {<span class="dv">0</span>}</span>
<span id="cb648-28"><a href="packaging-functionality.html#cb648-28" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> name<span class="sc">:</span> Check</span>
<span id="cb648-29"><a href="packaging-functionality.html#cb648-29" aria-hidden="true" tabindex="-1"></a>        run<span class="sc">:</span> <span class="er">|</span></span>
<span id="cb648-30"><a href="packaging-functionality.html#cb648-30" aria-hidden="true" tabindex="-1"></a>          <span class="fu">options</span>(<span class="at">crayon.enabled =</span> <span class="cn">TRUE</span>)</span>
<span id="cb648-31"><a href="packaging-functionality.html#cb648-31" aria-hidden="true" tabindex="-1"></a>          rcmdcheck<span class="sc">::</span><span class="fu">rcmdcheck</span>(<span class="at">args =</span> <span class="st">&quot;--no-manual&quot;</span>, <span class="at">error_on =</span> <span class="st">&quot;error&quot;</span>)</span>
<span id="cb648-32"><a href="packaging-functionality.html#cb648-32" aria-hidden="true" tabindex="-1"></a>        shell<span class="sc">:</span> Rscript {<span class="dv">0</span>}</span></code></pre></div>
<ul>
<li>Re-knit <code>README.Rmd</code> to include GitHub Actions badge.</li>
<li>Commit the whole <code>.github</code> folder as well as <code>README.Rmd</code> &amp; <code>README.md</code></li>
<li>Push to GitHub</li>
</ul>
<p>This will activate the <code>R-CMD-CHECK</code> GitHub Actions workflow and begin running it.</p>
<p>To see details and the status of GitHub Actions workflows, click on the <strong><svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M371.7 238l-176-107c-15.8-8.8-35.7 2.5-35.7 21v208c0 18.4 19.8 29.8 35.7 21l176-101c16.4-9.1 16.4-32.8 0-42zM504 256C504 119 393 8 256 8S8 119 8 256s111 248 248 248 248-111 248-248zm-448 0c0-110.5 89.5-200 200-200s200 89.5 200 200-89.5 200-200 200S56 366.5 56 256z"></path></svg> Actions</strong> tab and select the workflow to view. If our test passes, the run will show as successful ✅ and so will the badge in our README. If there are any problems, error messages will appear in the logs.</p>
<p><img src="assets/ga-r-cmd-check-success.png" /><!-- --></p>
</div>
<div id="create-documentation-site" class="section level2">
<h2>🚦 Create documentation site</h2>
<p>While the README is a great first step for documenting your package, there is an easy way to create a full website which makes the documentation of each exported function avaliable online and where you could include additional, more detailed vignettes.</p>
<p>You can use package <code>pkgdown</code> to create an online site for your documentation. It effectively recycles the documentation you have already created for your functions, information in your README and DESCRIPTION file and presents it in a standardised website form.</p>
<p>Let’s create such a site for our package.</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="packaging-functionality.html#cb649-1" aria-hidden="true" tabindex="-1"></a>pkgdown<span class="sc">::</span><span class="fu">build_site</span>()</span></code></pre></div>
<pre><code>══ Building pkgdown site ════════════════════════════════════════════
Reading from: &#39;/Users/Anna/Documents/workflows/dummy/mypackage&#39;
Writing to:   &#39;/Users/Anna/Documents/workflows/dummy/mypackage/docs&#39;
── Initialising site ────────────────────────────────────────────────
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/docsearch.css&#39; to &#39;docsearch.css&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/docsearch.js&#39; to &#39;docsearch.js&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/link.svg&#39; to &#39;link.svg&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/pkgdown.css&#39; to &#39;pkgdown.css&#39;
Copying &#39;../../../../../../Library/Frameworks/R.framework/Versions/3.5/Resources/library/pkgdown/assets/pkgdown.js&#39; to &#39;pkgdown.js&#39;
── Building home ────────────────────────────────────────────────────
Writing &#39;authors.html&#39;
Reading &#39;LICENSE.md&#39;
Writing &#39;LICENSE.html&#39;
Writing &#39;LICENSE-text.html&#39;
Reading &#39;README.Rmd&#39;
Writing &#39;index.html&#39;
── Building function reference ──────────────────────────────────────
Updating mypackage documentation
Writing NAMESPACE
Loading mypackage
Writing NAMESPACE
Writing &#39;reference/index.html&#39;
Loading mypackage
Reading &#39;man/hello.Rd&#39;
Writing &#39;reference/hello.html&#39;
══ DONE ═════════════════════════════════════════════════════════════
── Previewing site ──────────────────────────────────────────────────</code></pre>
<p>This creates html documentation for our package in the <code>docs/</code> folder and presents you with a preview to the site.</p>
<p>Now, you could push this <code>docs/</code> folder to GitHub and serve through GitHub Pages, but you would need to rebuild, commit and push these docs anytime there was a change in the package documentation.</p>
<p>Instead what we could do is get our CI system (GitHub Actions) to build our docs for us automatically every time there is a push or pull request to our repository!! So let’s try this approach!</p>
<p>First, let’s tell git to ignore local copies of the docs in our <code>docs/</code> folder by adding <code>docs/*</code> to our <code>.gitignore</code> file. This way, we can still build and preview our site locally if we want but we won’t commit it to our<code>master</code> or <code>main</code> branch.</p>
<p>Then, we can deploy another GitHub Actions template, provided by <code>usethis</code> that again will work right out the box!</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="packaging-functionality.html#cb651-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_github_action</span>(<span class="st">&quot;pkgdown&quot;</span>)</span></code></pre></div>
<pre><code>✓ Setting active project to &#39;/cloud/project/mypackage&#39;
✓ Writing &#39;.github/workflows/pkgdown.yaml&#39;
• Learn more at &lt;https://github.com/r-lib/actions/blob/master/examples/README.md&gt;</code></pre>
<p>This creates another file in <code>.github/workflows/</code> called <code>pkgdown.yaml</code>. The workflow installs the package, building all documentation, installs <code>pkgdown</code> and uses it to build the site. It then commits the build site to a separate <code>gh-pages</code> site.</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="packaging-functionality.html#cb653-1" aria-hidden="true" tabindex="-1"></a>on<span class="sc">:</span></span>
<span id="cb653-2"><a href="packaging-functionality.html#cb653-2" aria-hidden="true" tabindex="-1"></a>  push<span class="sc">:</span></span>
<span id="cb653-3"><a href="packaging-functionality.html#cb653-3" aria-hidden="true" tabindex="-1"></a>    branches<span class="sc">:</span></span>
<span id="cb653-4"><a href="packaging-functionality.html#cb653-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> main</span>
<span id="cb653-5"><a href="packaging-functionality.html#cb653-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> master</span>
<span id="cb653-6"><a href="packaging-functionality.html#cb653-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-7"><a href="packaging-functionality.html#cb653-7" aria-hidden="true" tabindex="-1"></a>name<span class="sc">:</span> pkgdown</span>
<span id="cb653-8"><a href="packaging-functionality.html#cb653-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-9"><a href="packaging-functionality.html#cb653-9" aria-hidden="true" tabindex="-1"></a>jobs<span class="sc">:</span></span>
<span id="cb653-10"><a href="packaging-functionality.html#cb653-10" aria-hidden="true" tabindex="-1"></a>  pkgdown<span class="sc">:</span></span>
<span id="cb653-11"><a href="packaging-functionality.html#cb653-11" aria-hidden="true" tabindex="-1"></a>    runs<span class="sc">-</span>on<span class="sc">:</span> macOS<span class="sc">-</span>latest</span>
<span id="cb653-12"><a href="packaging-functionality.html#cb653-12" aria-hidden="true" tabindex="-1"></a>    env<span class="sc">:</span></span>
<span id="cb653-13"><a href="packaging-functionality.html#cb653-13" aria-hidden="true" tabindex="-1"></a>      GITHUB_PAT<span class="sc">:</span> <span class="er">$</span>{{ secrets.GITHUB_TOKEN }}</span>
<span id="cb653-14"><a href="packaging-functionality.html#cb653-14" aria-hidden="true" tabindex="-1"></a>    steps<span class="sc">:</span></span>
<span id="cb653-15"><a href="packaging-functionality.html#cb653-15" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> uses<span class="sc">:</span> actions<span class="sc">/</span>checkout<span class="sc">@</span>v2</span>
<span id="cb653-16"><a href="packaging-functionality.html#cb653-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-17"><a href="packaging-functionality.html#cb653-17" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> uses<span class="sc">:</span> r<span class="sc">-</span>lib<span class="sc">/</span>actions<span class="sc">/</span>setup<span class="sc">-</span>r<span class="sc">@</span>v1</span>
<span id="cb653-18"><a href="packaging-functionality.html#cb653-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-19"><a href="packaging-functionality.html#cb653-19" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> uses<span class="sc">:</span> r<span class="sc">-</span>lib<span class="sc">/</span>actions<span class="sc">/</span>setup<span class="sc">-</span>pandoc<span class="sc">@</span>v1</span>
<span id="cb653-20"><a href="packaging-functionality.html#cb653-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-21"><a href="packaging-functionality.html#cb653-21" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> name<span class="sc">:</span> Query dependencies</span>
<span id="cb653-22"><a href="packaging-functionality.html#cb653-22" aria-hidden="true" tabindex="-1"></a>        run<span class="sc">:</span> <span class="er">|</span></span>
<span id="cb653-23"><a href="packaging-functionality.html#cb653-23" aria-hidden="true" tabindex="-1"></a>          <span class="fu">install.packages</span>(<span class="st">&#39;remotes&#39;</span>)</span>
<span id="cb653-24"><a href="packaging-functionality.html#cb653-24" aria-hidden="true" tabindex="-1"></a>          <span class="fu">saveRDS</span>(remotes<span class="sc">::</span><span class="fu">dev_package_deps</span>(<span class="at">dependencies =</span> <span class="cn">TRUE</span>), <span class="st">&quot;.github/depends.Rds&quot;</span>, <span class="at">version =</span> <span class="dv">2</span>)</span>
<span id="cb653-25"><a href="packaging-functionality.html#cb653-25" aria-hidden="true" tabindex="-1"></a>          <span class="fu">writeLines</span>(<span class="fu">sprintf</span>(<span class="st">&quot;R-%i.%i&quot;</span>, <span class="fu">getRversion</span>()<span class="sc">$</span>major, <span class="fu">getRversion</span>()<span class="sc">$</span>minor), <span class="st">&quot;.github/R-version&quot;</span>)</span>
<span id="cb653-26"><a href="packaging-functionality.html#cb653-26" aria-hidden="true" tabindex="-1"></a>        shell<span class="sc">:</span> Rscript {<span class="dv">0</span>}</span>
<span id="cb653-27"><a href="packaging-functionality.html#cb653-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-28"><a href="packaging-functionality.html#cb653-28" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> name<span class="sc">:</span> Restore R package cache</span>
<span id="cb653-29"><a href="packaging-functionality.html#cb653-29" aria-hidden="true" tabindex="-1"></a>        uses<span class="sc">:</span> actions<span class="sc">/</span>cache<span class="sc">@</span>v2</span>
<span id="cb653-30"><a href="packaging-functionality.html#cb653-30" aria-hidden="true" tabindex="-1"></a>        with<span class="sc">:</span></span>
<span id="cb653-31"><a href="packaging-functionality.html#cb653-31" aria-hidden="true" tabindex="-1"></a>          path<span class="sc">:</span> <span class="er">$</span>{{ env.R_LIBS_USER }}</span>
<span id="cb653-32"><a href="packaging-functionality.html#cb653-32" aria-hidden="true" tabindex="-1"></a>          key<span class="sc">:</span> <span class="er">$</span>{{ runner.os }}<span class="sc">-</span><span class="er">$</span>{{ <span class="fu">hashFiles</span>(<span class="st">&#39;.github/R-version&#39;</span>) }}<span class="sc">-</span><span class="dv">1</span><span class="sc">-</span><span class="er">$</span>{{ <span class="fu">hashFiles</span>(<span class="st">&#39;.github/depends.Rds&#39;</span>) }}</span>
<span id="cb653-33"><a href="packaging-functionality.html#cb653-33" aria-hidden="true" tabindex="-1"></a>          restore<span class="sc">-</span>keys<span class="sc">:</span> <span class="er">$</span>{{ runner.os }}<span class="sc">-</span><span class="er">$</span>{{ <span class="fu">hashFiles</span>(<span class="st">&#39;.github/R-version&#39;</span>) }}<span class="sc">-</span><span class="dv">1</span><span class="sc">-</span></span>
<span id="cb653-34"><a href="packaging-functionality.html#cb653-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-35"><a href="packaging-functionality.html#cb653-35" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> name<span class="sc">:</span> Install dependencies</span>
<span id="cb653-36"><a href="packaging-functionality.html#cb653-36" aria-hidden="true" tabindex="-1"></a>        run<span class="sc">:</span> <span class="er">|</span></span>
<span id="cb653-37"><a href="packaging-functionality.html#cb653-37" aria-hidden="true" tabindex="-1"></a>          remotes<span class="sc">::</span><span class="fu">install_deps</span>(<span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb653-38"><a href="packaging-functionality.html#cb653-38" aria-hidden="true" tabindex="-1"></a>          <span class="fu">install.packages</span>(<span class="st">&quot;pkgdown&quot;</span>, <span class="at">type =</span> <span class="st">&quot;binary&quot;</span>)</span>
<span id="cb653-39"><a href="packaging-functionality.html#cb653-39" aria-hidden="true" tabindex="-1"></a>        shell<span class="sc">:</span> Rscript {<span class="dv">0</span>}</span>
<span id="cb653-40"><a href="packaging-functionality.html#cb653-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-41"><a href="packaging-functionality.html#cb653-41" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> name<span class="sc">:</span> Install package</span>
<span id="cb653-42"><a href="packaging-functionality.html#cb653-42" aria-hidden="true" tabindex="-1"></a>        run<span class="sc">:</span> R CMD INSTALL .</span>
<span id="cb653-43"><a href="packaging-functionality.html#cb653-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-44"><a href="packaging-functionality.html#cb653-44" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span> name<span class="sc">:</span> Deploy package</span>
<span id="cb653-45"><a href="packaging-functionality.html#cb653-45" aria-hidden="true" tabindex="-1"></a>        run<span class="sc">:</span> <span class="er">|</span></span>
<span id="cb653-46"><a href="packaging-functionality.html#cb653-46" aria-hidden="true" tabindex="-1"></a>          git config <span class="sc">--</span>local user.email <span class="st">&quot;actions@github.com&quot;</span></span>
<span id="cb653-47"><a href="packaging-functionality.html#cb653-47" aria-hidden="true" tabindex="-1"></a>          git config <span class="sc">--</span>local user.name <span class="st">&quot;GitHub Actions&quot;</span></span>
<span id="cb653-48"><a href="packaging-functionality.html#cb653-48" aria-hidden="true" tabindex="-1"></a>          Rscript <span class="sc">-</span>e <span class="st">&#39;pkgdown::deploy_to_branch(new_process = FALSE)&#39;</span></span></code></pre></div>
<p>Coomit the file and push it up to GitHub to activate. Once the workflow completes successfully, you will find the html for your documentation for you site in a new <code>gh-pages</code> branch!</p>
<div id="enable-gh-pages-1" class="section level3">
<h3>Enable <code>gh-pages</code></h3>
<p>To serve our new site, we need to enable GitHub Pages and set the source directory to the root of the <code>gh-pages</code> branch. To do so we go to <strong><svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></svg> Settings</strong> and click on <strong>Pages</strong> on the navigation bar on the left. Also remember to click on <strong>Enforce HTTPS</strong>.</p>
<p><img src="assets/pkgdown-gh-pages.png" /><!-- --></p>
<p>Once set, the URL at which your pkdown docs are being served will appear. You can copy that and add it to your repo details.</p>
<p><img src="assets/mypackage_pkgdown.png" /><!-- --></p>
<p><img src="assets/mypackage_pkgdown_fn-ref.png" /><!-- --></p>
<p>Check out my complete example <a href="https://github.com/annakrystalli/mypackage-demo">here</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="managing-dependencies.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="creating-a-research-compendium-with-rrtools.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rrresearchACCE20.pdf", "rrresearchACCE20.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
