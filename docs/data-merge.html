<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Merging data | Reproducible Research Data &amp; Project Management in R</title>
  <meta name="description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Merging data | Reproducible Research Data &amp; Project Management in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://annakrystalli.me/rrresearchACCE20" />
  
  <meta property="og:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="github-repo" content="annakrystalli/rrresearchACCE20" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Merging data | Reproducible Research Data &amp; Project Management in R" />
  
  <meta name="twitter:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  

<meta name="author" content="Course Instructor: Anna Krystalli" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="iteration.html"/>
<link rel="next" href="functions.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding-3.0.0/jsonedit.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.12/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Research Data & Project Management in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course description</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-outcomes"><i class="fa fa-check"></i>Learning Outcomes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i>Course Outline</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#optional"><i class="fa fa-check"></i>Optional</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="welcome-slides.html"><a href="welcome-slides.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html"><i class="fa fa-check"></i>Intro to R &amp; Rstudio</a><ul>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html#rstudio"><i class="fa fa-check"></i>Rstudio</a></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html#working-with-r-in-rstudio-cloud"><i class="fa fa-check"></i>Working with R in Rstudio cloud</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i>R Basics</a><ul>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#using-r-in-the-console"><i class="fa fa-check"></i>Using R in the console</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#working-in-scripts"><i class="fa fa-check"></i>Working in scripts</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#using-r-as-a-calculator"><i class="fa fa-check"></i>Using R as a calculator</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#mathematical-functions"><i class="fa fa-check"></i>Mathematical functions</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#variables-and-assignment"><i class="fa fa-check"></i>Variables and assignment</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html#comparing-things"><i class="fa fa-check"></i>Comparing things</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html"><i class="fa fa-check"></i>Data types, structures and classes</a><ul>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#base-types"><i class="fa fa-check"></i>Base types</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#base-data-types"><i class="fa fa-check"></i>Base data types</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#data-structures"><i class="fa fa-check"></i>Data Structures</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#lists"><i class="fa fa-check"></i>Lists</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html#data.frames"><i class="fa fa-check"></i>Data.frames</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html"><i class="fa fa-check"></i>Indexing and subsetting</a><ul>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#subsetting-vectors"><i class="fa fa-check"></i>Subsetting vectors</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#matrix-subsetting"><i class="fa fa-check"></i>Matrix subsetting</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#subsetting-lists"><i class="fa fa-check"></i>Subsetting lists</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#subsetting-data.frames"><i class="fa fa-check"></i>Subsetting data.frames</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html#advanced-r-cheat-sheet"><i class="fa fa-check"></i>Advanced R Cheat Sheet</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html"><i class="fa fa-check"></i>The tidyverse way</a><ul>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html#intro-to-the-tidyverse"><i class="fa fa-check"></i>Intro to the tidyverse</a></li>
<li><a href="the-tidyverse-way.html#tibbles"><code>tibbles</code></a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html#subsetting-tibbles"><i class="fa fa-check"></i>Subsetting tibbles</a></li>
<li><a href="the-tidyverse-way.html#the-pipe-operator">The pipe operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html#advanced-r-cheat-sheet-1"><i class="fa fa-check"></i>Advanced R Cheat Sheet</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rdm-intro-view.html"><a href="rdm-intro-view.html"><i class="fa fa-check"></i>Data management Basics</a></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html"><i class="fa fa-check"></i>Projects in Rstudio</a><ul>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html#general-project-organisation"><i class="fa fa-check"></i>General Project Organisation</a></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html#rstudio-projects"><i class="fa fa-check"></i>Rstudio Projects</a></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html#rstudio-cloud-projects"><i class="fa fa-check"></i>Rstudio Cloud projects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="filenaming-view.html"><a href="filenaming-view.html"><i class="fa fa-check"></i>Good File Naming</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html"><i class="fa fa-check"></i>Paths and Project structure</a><ul>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#project-data"><i class="fa fa-check"></i>Project Data</a></li>
<li><a href="path-proj-str.html#setting-up-a-data-raw-directory">Setting up a <code>data-raw/</code> directory</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#neon-data"><i class="fa fa-check"></i>NEON Data</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#paths"><i class="fa fa-check"></i>Paths</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html#basic-checks"><i class="fa fa-check"></i>Basic checks</a></li>
</ul></li>
<li class="part"><span><b>III Data Munging</b></span></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i>Iteration</a><ul>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#iterating-using-loops"><i class="fa fa-check"></i>Iterating using loops</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#functional-programming"><i class="fa fa-check"></i>Functional programming</a></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html#writing-out-our-tibble-to-disk"><i class="fa fa-check"></i>Writing out our tibble to disk</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html"><i class="fa fa-check"></i>Merging data</a><ul>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html#join-basics"><i class="fa fa-check"></i>Join Basics</a></li>
<li><a href="data-merge.html#joining-our-tables-with-dplyr">Joining our tables with <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#elements-of-a-function"><i class="fa fa-check"></i>Elements of a function</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#creating-our-user-built-functions"><i class="fa fa-check"></i>Creating our user-built functions</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#experimenting"><i class="fa fa-check"></i>Experimenting</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#developing-our-function"><i class="fa fa-check"></i>Developing our function</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#saving-analytical-data"><i class="fa fa-check"></i>Saving analytical data</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#final-processing-script"><i class="fa fa-check"></i>Final processing script:</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#final-function"><i class="fa fa-check"></i>Final function</a></li>
</ul></li>
<li class="part"><span><b>IV Working with metadata</b></span></li>
<li class="chapter" data-level="" data-path="metadata-slides.html"><a href="metadata-slides.html"><i class="fa fa-check"></i>Metadata</a></li>
<li><a href="dataspice.html#dataspice">Creating metadata with <code>dataspice</code></a><ul>
<li><a href="dataspice.html#dataspice-workflow"><code>dataspice</code> workflow</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html"><i class="fa fa-check"></i>Create the metadata folder</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html#record-metadata"><i class="fa fa-check"></i>Record metadata</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html#create-metadata-json-ld-file"><i class="fa fa-check"></i>Create metadata json-ld file</a></li>
<li class="chapter" data-level="" data-path="dataspice.html"><a href="dataspice.html#build-readme-site"><i class="fa fa-check"></i>Build README site</a></li>
</ul></li>
<li class="part"><span><b>V Analysing and presenting analyses</b></span></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html"><i class="fa fa-check"></i>Plotting with ggplot2</a><ul>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html#data-visualisation-and-analysis-basics"><i class="fa fa-check"></i>Data visualisation and analysis basics</a></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html#graphics-in-r"><i class="fa fa-check"></i>Graphics in R</a></li>
<li><a href="plotting-with-ggplot2.html#data-visualisation-in-practice-exploring-individual-with-ggplot2">Data visualisation in practice: Exploring <code>individual</code> with <code>ggplot2</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html"><i class="fa fa-check"></i>Literate Programming in rmarkdown</a><ul>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html#literate-programming"><i class="fa fa-check"></i>Literate programming</a></li>
<li><a href="literate-programming-in-rmarkdown.html#literate-programming-in-r"><strong>Literate programming in R</strong></a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html#applications-of-rmd-in-research"><i class="fa fa-check"></i>Applications of Rmd in research</a></li>
<li><a href="literate-programming-in-rmarkdown.html#rmd-in-practice"><code>Rmd</code> in Practice</a></li>
<li><a href="literate-programming-in-rmarkdown.html#advanced-.rmd">Advanced <code>.Rmd</code></a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html#getting-help-with-markdown"><i class="fa fa-check"></i>Getting help with markdown</a></li>
<li><a href="literate-programming-in-rmarkdown.html#resources-1"><strong>Resources</strong></a></li>
</ul></li>
<li class="part"><span><b>VI Version Control</b></span></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html"><i class="fa fa-check"></i>Version Control with Git</a><ul>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#what-is-version-control"><i class="fa fa-check"></i>What is Version control? ðŸ¤”</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#what-is-git"><i class="fa fa-check"></i>What is git? ðŸ¤”</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#what-is-github"><i class="fa fa-check"></i>What is GitHub ðŸ¤”</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#git-github-rstudio"><i class="fa fa-check"></i>Git, Github &amp; Rstudio</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#demo"><i class="fa fa-check"></i>Demo</a></li>
<li><a href="version-control-with-git.html#how-does-git-work">How does <code>Git</code> work?</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#configure-git-github"><i class="fa fa-check"></i>Configure git &amp; GitHub</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#version-controlling-projects"><i class="fa fa-check"></i>Version Controlling projects</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#create-repository-on-github"><i class="fa fa-check"></i>Create repository on GitHub</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#host-html-content-on-github"><i class="fa fa-check"></i>Host html content on GitHub</a></li>
<li><a href="version-control-with-git.html#enable-gh-pages">Enable <code>gh-pages</code></a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#tracking-changes"><i class="fa fa-check"></i>Tracking changes</a></li>
<li><a href="version-control-with-git.html#ignoring-files-through-.gitignore">Ignoring files through <code>.gitignore</code></a></li>
<li><a href="version-control-with-git.html#git-tips"><code>Git</code> tips</a></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html#further-resources"><i class="fa fa-check"></i>Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="collaborative-github.html"><a href="collaborative-github.html"><i class="fa fa-check"></i>Collaborative GitHub</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#practical-github-rstudio-for-collaborative-coding">Practical: <code>GitHub</code> &amp; <code>Rstudio</code> for collaborative coding</a><ul>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#evolottery"><strong>EvoLottery</strong></a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html"><i class="fa fa-check"></i>Clone Github repo</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#make-a-change-to-the-repo"><strong>Make a change to the repo</strong></a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html#commit-changes-locally-to-git"><i class="fa fa-check"></i>Commit changes locally to git</a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html#push-changes-to-github"><i class="fa fa-check"></i>Push changes to GitHub</a></li>
<li class="chapter" data-level="" data-path="practical-github-rstudio-for-collaborative-coding.html"><a href="practical-github-rstudio-for-collaborative-coding.html#create-pull-request"><i class="fa fa-check"></i>Create pull request</a></li>
</ul></li>
<li class="part"><span><b>VII Closing</b></span></li>
<li class="chapter" data-level="" data-path="closing-remarks.html"><a href="closing-remarks.html"><i class="fa fa-check"></i>Closing Remarks</a></li>
<li class="part"><span><b>VIII Additonal materials</b></span></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html"><i class="fa fa-check"></i>Packaging functionality</a><ul>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#r-package-structure"><i class="fa fa-check"></i>R Package Structure</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#r-package-conventions"><i class="fa fa-check"></i>R Package conventions:</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#software-engineering-approach"><i class="fa fa-check"></i>Software Engineering approach</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#anatomy-of-an-r-package"><i class="fa fa-check"></i>Anatomy of an R package</a></li>
<li><a href="packaging-functionality.html#description-file"><code>DESCRIPTION</code> file</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#dependency-management"><i class="fa fa-check"></i>Dependency management</a></li>
<li><a href="packaging-functionality.html#r-1"><code>R/</code></a></li>
<li><a href="packaging-functionality.html#document-functions-with-roxygen">Document functions with <code>Roxygen</code></a></li>
<li><a href="packaging-functionality.html#tests"><code>tests/</code></a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-your-first-package"><i class="fa fa-check"></i>ðŸ’»Create your first package</a></li>
<li><a href="packaging-functionality.html#functions-in-the-r-dir">ðŸš¦ Functions in the <strong><code>R/</code></strong> dir</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#roxygen-documentation"><i class="fa fa-check"></i>ðŸš¦ Roxygen documentation</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#personalise-function"><i class="fa fa-check"></i>ðŸš¦ Personalise function</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-some-fun"><i class="fa fa-check"></i>Add some fun!</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#check-package-integrity"><i class="fa fa-check"></i>ðŸš¦ Check package integrity</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-dependencies"><i class="fa fa-check"></i>ðŸš¦ Add dependencies</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-license"><i class="fa fa-check"></i>Add License</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-test"><i class="fa fa-check"></i>ðŸš¦ Add Test</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-test-file"><i class="fa fa-check"></i>create test file</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#write-test"><i class="fa fa-check"></i>Write test</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#complete-package-metadata"><i class="fa fa-check"></i>ðŸš¦ Complete package metadata</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#authors"><i class="fa fa-check"></i>Authors</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-a-title-and-description"><i class="fa fa-check"></i>Add a title and description</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#add-a-date"><i class="fa fa-check"></i>Add a date</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-readme"><i class="fa fa-check"></i>ðŸš¦ Create README</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#commit-and-push-to-github"><i class="fa fa-check"></i>Commit and push to GitHub</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html#create-documentation-site"><i class="fa fa-check"></i>ðŸš¦ Create documentation site</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html"><i class="fa fa-check"></i>Creating a research compendium with rrtools</a><ul>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#background"><i class="fa fa-check"></i>Background</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#enter-the-research-compendium"><i class="fa fa-check"></i>Enter the Research Compendium</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#r-community-response"><i class="fa fa-check"></i>R community response</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#general-project-organisation-1"><i class="fa fa-check"></i>General Project Organisation</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#from-raw-to-analytical-data"><i class="fa fa-check"></i>From raw to analytical data</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#separate-function-definition-and-application"><i class="fa fa-check"></i>Separate function definition and application</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#use-rstudio-projects"><i class="fa fa-check"></i>Use Rstudio projects</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#follow-convention"><i class="fa fa-check"></i>Follow convention</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#r-developer-tools"><i class="fa fa-check"></i>R Developer Tools</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#rrtools-research-compendia-in-r"><code>rrtools</code>: Research Compendia in R</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#workshop-materials"><i class="fa fa-check"></i>ðŸ’» Workshop materials</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#data"><i class="fa fa-check"></i>Data</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#workshop-aims-and-objectives"><i class="fa fa-check"></i>Workshop aims and objectives</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#rrtools-setup"><i class="fa fa-check"></i>Setup</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#create-compendium"><i class="fa fa-check"></i>ðŸš¦ Create compendium</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#update-description-file">ðŸš¦ Update <code>DESCRIPTION</code> file</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#sharing-a-compendium-on-github"><i class="fa fa-check"></i>ðŸš¦Sharing a compendium on GitHub</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#create-readme-1"><i class="fa fa-check"></i>Create README</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#update-readme">update <code>README</code></a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#create-github-repository"><i class="fa fa-check"></i>ðŸš¦ Create GitHub repository</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#setting-up-the-analysis-folder"><i class="fa fa-check"></i>ðŸš¦ Setting up the analysis folder</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#create-analysis">Create <code>analysis</code></a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#reproduce-a-paper-in-rmd"><i class="fa fa-check"></i>ðŸš¦ Reproduce a paper in Rmd</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#setup-data"><i class="fa fa-check"></i>Setup data</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#inspect-analysis.r-file"><i class="fa fa-check"></i>Inspect analysis.R file</a></li>
<li><a href="creating-a-research-compendium-with-rrtools.html#create-journal-article-template-using-rticles">ðŸš¦ Create journal article template using <code>rticles</code></a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#update-yaml"><i class="fa fa-check"></i>ðŸš¦ Update YAML</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#add-text"><i class="fa fa-check"></i>ðŸš¦ Add text</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#update-references"><i class="fa fa-check"></i>ðŸš¦ Update references</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#update-math"><i class="fa fa-check"></i>ðŸš¦ Update math</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#add-code"><i class="fa fa-check"></i>ðŸš¦ Add code</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#render-final-document-to-pdf"><i class="fa fa-check"></i>Render final document to pdf</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#add-paper-dependencies"><i class="fa fa-check"></i>ðŸš¦ Add paper dependencies</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html#final-compendium"><i class="fa fa-check"></i>Final compendium</a></li>
</ul></li>
<li class="part"><span><b>IX APPENDIX</b></span></li>
<li><a href="geolocate-r.html#geolocate.r"><code>geolocate.R</code></a></li>
<li><a href="analysis-r-1.html#analysis.r-1"><code>analysis.R</code></a></li>
<li><a href="index-rmd.html#index.rmd"><code>index.Rmd</code></a></li>
<li><a href="gitignore.html#gitignore"><code>.gitignore</code></a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a><ul>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Software Setup</a><ul>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html#software-requirements"><i class="fa fa-check"></i>Software Requirements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i>Solutions</a></li>
<li class="divider"></li>
<li><a href="https://annakrystalli.me/rrreasearchACCE2020" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Data &amp; Project Management in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-merge" class="section level1">
<h1>Merging data</h1>
<p>Letâ€™s say we want to geolocate every individual in our analytic data.</p>
<p>As weâ€™ve discussed, the various tables we downloaded hold different information collected during the various survey events.</p>
<ul>
<li>plot level metadata</li>
<li>individual level tagging metadata</li>
<li>individual level repeated measurement data (although we only have a single measurement event per individual in our data set).</li>
</ul>
<p>Currently, only the plot is geolocated, the data being contained in <code>vst_perplotperyear.csv</code> columns <code>decimalLatitude</code> and <code>decimalLongitude</code>.</p>
<p>The location of each individual stem is defined in <code>vst_mappingandtagging.csv</code>.</p>
<p>A number of variables are involved, including <code>pointID</code> which identifies a point on a 10m cell grid centred around <code>decimalLatitude</code> and <code>decimalLongitude</code>, and <code>stemDistance</code> and <code>stemAzimuth</code> which define the location of a stem, relative to the location of <code>pointID</code>. The full method used to locate individual stems is detailed in <code>methods/NEON_vegStructure_userGuide_vA.pdf</code>.</p>
<p><img src="assets/NEON_point_grid.png" width="346" /></p>
<p>So to geolocate our individuals, we need to join information from <code>vst_perplotperyear.csv</code> and <code>vst_mappingandtagging.csv</code> into our <code>individuals</code> tibble.</p>
<p>We use the family of <code>*_join</code> function in <code>dplyr</code> to merge columns from different tibbles.</p>
<iframe src="assets/cheatsheets/data-transformation.pdf" width="672" height="400px">
</iframe>
<div id="join-basics" class="section level2">
<h2>Join Basics</h2>
<p>There are a number of joins we can perform with <code>dplyr</code>.</p>
<p>Letâ€™s have a look at a few of them with a simple example using some <code>dplyr</code> in-built data:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1">band_members</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   name  band   
##   &lt;chr&gt; &lt;chr&gt;  
## 1 Mick  Stones 
## 2 John  Beatles
## 3 Paul  Beatles</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" data-line-number="1">band_instruments</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   name  plays 
##   &lt;chr&gt; &lt;chr&gt; 
## 1 John  guitar
## 2 Paul  bass  
## 3 Keith guitar</code></pre>
<p>The only variable shared between the two tables is <code>name</code> so this is the only variable we can perform joins over. By default, any <code>*_join</code> function will try to merge on the values of any matched columns in the tables being merged.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb313-1" data-line-number="1">band_members <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inner_join</span>(band_instruments)</a></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 2 x 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 John  Beatles guitar
## 2 Paul  Beatles bass</code></pre>
<p><code>inner_join</code> has merged all three unique columns across the two tables into a single tibble.
It has only kept the rows in which <code>name</code> values had a match in both tables. In this case only data about <code>John</code> and <code>Paul</code> was contained in both tables.</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" data-line-number="1">band_members <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(band_instruments)</a></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 3 x 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 Mick  Stones  &lt;NA&gt;  
## 2 John  Beatles guitar
## 3 Paul  Beatles bass</code></pre>
<p><code>left_join</code> joins on the <code>names</code> in the left hand table and appends any rows from the right hand table in which <code>name</code> match. In this case, there is no data for <code>Keith</code> in <code>band_members</code> so he is ignored completely. There is also no match for <code>Mick</code> in <code>band_instruments</code> so <code>NA</code> is returned for <code>plays</code> instead.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb319-1" data-line-number="1">band_members <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">right_join</span>(band_instruments)</a></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 3 x 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 John  Beatles guitar
## 2 Paul  Beatles bass  
## 3 Keith &lt;NA&gt;    guitar</code></pre>
<p><code>right_join</code> on the other hand joins on the <code>name</code> in the right hand table. In this case, <code>Mick</code> is dropped completely <code>Keith</code> gets <code>NA</code> for band.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb322-1" data-line-number="1">band_members <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">full_join</span>(band_instruments)</a></code></pre></div>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 4 x 3
##   name  band    plays 
##   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
## 1 Mick  Stones  &lt;NA&gt;  
## 2 John  Beatles guitar
## 3 Paul  Beatles bass  
## 4 Keith &lt;NA&gt;    guitar</code></pre>
<p>Finally, a <code>full_join</code> joins on all unique values of <code>name</code> found across the two tables, returning <code>NA</code> where there are no matches between the two tables.</p>
</div>
<div id="joining-our-tables-with-dplyr" class="section level2">
<h2>Joining our tables with <code>dplyr</code></h2>
<div id="join-vst_mappingandtagging.csv-data" class="section level3">
<h3>Join <code>vst_mappingandtagging.csv</code> data</h3>
<p>Letâ€™s start by merging data from <code>vst_mappingandtagging.csv</code>. Letâ€™s read the data in.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb325-1" data-line-number="1">maptag &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(fs<span class="op">::</span><span class="kw">path</span>(raw_data_path, <span class="st">&quot;vst_mappingandtagging.csv&quot;</span>))</a></code></pre></div>
<p>This data set contains taxonomic and within-plot location metadata on individuals collected during mapping and tagging. There is one row per individual in the data set.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb326-1" data-line-number="1"><span class="kw">names</span>(maptag)</a></code></pre></div>
<pre><code>## [1] &quot;uid&quot;            &quot;eventID&quot;        &quot;pointID&quot;        &quot;stemDistance&quot;  
## [5] &quot;stemAzimuth&quot;    &quot;individualID&quot;   &quot;taxonID&quot;        &quot;scientificName&quot;
## [9] &quot;taxonRank&quot;</code></pre>
<p>Letâ€™s see how many matches in column names we have between the two datasets</p>
<div id="challenge-finding-column-name-matches-in-two-tables" class="section level5">
<h5>Challenge: Finding column name matches in two tables</h5>
<p>Given the two tables we are trying to join, can you write some code that checks which column names in <code>individual</code> have matches in <code>maptag</code> column names?</p>
<p><em>Hint: This is the correct answer.</em></p>
<pre><code>## [1] &quot;uid&quot;          &quot;eventID&quot;      &quot;individualID&quot;</code></pre>
<div id="solution" class="section level6">
<h6><a href="solutions.html#csol-col-matches" id="chlg-col-matches">Solution</a></h6>
</div>
</div>
<div id="default-left_join" class="section level4">
<h4>Default <code>left_join</code></h4>
<p>Because we want to match the rest of the tables to our individual data, we use <code>left_join()</code> and supply <code>individual</code> as the first argument and <code>maptag</code> as the second.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" data-line-number="1">individual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb329-2" data-line-number="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag) </a></code></pre></div>
<pre><code>## Joining, by = c(&quot;uid&quot;, &quot;eventID&quot;, &quot;individualID&quot;)</code></pre>
<pre><code>## # A tibble: 14,961 x 18
##    uid   namedLocation date       eventID domainID siteID plotID individualID
##    &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       
##  1 a36aâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  2 68dcâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  3 a895â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  4 eb34â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  5 2a44â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  6 e485â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  7 280câ€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  8 0e50â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  9 4918â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## 10 ef16â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## # â€¦ with 14,951 more rows, and 10 more variables: growthForm &lt;chr&gt;,
## #   stemDiameter &lt;dbl&gt;, measurementHeight &lt;dbl&gt;, height &lt;dbl&gt;, pointID &lt;dbl&gt;,
## #   stemDistance &lt;dbl&gt;, stemAzimuth &lt;dbl&gt;, taxonID &lt;chr&gt;, scientificName &lt;chr&gt;,
## #   taxonRank &lt;chr&gt;</code></pre>
<p>Great we have a merge!</p>
<p>Looks successful right? How do we really know nothing has gone wrong though? Remember, to successfully merge the tables, the data in the columns the tables are being joined on need to have corresponding values across all columns to be linked successfully, otherwise it will return <code>NA</code>s. So, although our code ran successfully, it may well not have found any matching rows in <code>maptag</code> to merge into <code>individual</code>.</p>
<p>To check whether things have worked, we can start with inspecting the output for the columns of interest, in this case the <code>maptag</code> columns we are trying to join into <code>individual</code>.</p>
<p>When working interactively and testing out pipes, you can pipe objects into <code>View()</code> for quick inspection. If you provide a character string as an argument, it is used as a name for the data view tab it launches</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb332-1" data-line-number="1">individual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb332-2" data-line-number="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb332-3" data-line-number="3"><span class="st">  </span><span class="kw">View</span>(<span class="st">&quot;default&quot;</span>)</a></code></pre></div>
<p><img src="assets/view_default_join.png" width="688" /></p>
<p>Clearly this has not worked! We need to start digging into why but we donâ€™t want to have to keep manually checking whether it worked or not. Enter <strong>DEFENSIVE PROGRAMMING</strong>.</p>
</div>
<div id="defensive-programming-with-data" class="section level4">
<h4>Defensive programming with data</h4>
<p>As I mentioned in the Data Management Basics slides, <a href="https://github.com/ropensci/assertr"><code>assertr</code></a> is a useful package for including validation checks in our data pipelines.</p>
<p>In our case, we can use <code>assertr</code> function <code>assert</code> to check that certain columns of interest (<code>stemDistance</code>, <code>stemAzimuth</code>, <code>pointID</code>) are joined successfully (i.e.Â there re no <code>NA</code> values). Note that this only works because I know for a fact that there is data avaliable for all individuals.</p>
<p>There may be situations in which <code>NA</code>s are valid missing data, in which case this would not be an appropriate test.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" data-line-number="1">individual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb333-2" data-line-number="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb333-3" data-line-number="3"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(assertr<span class="op">::</span>not_na,  stemDistance, stemAzimuth, pointID)</a></code></pre></div>
<pre><code>## Joining, by = c(&quot;uid&quot;, &quot;eventID&quot;, &quot;individualID&quot;)</code></pre>
<pre><code>## Column &#39;stemDistance&#39; violates assertion &#39;not_na&#39; 14961 times
##     verb redux_fn predicate       column index value
## 1 assert       NA    not_na stemDistance     1    NA
## 2 assert       NA    not_na stemDistance     2    NA
## 3 assert       NA    not_na stemDistance     3    NA
## 4 assert       NA    not_na stemDistance     4    NA
## 5 assert       NA    not_na stemDistance     5    NA
##   [omitted 14956 rows]
## 
## 
## Column &#39;stemAzimuth&#39; violates assertion &#39;not_na&#39; 14961 times
##     verb redux_fn predicate      column index value
## 1 assert       NA    not_na stemAzimuth     1    NA
## 2 assert       NA    not_na stemAzimuth     2    NA
## 3 assert       NA    not_na stemAzimuth     3    NA
## 4 assert       NA    not_na stemAzimuth     4    NA
## 5 assert       NA    not_na stemAzimuth     5    NA
##   [omitted 14956 rows]
## 
## 
## Column &#39;pointID&#39; violates assertion &#39;not_na&#39; 14961 times
##     verb redux_fn predicate  column index value
## 1 assert       NA    not_na pointID     1    NA
## 2 assert       NA    not_na pointID     2    NA
## 3 assert       NA    not_na pointID     3    NA
## 4 assert       NA    not_na pointID     4    NA
## 5 assert       NA    not_na pointID     5    NA
##   [omitted 14956 rows]</code></pre>
<pre><code>## Error: assertr stopped execution</code></pre>
<p>By including this check, I donâ€™t have to guess or manually check whether the merge has been successful. The code will just error if it hasnâ€™t ðŸ™Œ.</p>
</div>
<div id="debugging-hidden-mismatches" class="section level4">
<h4>Debugging hidden mismatches:</h4>
<p>Iâ€™ve shown the most minimal implementation in which <code>dplyr</code> does a lot of the guessing for us and tries to join on all matched columns. But often, that can generate table mismatches</p>
<p>We know that the only column we are interested in matching on is <code>individualID</code>. We want to get the mapping associated with each individual, regardless of when the mapping was collected. We can be specific about which variables we want to join on through argument <code>by</code>.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1">individual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb337-2" data-line-number="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag, </a>
<a class="sourceLine" id="cb337-3" data-line-number="3">                   <span class="dt">by =</span> <span class="st">&quot;individualID&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb337-4" data-line-number="4"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(assertr<span class="op">::</span>not_na, stemDistance, stemAzimuth, pointID)</a></code></pre></div>
<pre><code>## # A tibble: 14,961 x 20
##    uid.x namedLocation date       eventID.x domainID siteID plotID individualID
##    &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       
##  1 a36aâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  2 68dcâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  3 a895â€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  4 eb34â€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  5 2a44â€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  6 e485â€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  7 280câ€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  8 0e50â€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  9 4918â€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## 10 ef16â€¦ BART_044.basâ€¦ 2015-08-26 vst_BARTâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## # â€¦ with 14,951 more rows, and 12 more variables: growthForm &lt;chr&gt;,
## #   stemDiameter &lt;dbl&gt;, measurementHeight &lt;dbl&gt;, height &lt;dbl&gt;, uid.y &lt;chr&gt;,
## #   eventID.y &lt;chr&gt;, pointID &lt;dbl&gt;, stemDistance &lt;dbl&gt;, stemAzimuth &lt;dbl&gt;,
## #   taxonID &lt;chr&gt;, scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;</code></pre>
<p>Excellent! Our code runs and our resulting merged tibble contains data for all the variables we are interested in!</p>
<p>However, on closer inspection, weâ€™ve ended up with some odd new columns, <code>uid.x</code> and <code>uid.y</code> and <code>eventID.x</code> and <code>eventID.y</code>!</p>
<p>Thatâ€™s because those columns are also present in both our tables but we are not explicitly joining them. They are retained and each suffixed with <code>.x</code> &amp; <code>.y</code> by default, to make them unique.</p>
<p>So, what about these duplicate columns. Do we need them?</p>
<p>With respect to <code>eventID</code>, weâ€™re not really interested in the mapping <code>eventID</code>s so we can just drop that column from <code>maptag</code>.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" data-line-number="1">maptag &lt;-<span class="st"> </span><span class="kw">select</span>(maptag, <span class="op">-</span>eventID)</a>
<a class="sourceLine" id="cb339-2" data-line-number="2"></a>
<a class="sourceLine" id="cb339-3" data-line-number="3">individual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb339-4" data-line-number="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag, </a>
<a class="sourceLine" id="cb339-5" data-line-number="5">                   <span class="dt">by =</span> <span class="st">&quot;individualID&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb339-6" data-line-number="6"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(assertr<span class="op">::</span>not_na, stemDistance, stemAzimuth, pointID)</a></code></pre></div>
<pre><code>## # A tibble: 14,961 x 19
##    uid.x namedLocation date       eventID domainID siteID plotID individualID
##    &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       
##  1 a36aâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  2 68dcâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  3 a895â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  4 eb34â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  5 2a44â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  6 e485â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  7 280câ€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  8 0e50â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  9 4918â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## 10 ef16â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## # â€¦ with 14,951 more rows, and 11 more variables: growthForm &lt;chr&gt;,
## #   stemDiameter &lt;dbl&gt;, measurementHeight &lt;dbl&gt;, height &lt;dbl&gt;, uid.y &lt;chr&gt;,
## #   pointID &lt;dbl&gt;, stemDistance &lt;dbl&gt;, stemAzimuth &lt;dbl&gt;, taxonID &lt;chr&gt;,
## #   scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;</code></pre>
<p>On the other hand, <code>&quot;uid</code> contains unique identifiers for each observation in their respective table and could be useful metadata to store, enabling us to trace the provenance of individual values to the original data. So rather than remove them, letâ€™s retain both <code>uid</code>, one for each table.</p>
<p>We can give more informative suffixes using argument <code>suffix</code>. In our case, I want the <code>individual</code> column to stay as <code>uid</code> and the <code>maptag</code> column to get the suffix <code>_map</code>.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" data-line-number="1">individual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb341-2" data-line-number="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag, </a>
<a class="sourceLine" id="cb341-3" data-line-number="3">                   <span class="dt">by =</span> <span class="st">&quot;individualID&quot;</span>,</a>
<a class="sourceLine" id="cb341-4" data-line-number="4">                   <span class="dt">suffix =</span> <span class="kw">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;_map&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb341-5" data-line-number="5"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(assertr<span class="op">::</span>not_na, stemDistance, stemAzimuth, pointID)</a></code></pre></div>
<pre><code>## # A tibble: 14,961 x 19
##    uid   namedLocation date       eventID domainID siteID plotID individualID
##    &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       
##  1 a36aâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  2 68dcâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  3 a895â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  4 eb34â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  5 2a44â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  6 e485â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  7 280câ€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  8 0e50â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  9 4918â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## 10 ef16â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## # â€¦ with 14,951 more rows, and 11 more variables: growthForm &lt;chr&gt;,
## #   stemDiameter &lt;dbl&gt;, measurementHeight &lt;dbl&gt;, height &lt;dbl&gt;, uid_map &lt;chr&gt;,
## #   pointID &lt;dbl&gt;, stemDistance &lt;dbl&gt;, stemAzimuth &lt;dbl&gt;, taxonID &lt;chr&gt;,
## #   scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;</code></pre>
<p>Nice!</p>
</div>
<div id="join-vst_perplotperyear.csv" class="section level4">
<h4>Join <code>vst_perplotperyear.csv</code></h4>
<p>Now letâ€™s carry on and join the perplot data. First letâ€™s read it in.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb343-1" data-line-number="1">perplot &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(fs<span class="op">::</span><span class="kw">path</span>(raw_data_path, <span class="st">&quot;vst_perplotperyear.csv&quot;</span>))</a>
<a class="sourceLine" id="cb343-2" data-line-number="2"><span class="kw">names</span>(perplot)</a></code></pre></div>
<pre><code>##  [1] &quot;uid&quot;                  &quot;plotID&quot;               &quot;plotType&quot;            
##  [4] &quot;nlcdClass&quot;            &quot;decimalLatitude&quot;      &quot;decimalLongitude&quot;    
##  [7] &quot;geodeticDatum&quot;        &quot;easting&quot;              &quot;northing&quot;            
## [10] &quot;utmZone&quot;              &quot;elevation&quot;            &quot;elevationUncertainty&quot;
## [13] &quot;eventID&quot;</code></pre>
<p>Similarly to <code>maptag</code>, we want to exclude <code>eventID</code> and suffix the <code>uid</code> column. This time, however, we will be joining by <code>plotID</code></p>
<p>Letâ€™s also move our validation test to the end and add the new columns we want to check to it, i.e. <code>stemDistance</code>, <code>stemAzimuth</code>, <code>pointID</code>.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb345-1" data-line-number="1">perplot &lt;-<span class="st"> </span>perplot <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>eventID)</a>
<a class="sourceLine" id="cb345-2" data-line-number="2"></a>
<a class="sourceLine" id="cb345-3" data-line-number="3">individual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb345-4" data-line-number="4"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag, </a>
<a class="sourceLine" id="cb345-5" data-line-number="5">                   <span class="dt">by =</span> <span class="st">&quot;individualID&quot;</span>,</a>
<a class="sourceLine" id="cb345-6" data-line-number="6">                   <span class="dt">suffix =</span> <span class="kw">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;_map&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb345-7" data-line-number="7"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(perplot, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;plotID&quot;</span>), </a>
<a class="sourceLine" id="cb345-8" data-line-number="8">                   <span class="dt">suffix =</span> <span class="kw">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;_ppl&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb345-9" data-line-number="9"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(assertr<span class="op">::</span>not_na,  decimalLatitude,</a>
<a class="sourceLine" id="cb345-10" data-line-number="10">                  decimalLongitude, plotID, stemDistance, stemAzimuth, pointID)</a></code></pre></div>
<pre><code>## # A tibble: 14,961 x 30
##    uid   namedLocation date       eventID domainID siteID plotID individualID
##    &lt;chr&gt; &lt;chr&gt;         &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       
##  1 a36aâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  2 68dcâ€¦ BART_037.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  3 a895â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  4 eb34â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  5 2a44â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  6 e485â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  7 280câ€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  8 0e50â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
##  9 4918â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## 10 ef16â€¦ BART_044.basâ€¦ 2015-08-26 vst_BAâ€¦ D01      BART   BART_â€¦ NEON.PLA.D0â€¦
## # â€¦ with 14,951 more rows, and 22 more variables: growthForm &lt;chr&gt;,
## #   stemDiameter &lt;dbl&gt;, measurementHeight &lt;dbl&gt;, height &lt;dbl&gt;, uid_map &lt;chr&gt;,
## #   pointID &lt;dbl&gt;, stemDistance &lt;dbl&gt;, stemAzimuth &lt;dbl&gt;, taxonID &lt;chr&gt;,
## #   scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;, uid_ppl &lt;chr&gt;, plotType &lt;chr&gt;,
## #   nlcdClass &lt;chr&gt;, decimalLatitude &lt;dbl&gt;, decimalLongitude &lt;dbl&gt;,
## #   geodeticDatum &lt;chr&gt;, easting &lt;dbl&gt;, northing &lt;dbl&gt;, utmZone &lt;chr&gt;,
## #   elevation &lt;dbl&gt;, elevationUncertainty &lt;dbl&gt;</code></pre>
<p>Awesome!! Itâ€™s worked!</p>
<p>Now that we are happy with our data we can use a new operator, the <strong>assignment pipe (<code>%&lt;&gt;%</code>)</strong>.</p>
<p>This allows us to both pipe an object forward into an expression and also update it with the resulting value.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1">individual <span class="op">%&lt;&gt;%</span></a>
<a class="sourceLine" id="cb347-2" data-line-number="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(maptag, </a>
<a class="sourceLine" id="cb347-3" data-line-number="3">                   <span class="dt">by =</span> <span class="st">&quot;individualID&quot;</span>,</a>
<a class="sourceLine" id="cb347-4" data-line-number="4">                   <span class="dt">suffix =</span> <span class="kw">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;_map&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb347-5" data-line-number="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">left_join</span>(perplot, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;plotID&quot;</span>), </a>
<a class="sourceLine" id="cb347-6" data-line-number="6">                   <span class="dt">suffix =</span> <span class="kw">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;_ppl&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb347-7" data-line-number="7"><span class="st">  </span>assertr<span class="op">::</span><span class="kw">assert</span>(assertr<span class="op">::</span>not_na,  decimalLatitude,</a>
<a class="sourceLine" id="cb347-8" data-line-number="8">                  decimalLongitude, plotID, stemDistance, stemAzimuth, pointID)</a></code></pre></div>
<p>We can now move on to geolocate our individuals!</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="iteration.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rrresearchACCE20.pdf", "rrresearchACCE20.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
