<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Creating metadata with dataspice | Reproducible Research Data and Project Management in R</title>
  <meta name="description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Creating metadata with dataspice | Reproducible Research Data and Project Management in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://annakrystalli.me/rrresearchACCE20" />
  
  <meta property="og:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="github-repo" content="https://github.com/annakrystalli/rrresearchACCE20" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Creating metadata with dataspice | Reproducible Research Data and Project Management in R" />
  
  <meta name="twitter:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  

<meta name="author" content="Course Instructor: Dr Anna Krystalli" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="metadata-slides.html"/>
<link rel="next" href="analysing.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding-3.0.0/jsonedit.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Research Data & Project Management in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course description</a></li>
<li class="chapter" data-level="" data-path="welcome-slides.html"><a href="welcome-slides.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html"><i class="fa fa-check"></i>Intro to R &amp; Rstudio</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i>R Basics</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html"><i class="fa fa-check"></i>Data types, structures and classes</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html"><i class="fa fa-check"></i>Indexing and subsetting</a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html"><i class="fa fa-check"></i>The tidyverse way</a></li>
<li class="chapter" data-level="" data-path="rdm-intro-view.html"><a href="rdm-intro-view.html"><i class="fa fa-check"></i>Data management Basics</a></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html"><i class="fa fa-check"></i>Projects in Rstudio</a></li>
<li class="chapter" data-level="" data-path="filenaming-view.html"><a href="filenaming-view.html"><i class="fa fa-check"></i>Good File Naming</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html"><i class="fa fa-check"></i>Paths and Project structure</a></li>
<li class="part"><span><b>III Data Munging</b></span></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i>Iteration</a></li>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html"><i class="fa fa-check"></i>Merging data</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a></li>
<li class="part"><span><b>IV Working with metadata</b></span></li>
<li class="chapter" data-level="" data-path="metadata-slides.html"><a href="metadata-slides.html"><i class="fa fa-check"></i>Metadata</a></li>
<li><a href="dataspice.html#dataspice">Creating metadata with <code>dataspice</code></a></li>
<li class="part"><span><b>V Analysing and presenting analyses</b></span></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html"><i class="fa fa-check"></i>Plotting with ggplot2</a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html"><i class="fa fa-check"></i>Literate Programming in rmarkdown</a></li>
<li class="part"><span><b>VI Version Control</b></span></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html"><i class="fa fa-check"></i>Version Control with Git</a></li>
<li class="chapter" data-level="" data-path="collaborative-github.html"><a href="collaborative-github.html"><i class="fa fa-check"></i>Collaborative GitHub</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#practical-github-rstudio-for-collaborative-coding">Practical: <code>GitHub</code> &amp; <code>Rstudio</code> for collaborative coding</a></li>
<li class="part"><span><b>VII Closing</b></span></li>
<li class="chapter" data-level="" data-path="closing-remarks.html"><a href="closing-remarks.html"><i class="fa fa-check"></i>Closing Remarks</a></li>
<li class="part"><span><b>VIII Additonal materials</b></span></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html"><i class="fa fa-check"></i>Packaging functionality</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html"><i class="fa fa-check"></i>Creating a research compendium with rrtools</a></li>
<li class="part"><span><b>IX APPENDIX</b></span></li>
<li><a href="geolocate-r.html#geolocate.r"><code>geolocate.R</code></a></li>
<li><a href="analysis-r-1.html#analysis.r-1"><code>analysis.R</code></a></li>
<li><a href="index-rmd.html#index.rmd"><code>index.Rmd</code></a></li>
<li><a href="gitignore.html#gitignore"><code>.gitignore</code></a></li>
<li><a href="mypackage-readme-rmd.html#mypackage-readme.rmd"><code>mypackage</code> <code>README.Rmd</code></a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Software Setup</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i>Solutions</a></li>
<li class="divider"></li>
<li><a href="https://annakrystalli.me/rrreasearchACCE2020" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Data and Project Management in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataspice" class="section level1">
<h1>Creating metadata with <code>dataspice</code></h1>
<p>The goal of this section is to provide a <strong>practical exercise in creating metadata</strong> for an <strong>example field collected data product</strong> using package <code>dataspice</code>.</p>
<ul>
<li><p>Understand basic metadata and why it is important.</p></li>
<li><p>Understand where and how to store them.</p></li>
<li><p>Understand how they can feed into more complex metadata objects.</p></li>
</ul>
<div id="dataspice-workflow" class="section level2">
<h2><code>dataspice</code> workflow</h2>
<p><img src="https://raw.githubusercontent.com/ropenscilabs/dataspice/main/man/figures/dataspice_workflow.png" width="100%" /></p>
<p><em>see <a href="metadata.html#metadata">introductory slides</a></em></p>
<p>Let’s load our library and start creating some metadata!</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="dataspice.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dataspice)</span></code></pre></div>
</div>
<div id="create-the-metadata-folder" class="section level2">
<h2>Create the metadata folder</h2>
<p>We’ll <strong>start by creating the basic metadata <code>.csv</code> files</strong> in which to collect metadata related to our example dataset using function <strong><code>dataspice::create_spice()</code></strong>.</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="dataspice.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fu">create_spice</span>()</span></code></pre></div>
<p>This <strong>creates a <code>metadata</code> folder</strong> in your project’s <code>data</code> folder (although you can specify a different directory if required) containing <strong>4 <code>.csv</code> files</strong> in which to record your metadata.</p>
<p><img src="assets/dataspice_files.png" width="100%" /></p>
<ul>
<li><strong>access.csv</strong>: record details about where your data can be accessed.</li>
<li><strong>attributes.csv</strong>: record details about the variables in your data.</li>
<li><strong>biblio.csv</strong>: record dataset level metadata like title, description, licence and spatial and temoral coverage.</li>
<li><strong>creators.csv</strong>: record creator details.</li>
</ul>
</div>
<div id="record-metadata" class="section level2">
<h2>Record metadata</h2>
<div id="creators.csv" class="section level3">
<h3><code>creators.csv</code></h3>
<blockquote>
<p>The <code>creators.csv</code> contains details of the <strong>dataset creators</strong>.</p>
</blockquote>
<p>Let’s start with a quick and easy file to complete, the <strong>creators</strong>. We can <strong>open and edit</strong> the file using in an <strong>interactive shiny app</strong> using <strong><code>dataspice::edit_creators()</code></strong>.</p>
<p><strong><em>Although we did not collect this data, just complete with your own details for the purposes of this tutorial.</em></strong></p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="dataspice.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="fu">edit_creators</span>()</span></code></pre></div>
<p><img src="assets/edit_creators.png" width="100%" /></p>
<p>Remember to click on <strong>Save</strong> when you’re done editing.</p>
<p><br></p>
</div>
<div id="access.csv" class="section level3">
<h3><code>access.csv</code></h3>
<blockquote>
<p>The <code>access.csv</code> contains details about <strong>where the data can be accessed</strong>.</p>
</blockquote>
<p>Before manually completing any details in the <code>access.csv</code>, we can use <code>dataspice</code>’s dedicated function <strong><code>prep_access()</code> to extract relevant information</strong> from the data files themselves.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="dataspice.html#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prep_access</span>()</span></code></pre></div>
<p>Next, we can <strong>use function <code>edit_access()</code></strong> to view <code>access</code>. The final details required, namely <strong>the URL at which each dataset can be downloaded from</strong> cannot be completed now so just leave that blank for now.</p>
<p>Eventually it should link to a permanent identifier from which the published. data set can be downloaded from.</p>
<p>We can also edit details such as the <code>name</code> field to something more informative if required.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="dataspice.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">edit_access</span>()</span></code></pre></div>
<p>Remember to click on <strong>Save</strong> when you’re done editing.</p>
<p><br></p>
</div>
<div id="biblio.csv" class="section level3">
<h3><code>biblio.csv</code></h3>
<blockquote>
<p>The <code>biblio.csv</code> contains dataset level metadata like <strong>title</strong>, <strong>description</strong>, <strong>licence</strong> and <strong>spatial</strong> and <strong>temporal coverage</strong>.</p>
</blockquote>
<p>Before we start filling this table in, we can use some base R functions to extract some of the information we require. In particular we can <strong>use function <code>range()</code> to extract the temporal and spatial extents of our data from the columns containing temporal and spatial data.</strong></p>
<div id="get-temporal-extent" class="section level4">
<h4>get <strong>temporal extent</strong></h4>
<p>Although dates are stored as a text string, <strong>because they are in ISO format (YYYY-MM-DD), sorting them results in correct chronological ordering</strong>. If your temporal data is not in ISO format, consider converting them (see package <code>lubridate</code>)</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="dataspice.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(individual<span class="sc">$</span>date) </span></code></pre></div>
<pre><code>## [1] &quot;2015-05-18&quot; &quot;2018-11-16&quot;</code></pre>
</div>
<div id="get-geographical-extent" class="section level4">
<h4>get <strong>geographical extent</strong></h4>
<p>The lat/lon coordinates are in decimal degrees which again are easy to sort or calculate the range in each dimension.</p>
<div id="southnorth-boundaries" class="section level5">
<h5>South/North boundaries</h5>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="dataspice.html#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(individual<span class="sc">$</span>decimal_latitude)</span></code></pre></div>
<pre><code>## [1] 17.95570 47.16582</code></pre>
</div>
<div id="westeast-boundaries" class="section level5">
<h5>West/East boundaries</h5>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="dataspice.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(individual<span class="sc">$</span>decimal_longitude)</span></code></pre></div>
<pre><code>## [1] -99.11107 -66.82463</code></pre>
<p><em>NB: you can also supply the geographic boundaries of your data as a single <a href="https://en.wikipedia.org/wiki/Well-known_text">well-known text string</a> in field <code>wktString</code> instead of supplying the four boundary coordinates.</em></p>
</div>
<div id="geographic-description" class="section level5">
<h5>Geographic description</h5>
<p>We’ll also need a geographic textual description.</p>
<p>Let’s check the unique values in <code>domain_id</code> and use those to create a geographic description.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="dataspice.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(individual<span class="sc">$</span>domain_id)</span></code></pre></div>
<pre><code>## [1] &quot;D01&quot; &quot;D02&quot; &quot;D03&quot; &quot;D04&quot; &quot;D07&quot; &quot;D08&quot; &quot;D09&quot;</code></pre>
<p>We could use <code>NEON Domain areas D01:D09</code> for our geographic description.</p>
<p>Now that we’ve got the values for our temporal and spatial extents and decided on the geographic description, we can <strong>complete the rest of the fields in the <code>biblio.csv</code> file using function <code>dataspice::edit_biblio()</code></strong>.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="dataspice.html#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="fu">edit_biblio</span>()</span></code></pre></div>
<p><img src="assets/edit_biblio.png" width="100%" /></p>
</div>
</div>
<div id="metadata-hunt" class="section level4 alert alert-success">
<h4>🔍 metadata hunt</h4>
<div id="complete-the-rest-of-the-fields-in-biblio.csv" class="section level5">
<h5>Complete the rest of the fields in <code>biblio.csv</code></h5>
<p>Additional information required to complete these fields can be found on the <a href="http://data.neonscience.org/data-product-view?dpCode=DP1.10098.001"><strong>NEON data portal page for this dataset</strong></a> and the <strong><code>data-raw/wood-survey-data-master</code> <a href="data-raw/wood-survey-data-master/README.md">README.md</a></strong></p>
<p><strong>Citation:</strong>
<em>National Ecological Observatory Network. 2020. Data Products: DP1.10098.001. Provisional data downloaded from <a href="http://data.neonscience.org" class="uri">http://data.neonscience.org</a> on 2020-01-15. Battelle, Boulder, CO, USA</em></p>
<p>Here’s <a href="data/metadata/biblio-half.csv">an example to get you started</a></p>
</div>
</div>
<p>Remember to click on <strong>Save</strong> when you’re done editing.</p>
<p><br></p>
</div>
<div id="attributes.csv" class="section level3">
<h3><code>attributes.csv</code></h3>
<blockquote>
<p>The <code>attributes.csv</code> contains details about the <strong>variables</strong> in your data.</p>
</blockquote>
<p>Again, <code>dataspice</code> provides functionality to <strong>populate the <code>attributes.csv</code> by extracting the variable names from our data file</strong> using function <strong><code>dataspice::prep_attributes()</code></strong>.</p>
<p>The functions is vectorised and maps over each <code>.csv</code> file in our <code>data/</code> folder.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="dataspice.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prep_attributes</span>()</span></code></pre></div>
<p><img src="assets/edit_attributes.png" width="100%" />
All column names in <code>individual.csv</code> have been successfully extracted into the <code>variableName</code> column.</p>
<p>Now, we could manually complete the <code>description</code> and <code>unitText</code> fields,… or we can use a secret weapon,
<code>NEON_vst_variables.csv</code> in our raw data!</p>
<p>Let’s read it in and have a look:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="dataspice.html#cb419-1" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data-raw&quot;</span>, <span class="st">&quot;wood-survey-data-master&quot;</span>, </span>
<span id="cb419-2"><a href="dataspice.html#cb419-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;NEON_vst_variables.csv&quot;</span>))</span></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   table = col_character(),
##   fieldName = col_character(),
##   description = col_character(),
##   dataType = col_character(),
##   units = col_character(),
##   downloadPkg = col_character()
## )</code></pre>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="dataspice.html#cb421-1" aria-hidden="true" tabindex="-1"></a>variables</span></code></pre></div>
<pre><code>## # A tibble: 117 x 6
##    table    fieldName   description                   dataType units downloadPkg
##    &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;                         &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;      
##  1 vst_shr… uid         Unique ID within NEON databa… string   &lt;NA&gt;  basic      
##  2 vst_shr… namedLocat… Name of the measurement loca… string   &lt;NA&gt;  basic      
##  3 vst_shr… date        Date or date and time of mea… dateTime &lt;NA&gt;  basic      
##  4 vst_shr… eventID     An identifier for the set of… string   &lt;NA&gt;  basic      
##  5 vst_shr… domainID    Unique identifier of the NEO… string   &lt;NA&gt;  basic      
##  6 vst_shr… siteID      NEON site code                string   &lt;NA&gt;  basic      
##  7 vst_shr… plotID      Plot identifier (NEON site c… string   &lt;NA&gt;  basic      
##  8 vst_shr… subplotID   Identifier for the NEON subp… string   &lt;NA&gt;  basic      
##  9 vst_shr… nestedSubp… Numeric identifier for neste… string   &lt;NA&gt;  basic      
## 10 vst_shr… groupID     Identifier for a group of in… string   &lt;NA&gt;  basic      
## # … with 107 more rows</code></pre>
<p>All original data variable names are contained in <code>fieldName</code>.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="dataspice.html#cb423-1" aria-hidden="true" tabindex="-1"></a>variables<span class="sc">$</span>fieldName</span></code></pre></div>
<pre><code>##   [1] &quot;uid&quot;                           &quot;namedLocation&quot;                
##   [3] &quot;date&quot;                          &quot;eventID&quot;                      
##   [5] &quot;domainID&quot;                      &quot;siteID&quot;                       
##   [7] &quot;plotID&quot;                        &quot;subplotID&quot;                    
##   [9] &quot;nestedSubplotID&quot;               &quot;groupID&quot;                      
##  [11] &quot;taxonID&quot;                       &quot;scientificName&quot;               
##  [13] &quot;taxonRank&quot;                     &quot;identificationReferences&quot;     
##  [15] &quot;identificationQualifier&quot;       &quot;volumePercent&quot;                
##  [17] &quot;livePercent&quot;                   &quot;deadPercent&quot;                  
##  [19] &quot;canopyArea&quot;                    &quot;meanHeight&quot;                   
##  [21] &quot;remarks&quot;                       &quot;measuredBy&quot;                   
##  [23] &quot;recordedBy&quot;                    &quot;dataQF&quot;                       
##  [25] &quot;uid&quot;                           &quot;namedLocation&quot;                
##  [27] &quot;date&quot;                          &quot;eventID&quot;                      
##  [29] &quot;domainID&quot;                      &quot;siteID&quot;                       
##  [31] &quot;plotID&quot;                        &quot;subplotID&quot;                    
##  [33] &quot;individualID&quot;                  &quot;tempShrubStemID&quot;              
##  [35] &quot;tagStatus&quot;                     &quot;growthForm&quot;                   
##  [37] &quot;plantStatus&quot;                   &quot;stemDiameter&quot;                 
##  [39] &quot;measurementHeight&quot;             &quot;height&quot;                       
##  [41] &quot;baseCrownHeight&quot;               &quot;breakHeight&quot;                  
##  [43] &quot;breakDiameter&quot;                 &quot;maxCrownDiameter&quot;             
##  [45] &quot;ninetyCrownDiameter&quot;           &quot;canopyPosition&quot;               
##  [47] &quot;shape&quot;                         &quot;basalStemDiameter&quot;            
##  [49] &quot;basalStemDiameterMsrmntHeight&quot; &quot;maxBaseCrownDiameter&quot;         
##  [51] &quot;ninetyBaseCrownDiameter&quot;       &quot;remarks&quot;                      
##  [53] &quot;recordedBy&quot;                    &quot;measuredBy&quot;                   
##  [55] &quot;dataQF&quot;                        &quot;uid&quot;                          
##  [57] &quot;namedLocation&quot;                 &quot;date&quot;                         
##  [59] &quot;domainID&quot;                      &quot;siteID&quot;                       
##  [61] &quot;plotID&quot;                        &quot;plotType&quot;                     
##  [63] &quot;nlcdClass&quot;                     &quot;decimalLatitude&quot;              
##  [65] &quot;decimalLongitude&quot;              &quot;geodeticDatum&quot;                
##  [67] &quot;coordinateUncertainty&quot;         &quot;easting&quot;                      
##  [69] &quot;northing&quot;                      &quot;utmZone&quot;                      
##  [71] &quot;elevation&quot;                     &quot;elevationUncertainty&quot;         
##  [73] &quot;eventID&quot;                       &quot;samplingProtocolVersion&quot;      
##  [75] &quot;treesPresent&quot;                  &quot;treesAbsentList&quot;              
##  [77] &quot;shrubsPresent&quot;                 &quot;shrubsAbsentList&quot;             
##  [79] &quot;lianasPresent&quot;                 &quot;lianasAbsentList&quot;             
##  [81] &quot;nestedSubplotAreaShrubSapling&quot; &quot;nestedSubplotAreaLiana&quot;       
##  [83] &quot;totalSampledAreaTrees&quot;         &quot;totalSampledAreaShrubSapling&quot; 
##  [85] &quot;totalSampledAreaLiana&quot;         &quot;remarks&quot;                      
##  [87] &quot;measuredBy&quot;                    &quot;recordedBy&quot;                   
##  [89] &quot;dataQF&quot;                        &quot;uid&quot;                          
##  [91] &quot;namedLocation&quot;                 &quot;date&quot;                         
##  [93] &quot;eventID&quot;                       &quot;domainID&quot;                     
##  [95] &quot;siteID&quot;                        &quot;plotID&quot;                       
##  [97] &quot;subplotID&quot;                     &quot;nestedSubplotID&quot;              
##  [99] &quot;pointID&quot;                       &quot;stemDistance&quot;                 
## [101] &quot;stemAzimuth&quot;                   &quot;recordType&quot;                   
## [103] &quot;individualID&quot;                  &quot;supportingStemIndividualID&quot;   
## [105] &quot;previouslyTaggedAs&quot;            &quot;samplingProtocolVersion&quot;      
## [107] &quot;taxonID&quot;                       &quot;scientificName&quot;               
## [109] &quot;taxonRank&quot;                     &quot;identificationReferences&quot;     
## [111] &quot;morphospeciesID&quot;               &quot;morphospeciesIDRemarks&quot;       
## [113] &quot;identificationQualifier&quot;       &quot;remarks&quot;                      
## [115] &quot;measuredBy&quot;                    &quot;recordedBy&quot;                   
## [117] &quot;dataQF&quot;</code></pre>
<p>Notice anything inconsistent with <code>variableName</code> in attributes? <em>hint: a hump</em></p>
<p>Yes you guessed it, the original <code>fieldName</code>s are still in camelCase.</p>
<p>But! It also contains <code>description</code> and <code>units</code> columns! Just what we need!</p>
<div class="alert alert-success">

</div>
<div id="mega-challenge" class="section level3">
<h3>Mega-Challenge!!</h3>
<div id="your-challenge-is-to-successfully-merge-the-relevant-contents-of-variables-into-our-attributes.csv" class="section level4">
<h4>Your challenge is to successfully merge the relevant contents of <code>variables</code> into our <code>attributes.csv</code></h4>
<p>You will need to save your merged table to <code>data/metadata/attributes.csv</code>.</p>
<p>Have a look at <code>janitor::make_clean_names()</code> and see if you can combine it with any other functions you’ve learned to mutate the values of columns to get round the camelCase names in <code>variables</code>.</p>
<p>Once you’ve completed your merge and saved it, use <code>dataspice::edit_attributes()</code> to fill in the final details for the few variables we created.</p>
<div id="solution-1" class="section level6">
<h6><a href="solutions.html#csol-mega" id="chlg-mega">Solution</a></h6>
</div>
</div>
</div>
</div>
<div id="create-metadata-json-ld-file" class="section level2">
<h2>Create metadata json-ld file</h2>
<p>Now that all our metadata files are complete, we can <strong>compile it all into a structured <code>dataspice.json</code> file</strong> in our <code>data/metadata/</code> folder.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="dataspice.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_spice</span>()</span></code></pre></div>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="dataspice.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;jsonlite&quot;</span>, <span class="st">&quot;listviewer&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="dataspice.html#cb427-1" aria-hidden="true" tabindex="-1"></a>jsonlite<span class="sc">::</span><span class="fu">read_json</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;metadata&quot;</span>, <span class="st">&quot;dataspice.json&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb427-2"><a href="dataspice.html#cb427-2" aria-hidden="true" tabindex="-1"></a>    listviewer<span class="sc">::</span><span class="fu">jsonedit</span>()</span></code></pre></div>
<div id="htmlwidget-2935ecb01355809b664d" style="width:672px;height:480px;" class="jsonedit html-widget"></div>
<script type="application/json" data-for="htmlwidget-2935ecb01355809b664d">{"x":{"data":{"@context":"http://schema.org","type":"Dataset","name":"NEON Woody plant survey data: ACCE DTP analytical subset","creator":[{"type":"Person","id":"0000-0002-2378-4915","givenName":"Anna","familyName":"Krystalli","email":"a.krystalli@sheffield.ac.uk","affiliation":"University of Sheffield"}],"description":"This data product, sourced from the NEON data portal for the purposes of the ACCE DTP tutorial, contains processed individual level data from measurements of woody individuals and shrub groups. ","datePublished":"01/05/2020","keywords":["annual net primary productivity (ANPP)","biomass","carbon cycle","lianas","net primary productivity (NPP)","plant productivity","plants","production","productivity","saplings","shrubs","trees","vegetation","woody plants"],"funder":"National Science Foundation","temporalCoverage":"2015-05-18/2018-11-16","license":"CC-0","spatialCoverage":{"type":"Place","name":"NEON Domain areas D01:D09","geo":{"type":"GeoShape","box":"47.16582 -66.82463 17.9557 -99.11107"}},"variableMeasured":[{"type":"PropertyValue","unitText":[],"name":"uid","description":"Unique ID within NEON database; an identifier for the record"},{"type":"PropertyValue","unitText":[],"name":"named_location","description":"Name of the measurement location in the NEON database"},{"type":"PropertyValue","unitText":[],"name":"date","description":"Date or date and time of measurement, observation, or collection event"},{"type":"PropertyValue","unitText":[],"name":"event_id","description":"An identifier for the set of information associated with the event, which includes information about the place and time of the event"},{"type":"PropertyValue","unitText":[],"name":"domain_id","description":"Unique identifier of the NEON domain"},{"type":"PropertyValue","unitText":[],"name":"site_id","description":"NEON site code"},{"type":"PropertyValue","unitText":[],"name":"plot_id","description":"Plot identifier (NEON site code_XXX)"},{"type":"PropertyValue","unitText":[],"name":"individual_id","description":"Domain-level unique identifier for an individual: NEON.MOD.D##.######"},{"type":"PropertyValue","unitText":[],"name":"growth_form","description":"The growth form classification"},{"type":"PropertyValue","unitText":"centimeter","name":"stem_diameter","description":"Cross-sectional stem diameter"},{"type":"PropertyValue","unitText":"centimeter","name":"measurement_height","description":"Height at which stemDiameter is measured"},{"type":"PropertyValue","unitText":"meter","name":"height","description":"Highest point of an individual or average height of a patch"},{"type":"PropertyValue","unitText":[],"name":"uid_map","description":[]},{"type":"PropertyValue","unitText":[],"name":"point_id","description":"Identifier for a point location"},{"type":"PropertyValue","unitText":"meter","name":"stem_distance","description":"Horizontal distance from stem to pointID location"},{"type":"PropertyValue","unitText":"degree","name":"stem_azimuth","description":"Azimuth relative to True North between stem and pointID location"},{"type":"PropertyValue","unitText":[],"name":"taxon_id","description":"Species code, based on one or more sources"},{"type":"PropertyValue","unitText":[],"name":"scientific_name","description":"Scientific name, associated with the taxonID. This is the name of the lowest level taxonomic rank that can be determined"},{"type":"PropertyValue","unitText":[],"name":"taxon_rank","description":"The lowest level taxonomic rank that can be determined for the individual or specimen"},{"type":"PropertyValue","unitText":[],"name":"uid_ppl","description":[]},{"type":"PropertyValue","unitText":[],"name":"plot_type","description":"NEON plot type in which sampling occurred: tower, distributed or gradient"},{"type":"PropertyValue","unitText":[],"name":"nlcd_class","description":"National Land Cover Database Vegetation Type Name"},{"type":"PropertyValue","unitText":"decimalDegree","name":"decimal_latitude","description":"The geographic latitude (in decimal degrees, WGS84) of the geographic center of the reference area"},{"type":"PropertyValue","unitText":"decimalDegree","name":"decimal_longitude","description":"The geographic longitude (in decimal degrees, WGS84) of the geographic center of the reference area"},{"type":"PropertyValue","unitText":[],"name":"geodetic_datum","description":"Model used to measure horizontal position on the earth"},{"type":"PropertyValue","unitText":"meter","name":"easting","description":"Geographic coordinate specifying the east-west position of a point on the Earth's surface (Universal Transverse Mercator, UTM)"},{"type":"PropertyValue","unitText":"meter","name":"northing","description":"Geographic coordinate specifying the north-south position of a point on the Earth's surface (Universal Transverse Mercator, UTM)"},{"type":"PropertyValue","unitText":[],"name":"utm_zone","description":"UTM zone"},{"type":"PropertyValue","unitText":"meter","name":"elevation","description":"Elevation (in meters) above sea level"},{"type":"PropertyValue","unitText":"meter","name":"elevation_uncertainty","description":"Uncertainty in elevation values (in meters)"},{"type":"PropertyValue","unitText":"decimalDegree","name":"stem_lat","description":"The geographic latitude (in decimal degrees, WGS84) of individual plants"},{"type":"PropertyValue","unitText":"decimalDegree","name":"stem_lon","description":"The geographic latitude (in decimal degrees, WGS84) of individual plants"}],"distribution":[{"type":"DataDownload","name":"individual","contentUrl":[],"fileFormat":"csv"}]},"options":{"mode":"tree","modes":["code","form","text","tree","view"]}},"evals":[],"jsHooks":[]}</script>
<p><strong>Publishing this file on the web means it will be indexed by Google Datasets search!</strong> 😃 👍</p>
<p><br></p>
<hr />
</div>
<div id="build-readme-site" class="section level2">
<h2>Build README site</h2>
<p>Finally, we can <strong>use the <code>dataspice.json</code> file</strong> we just created to <strong>produce an informative README web page</strong> to include with our dataset for humans to enjoy! 🤩</p>
<p>We use function <strong><code>dataspice::build_site()</code></strong> which <strong>creates file <code>index.html</code></strong> in the <code>docs/</code> folder of your project (which it creates if it doesn’t already exist).</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="dataspice.html#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="fu">build_site</span>()</span></code></pre></div>
<p><br></p>
<div id="view-the-resulting-file-here" class="section level3">
<h3>View the resulting file <a href="dataspice/index.html">here</a></h3>
<p><br></p>
<p>Here’s a screen shot!</p>
<p><img src="assets/index_webshot.png" width="100%" /></p>
</div>
<div id="example-completed-metadata-files" class="section level3">
<h3>Example completed metadata files</h3>
<ul>
<li><a href="https://github.com/annakrystalli/rrresearchACCE20/blob/master/data/metadata/access.csv"><code>access.csv</code></a></li>
<li><a href="https://github.com/annakrystalli/rrresearchACCE20/blob/master/data/metadata/attributes.csv"><code>attributes.csv</code></a></li>
<li><a href="https://github.com/annakrystalli/rrresearchACCE20/blob/master/data/metadata/biblio.csv"><code>biblio.csv</code></a></li>
<li><a href="https://github.com/annakrystalli/rrresearchACCE20/blob/master/data/data/metadata/creators.csv"><code>creators.csv</code></a></li>
</ul>
<hr />
<p><em>back to the <a href="slides/04_metadata.html#30">outro slides</a></em></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="metadata-slides.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analysing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rrresearchACCE20.pdf", "rrresearchACCE20.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
