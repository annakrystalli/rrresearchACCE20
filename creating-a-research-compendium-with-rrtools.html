<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Creating a research compendium with rrtools | Reproducible Research Data and Project Management in R</title>
  <meta name="description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Creating a research compendium with rrtools | Reproducible Research Data and Project Management in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://annakrystalli.me/rrresearchACCE20" />
  
  <meta property="og:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="github-repo" content="https://github.com/annakrystalli/rrresearchACCE20" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Creating a research compendium with rrtools | Reproducible Research Data and Project Management in R" />
  
  <meta name="twitter:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  

<meta name="author" content="Course Instructor: Dr Anna Krystalli" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="packaging-functionality.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding-3.0.0/jsonedit.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Research Data & Project Management in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course description</a></li>
<li class="chapter" data-level="" data-path="welcome-slides.html"><a href="welcome-slides.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html"><i class="fa fa-check"></i>Intro to R &amp; Rstudio</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i>R Basics</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html"><i class="fa fa-check"></i>Data types, structures and classes</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html"><i class="fa fa-check"></i>Indexing and subsetting</a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html"><i class="fa fa-check"></i>The tidyverse way</a></li>
<li class="chapter" data-level="" data-path="rdm-intro-view.html"><a href="rdm-intro-view.html"><i class="fa fa-check"></i>Data management Basics</a></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html"><i class="fa fa-check"></i>Projects in Rstudio</a></li>
<li class="chapter" data-level="" data-path="filenaming-view.html"><a href="filenaming-view.html"><i class="fa fa-check"></i>Good File Naming</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html"><i class="fa fa-check"></i>Paths and Project structure</a></li>
<li class="part"><span><b>III Data Munging</b></span></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i>Iteration</a></li>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html"><i class="fa fa-check"></i>Merging data</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a></li>
<li class="part"><span><b>IV Working with metadata</b></span></li>
<li class="chapter" data-level="" data-path="metadata-slides.html"><a href="metadata-slides.html"><i class="fa fa-check"></i>Metadata</a></li>
<li><a href="dataspice.html#dataspice">Creating metadata with <code>dataspice</code></a></li>
<li class="part"><span><b>V Analysing and presenting analyses</b></span></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html"><i class="fa fa-check"></i>Plotting with ggplot2</a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html"><i class="fa fa-check"></i>Literate Programming in rmarkdown</a></li>
<li class="part"><span><b>VI Version Control</b></span></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html"><i class="fa fa-check"></i>Version Control with Git</a></li>
<li class="chapter" data-level="" data-path="collaborative-github.html"><a href="collaborative-github.html"><i class="fa fa-check"></i>Collaborative GitHub</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#practical-github-rstudio-for-collaborative-coding">Practical: <code>GitHub</code> &amp; <code>Rstudio</code> for collaborative coding</a></li>
<li class="part"><span><b>VII Closing</b></span></li>
<li class="chapter" data-level="" data-path="closing-remarks.html"><a href="closing-remarks.html"><i class="fa fa-check"></i>Closing Remarks</a></li>
<li class="part"><span><b>VIII Additonal materials</b></span></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html"><i class="fa fa-check"></i>Packaging functionality</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html"><i class="fa fa-check"></i>Creating a research compendium with rrtools</a></li>
<li class="part"><span><b>IX APPENDIX</b></span></li>
<li><a href="individual-r.html#individual.r"><code>individual.R</code></a></li>
<li><a href="geolocate-r.html#geolocate.r"><code>geolocate.R</code></a></li>
<li><a href="analysis-r-1.html#analysis.r-1"><code>analysis.R</code></a></li>
<li><a href="index-rmd.html#index.rmd"><code>index.Rmd</code></a></li>
<li><a href="gitignore.html#gitignore"><code>.gitignore</code></a></li>
<li><a href="mypackage-hello-r.html#mypackage-hello.r"><code>mypackage</code> <code>hello.R</code></a></li>
<li><a href="mypackage-readme-rmd.html#mypackage-readme.rmd"><code>mypackage</code> <code>README.Rmd</code></a></li>
<li><a href="mypackage-description.html#mypackage-description"><code>mypackage</code> <code>DESCRIPTION</code></a></li>
<li><a href="rrcompendium-description.html#rrcompendium-description"><code>rrcompendium</code> <code>DESCRIPTION</code></a></li>
<li><a href="rrcompendium-readme-rmd.html#rrcompendium-readme.rmd"><code>rrcompendium</code> <code>README.Rmd</code></a></li>
<li><a href="rrcompendium-paper-rmd-yaml-header.html#rrcompendium-paper.rmd-yaml-header"><code>rrcompendium</code> <code>paper.Rmd</code> YAML header</a></li>
<li><a href="rrcompendium-paper-rmd.html#rrcompendium-paper.rmd"><code>rrcompendium</code> <code>paper.Rmd</code></a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Software Setup</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i>Solutions</a></li>
<li class="divider"></li>
<li><a href="https://annakrystalli.me/rrreasearchACCE2020" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Data and Project Management in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="creating-a-research-compendium-with-rrtools" class="section level1">
<h1>Creating a research compendium with rrtools</h1>
<div id="background" class="section level2">
<h2>Background</h2>
<ul>
<li><p><strong>Research is increasingly computational</strong></p></li>
<li><p><strong>Code and data are important research outputs</strong></p>
<ul>
<li>yet, we still focus mainly on curating papers.</li>
</ul></li>
<li><p><strong>Calls for openness</strong></p>
<ul>
<li>stick: reproducibility crisis</li>
<li>carrot: huge rewards from working open</li>
</ul></li>
</ul>
<p>Yet we lag in conventions and technical infrastructure for such openness.</p>
<p><br></p>
</div>
<div id="enter-the-research-compendium" class="section level2">
<h2>Enter the Research Compendium</h2>
<blockquote>
<p>The goal of a research compendium is to provide a <strong>standard</strong> and easily recognizable way for <strong>organizing the digital materials</strong> of a project to enable others to <strong>inspect, reproduce, and extend the research</strong>.</p>
</blockquote>
<div id="three-generic-principles" class="section level3">
<h3>Three Generic Principles</h3>
<ol style="list-style-type: decimal">
<li><p><strong>Organize its files according to prevailing conventions</strong>:</p>
<ul>
<li>help other people recognize the structure of the project,</li>
<li>supports tool building which takes advantage of the shared structure.</li>
</ul></li>
<li><p><strong>Separate of data, method, and output</strong>, while making the relationship between them clear.</p></li>
<li><p><strong>Specify the computational environment</strong> that was used for the original analysis.</p></li>
</ol>
<p><br></p>
</div>
</div>
<div id="r-community-response" class="section level2">
<h2>R community response</h2>
<blockquote>
<p>R packages can be used as a research compendium for organising and sharing files!</p>
</blockquote>
<div id="r-package-file-system-structure-for-reproducible-research" class="section level3">
<h3>R package file system structure for reproducible research</h3>
<ul>
<li><p>Take advantage of the power of convention.</p></li>
<li><p>Make use of great package development tools.</p></li>
</ul>
<p>See Ben Marwick, Carl Boettiger &amp; Lincoln Mullen (2018) <a href="https://www.tandfonline.com/doi/abs/10.1080/00031305.2017.1375986?journalCode=utas20"><em>Packaging Data Analytical Work Reproducibly Using R (and Friends)</em></a>, The American Statistician, 72:1, 80-88, DOI: &lt;10.1080/00031305.2017.1375986&gt;</p>
<p><img src="assets/reproducible-data-analysis-10.png" width="400px"></p>
<p>images: <a href="https://github.com/karthik/rstudio2019"><em>Kartik Ram: rstudio::conf 2019 talk</em></a></p>
<p><em>Example use of the R package structure for a research compendium</em> (source Marwick <em>et al</em>, 2018)</p>
<hr />
</div>
</div>
<div id="general-project-organisation-1" class="section level2">
<h2>General Project Organisation</h2>
<p>Good project layout helps ensure the</p>
<ul>
<li>Integrity of data</li>
<li>Portability of the project</li>
<li>Easier to pick the project back up after a break</li>
</ul>
<hr />
</div>
<div id="from-raw-to-analytical-data" class="section level2">
<h2>From raw to analytical data</h2>
<div id="the-reproducible-pipeline" class="section level3">
<h3><a href="https://dynamicecology.wordpress.com/2016/08/22/ten-commandments-for-good-data-management/">the reproducible pipeline</a></h3>
<ul>
<li><p>Do not manually edit raw data</p></li>
<li><p>Keep a clean pipeline of data processing from raw to analytical.</p></li>
<li><p>Ideally, incorporate checks to ensure correct processing of data through to analytical.</p></li>
<li><p>Check out rOpenSci package <a href="https://github.com/ropensci/drake">drake</a>, an R-focused pipeline toolkit for reproducibility</p></li>
</ul>
<hr />
</div>
</div>
<div id="separate-function-definition-and-application" class="section level2">
<h2>Separate function definition and application</h2>
<ul>
<li><p>When your project is new and shiny, the script file usually contains many lines of directly executated code.</p></li>
<li><p>As it matures, <strong>reusable chunks get pulled into their own functions</strong>.</p></li>
<li><p>The actual analysis scripts then become relatively short, and use the functions defined in separate R scripts.</p></li>
</ul>
<hr />
</div>
<div id="use-rstudio-projects" class="section level2">
<h2>Use Rstudio projects</h2>
<div id="keep-your-work-tidy-portable-and-self-contained" class="section level3">
<h3>Keep your work <a href="https://nicercode.github.io/blog/2013-04-05-projects/">tidy, portable and self-contained</a></h3>
</div>
<div id="pkg-here" class="section level3">
<h3>pkg <code>here</code></h3>
<p>Use function <code>here::here("path", "to", "file")</code> to create robust paths <strong>relative to the project root</strong>.</p>
<p>eg</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="creating-a-research-compendium-with-rrtools.html#cb643-1" aria-hidden="true" tabindex="-1"></a>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;path&quot;</span>, <span class="st">&quot;to&quot;</span>, <span class="st">&quot;file&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;/Users/runner/work/rrresearchACCE20/rrresearchACCE20/path/to/file&quot;</code></pre>
<hr />
</div>
</div>
<div id="follow-convention" class="section level2">
<h2>Follow convention</h2>
<blockquote>
<p>It’s like agreeing that we will all drive on the left or the right. A hallmark of civilization is following conventions that constrain your behavior a little, in the name of public safety.</p>
</blockquote>
<p><strong>Jenny Bryan</strong> on <a href="https://www.tidyverse.org/articles/2017/12/workflow-vs-script/">Project-oriented workflows</a></p>
<blockquote>
<h3 id="a-place-for-everything-everything-in-its-place.">A place for everything, everything in its place.</h3>
</blockquote>
<p>Benjamin Franklin</p>
<div id="the-benefits-of-following-convention" class="section level3">
<h3>The benefits of following convention:</h3>
<ul>
<li><p>You will be able to find your way around any of your projects</p></li>
<li><p>You will be able to find your way around any project by others following same convention</p></li>
<li><p>You will be able to find your way around any r package on GitHub!</p></li>
</ul>
<hr />
</div>
</div>
<div id="r-developer-tools" class="section level2">
<h2>R Developer Tools</h2>
<div id="leverage-tools-and-functionality-for-r-package-development" class="section level3">
<h3>Leverage tools and functionality for <strong>R package development</strong></h3>
<ul>
<li>manage dependencies</li>
<li>make functionality available</li>
<li>document functionality</li>
<li>validate functionality</li>
<li>version contol your project</li>
</ul>
<p><a href="https://www.tidyverse.org/articles/2017/11/usethis-1.0.0/"><code>devtools</code></a>, <a href="https://www.tidyverse.org/articles/2017/11/usethis-1.0.0/"><code>usethis</code></a>,
<a href="https://github.com/benmarwick/rrtools"><code>rrtools</code></a>,
<a href="https://support.rstudio.com/hc/en-us/articles/200486488-Developing-Packages-with-RStudio">Rstudio</a></p>
<div id="minimal-analysis-project" class="section level4">
<h4><strong><em>minimal analysis project</em></strong></h4>
<ol style="list-style-type: decimal">
<li><p>An <strong><code>scripts/</code></strong> directory that contains R scripts (<code>.R</code>), notebooks (<code>.Rmd</code>), and intermediate data.</p></li>
<li><p>A <strong><code>DESCRIPTION</code></strong> file that provides metadata about the compendium. Most importantly, it would list the packages needed to run the analysis. Would contain field to indicate that this is an analysis, not a package.</p></li>
</ol>
</div>
<div id="a-reproducible-analysis-project-would-also-contain" class="section level4">
<h4>A <strong><em>reproducible</em></strong> analysis project would also contain:</h4>
<ol style="list-style-type: decimal">
<li><p>An <strong><code>R/</code></strong> directory which contains R files that provide high-stakes functions.</p></li>
<li><p>A <strong><code>data/</code></strong> directory which contains high-stakes data.</p></li>
<li><p>A <strong><code>tests/</code></strong> directory that contains unit tests for the code and data.</p></li>
<li><p>A <strong><code>vignettes/</code></strong> directory that contains high-stakes reports.</p></li>
</ol>
</div>
<div id="autogenerated-components" class="section level4">
<h4>Autogenerated components:</h4>
<ol style="list-style-type: decimal">
<li><p>A <strong><code>man/</code></strong> directory which contains <strong>roxygen2-generated documentation</strong> for the reusable functions and data.</p></li>
<li><p>Online documentation in a <strong><code>docs/</code></strong> folder.</p></li>
</ol>
</div>
<div id="a-shareable-reproducible-analysis-project-would-also" class="section level4">
<h4>A <strong><em>shareable</em></strong> reproducible analysis project would also:</h4>
<ul>
<li><p>Use Git + GitHub (or other public Git host)</p></li>
<li><p>Use Travis or other continuous integration service</p></li>
<li><p>Capture the computational environment so it can easily be recreated on a different computer. This involves at a minimum capturing package versions, but might also include capturing R version, and other external dependencies.</p></li>
</ul>
</div>
</div>
<div id="start-small-and-build-as-necessary" class="section level3">
<h3>Start small and build as necessary</h3>
<p><img src="assets/reproducible-data-analysis-11.png" width="400px"></p>
<p><img src="assets/reproducible-data-analysis-12.png" width="400px"></p>
<p><img src="assets/reproducible-data-analysis-13.png" width="400px"></p>
<p>images: <a href="https://github.com/karthik/rstudio2019"><em>Kartik Ram: rstudio::conf 2019 talk</em></a></p>
<hr />
</div>
</div>
<div id="rrtools-research-compendia-in-r" class="section level2">
<h2><code>rrtools</code>: Research Compendia in R</h2>
<blockquote>
<p>The goal of rrtools is to provide <strong>instructions, templates, and functions</strong> for making a <strong>basic compendium</strong> suitable for writing <strong>reproducible research with R</strong>.</p>
</blockquote>
<p><strong><code>rrtools</code> build on tools &amp; conventions for R package development to</strong></p>
<ul>
<li>organise files</li>
<li>manage dependencies</li>
<li>share code</li>
<li>document code</li>
<li>check and test code</li>
</ul>
<p><strong><code>rrtools</code> extends and works with a number of R packages:</strong></p>
<ul>
<li><p><a href="https://cran.r-project.org/package=devtools"><code>devtools</code></a>: functions for package development</p></li>
<li><p><a href="https://www.tidyverse.org/articles/2017/11/usethis-1.0.0/"><code>usethis</code></a>: automates repetitive tasks that arise during project setup and development</p></li>
<li><p><a href="https://bookdown.org/"><code>bookdown</code></a>: facilitates writing books and long-form articles/reports with R Markdown</p></li>
</ul>
<p><br></p>
<hr />
</div>
<div id="workshop-materials" class="section level2">
<h2>💻 Workshop materials</h2>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<div id="on-github-httpsgithub.comannakrystallirrtools-wkshp-materials" class="section level4">
<h4>On github: <a href="https://github.com/annakrystalli/rrtools-wkshp-materials/" class="uri">https://github.com/annakrystalli/rrtools-wkshp-materials/</a></h4>
<ul>
<li><p>click on <strong>Clone or download</strong></p></li>
<li><p>click on <strong>Download ZIP</strong></p></li>
<li><p>Unzip the file</p></li>
</ul>
<hr />
</div>
</div>
<div id="workshop-aims-and-objectives" class="section level2">
<h2>Workshop aims and objectives</h2>
<p>In this workshop we’ll <strong>use materials associated with a published paper</strong> (text, data and code) to <strong>create a research compendium</strong> around it.</p>
<p><br></p>
<p>By the end of the workshop, you should be able to:</p>
<ul>
<li><p>Be able to <strong>Create a Research Compendium</strong> to manage and share resources associated with an academic publication.</p></li>
<li><p>Be able to <strong>produce a reproducible manuscript from a single rmarkdown document</strong>.</p></li>
<li><p>Appreciate the power of convention!</p></li>
</ul>
<p>Let’s dive in!</p>
</div>
<div id="create-your-first-reproducible-research-compendium" class="section level2">
<h2>💻Create your first reproducible research compendium</h2>
<p>Let’s go ahead and create our first reproducible research compendium!</p>
<p>To do this in Rstudio Cloud (which is a bit fiddlier) we will create a general project in which we will create our reproducible research compendium project. In general, creating a project within a project is bad practice and you should avoid this when working locally, but given the more restrictive nature of working in Rstudio Cloud, we will break this general best practice rule.</p>
<div id="copy-rrtools-project" class="section level3">
<h3>Copy <strong>rrtools</strong> Project</h3>
<p>In our shared space click on the <svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M352 240v32c0 6.6-5.4 12-12 12h-88v88c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-88h-88c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h88v-88c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v88h88c6.6 0 12 5.4 12 12zm96-160v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"></path></svg> copy button next to the <strong>rrtools</strong> Project.</p>
<p><img src="assets/copy-rrtools-proj.png" /><!-- --></p>
<p>Click on <svg viewBox="0 0 448 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M352 240v32c0 6.6-5.4 12-12 12h-88v88c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-88h-88c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h88v-88c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v88h88c6.6 0 12 5.4 12 12zm96-160v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"></path></svg> <strong>Save a permanent copy</strong>. You now have a personal copy of the project.</p>
</div>
<div id="install-packages" class="section level3">
<h3>Install packages</h3>
<p>In our <code>rrtools</code> project, these packages should be pre-installed and be available to the research compendium we’ll create inside.</p>
<p>However, if you are working locally, you would need to <strong>install the following packages starting with <code>rrtools</code></strong> (if you haven’t got devtools installed, you’ll need to before you can install <code>rrtools</code> from GitHub).</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="creating-a-research-compendium-with-rrtools.html#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install rrtools</span></span>
<span id="cb645-2"><a href="creating-a-research-compendium-with-rrtools.html#cb645-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb645-3"><a href="creating-a-research-compendium-with-rrtools.html#cb645-3" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;benmarwick/rrtools&quot;</span>)</span>
<span id="cb645-4"><a href="creating-a-research-compendium-with-rrtools.html#cb645-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-5"><a href="creating-a-research-compendium-with-rrtools.html#cb645-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install github dependencies</span></span>
<span id="cb645-6"><a href="creating-a-research-compendium-with-rrtools.html#cb645-6" aria-hidden="true" tabindex="-1"></a>dependencies <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;ggthemes&quot;</span>, <span class="st">&quot;gitcreds&quot;</span>, <span class="st">&quot;rticles&quot;</span>, <span class="st">&quot;Cairo&quot;</span>)</span>
<span id="cb645-7"><a href="creating-a-research-compendium-with-rrtools.html#cb645-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-8"><a href="creating-a-research-compendium-with-rrtools.html#cb645-8" aria-hidden="true" tabindex="-1"></a><span class="co"># install CRAN dependencies</span></span>
<span id="cb645-9"><a href="creating-a-research-compendium-with-rrtools.html#cb645-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(dependencies)</span>
<span id="cb645-10"><a href="creating-a-research-compendium-with-rrtools.html#cb645-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-11"><a href="creating-a-research-compendium-with-rrtools.html#cb645-11" aria-hidden="true" tabindex="-1"></a><span class="co">#install github dependencies</span></span>
<span id="cb645-12"><a href="creating-a-research-compendium-with-rrtools.html#cb645-12" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;crsh/citr&quot;</span>)</span>
<span id="cb645-13"><a href="creating-a-research-compendium-with-rrtools.html#cb645-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-14"><a href="creating-a-research-compendium-with-rrtools.html#cb645-14" aria-hidden="true" tabindex="-1"></a><span class="co"># install tinytex</span></span>
<span id="cb645-15"><a href="creating-a-research-compendium-with-rrtools.html#cb645-15" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">install_tinytex</span>()</span></code></pre></div>
<p>Installing <code>rrtools</code> <strong>imports many of the packages we’ll need today</strong> (eg, have a look at the imports section of the <a href="https://github.com/benmarwick/rrtools/blob/master/DESCRIPTION"><code>DESCRIPTION</code></a> file).</p>
<pre><code>Imports: devtools, git2r, whisker, rstudioapi, rmarkdown, curl, RCurl, jsonlite, methods, httr,          usethis, clisymbols, crayon, glue, bookdown, here</code></pre>
<p>We also <strong>install some additional packages</strong> we’ll need for the workshop.</p>
<p>You might also need to install <code>tinytex</code> (if you get errors when rendering your Rmd paper).</p>
<p><br></p>
</div>
</div>
<div id="create-compendium" class="section level2">
<h2>🚦 Create compendium</h2>
<p>Now that we’ve got all the materials we need, let’s start by *<strong>creating a blank research compendium</strong> for us to work in.</p>
<p><br></p>
<div id="load-library" class="section level3">
<h3>load library</h3>
<p>First we need to load <code>rrtools</code></p>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="creating-a-research-compendium-with-rrtools.html#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rrtools) </span></code></pre></div>
<pre><code>## ✖ Git is installed on this computer, but not configured for use. For more information on configuring and using Git, see http://happygitwithr.com/</code></pre>
<p>This performs a quick check to <strong>confirm you have Git installed and configured</strong></p>
<p>If you do, you should see the following output in the console.</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="creating-a-research-compendium-with-rrtools.html#cb649-1" aria-hidden="true" tabindex="-1"></a>✔ Git is installed on this computer, your username is annakrystalli</span></code></pre></div>
</div>
<div id="create-compendium-1" class="section level3">
<h3>create compendium</h3>
<p>Now we’re ready to <strong>create our compendium</strong>. We use function <strong><code>rrtools::create_compendium</code></strong> and supply it with a path at which our compendium will be created. The final part of our path becomes the compendium name. Because the function effectively creates a package, only a <strong>single string of lowercase alpha characters is accepted as a name</strong>. so let’s go for <code>rrcompendium</code> as the final part of our path.</p>
<p>To <strong>create <code>rrcompendium</code> in our project, I use:</strong></p>
<div class="sourceCode" id="cb650"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb650-1"><a href="creating-a-research-compendium-with-rrtools.html#cb650-1" aria-hidden="true" tabindex="-1"></a>rrtools<span class="sc">::</span><span class="fu">create_compendium</span>(<span class="st">&quot;rrcompendium&quot;</span>)</span></code></pre></div>
<p>If the call was successfull you should see the following console output:</p>
<pre><code>✓ Setting active project to &#39;/cloud/project/rrcompendium&#39;
✓ Writing &#39;LICENSE&#39;
✓ Writing &#39;LICENSE.md&#39;
✓ Adding &#39;^LICENSE\\.md$&#39; to &#39;.Rbuildignore&#39;

✓ Creating &#39;README.Rmd&#39; from template.
✓ Adding &#39;README.Rmd&#39; to `.Rbuildignore`.
• Modify 
✓ Adding code of conduct.
✓ Creating &#39;CONDUCT.md&#39; from template.
✓ Adding &#39;CONDUCT.md&#39; to `.Rbuildignore`.
✓ Adding instructions to contributors.
✓ Creating &#39;CONTRIBUTING.md&#39; from template.
✓ Adding &#39;CONTRIBUTING.md&#39; to `.Rbuildignore`.
✓ Adding runtime.txt for Binder

✓ Adding &#39;bookdown&#39; to Imports
✓ Adding &#39;here&#39; pkg to Imports
✓ Creating &#39;analysis&#39; directory and contents
✓ Creating &#39;analysis&#39;
✓ Creating &#39;analysis/paper&#39;
✓ Creating &#39;analysis/figures&#39;
✓ Creating &#39;analysis/templates&#39;
✓ Creating &#39;analysis/data&#39;
✓ Creating &#39;analysis/data/raw_data&#39;
✓ Creating &#39;analysis/data/derived_data&#39;
✓ Creating &#39;analysis/supplementary-materials&#39;
✓ Creating &#39;references.bib&#39; from template.
✓ Creating &#39;paper.Rmd&#39; from template.

Next, you need to:  ↓ ↓ ↓ ↓ 
• Write your article/report/thesis, start at the paper.Rmd file
• Add the citation style library file (csl) to replace the default provided here, see https://github.com/citation-style-language/
• Add bibliographic details of cited items to the &#39;references.bib&#39; file
• For adding captions &amp; cross-referencing in an Rmd, see https://bookdown.org/yihui/bookdown/
• For adding citations &amp; reference lists in an Rmd, see http://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html

Note that:
⚠ Your data files are tracked by Git and will be pushed to GitHub 


This project was set up by rrtools.

You can start working now or apply some more basic configuration.
Check out https://github.com/benmarwick/rrtools for an explanation of all the project configuration functions of rrtools.
Or run the rrtools configuration addin: rrtools.addin::rrtools_assistant() https://github.com/nevrome/rrtools.addin
</code></pre>
<p>and a new Rstudio session launched for the compendium:</p>
<p><img src="assets/create-compendium.png" /><!-- --></p>
<p><br></p>
</div>
<div id="initiate-git" class="section level3">
<h3>Initiate <code>git</code></h3>
<p>Let’s initialise our compendium with <code>.git</code>. We’ll need to configure git again as this is a new Rstudio cloud project.</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="creating-a-research-compendium-with-rrtools.html#cb652-1" aria-hidden="true" tabindex="-1"></a><span class="co"># configure git</span></span>
<span id="cb652-2"><a href="creating-a-research-compendium-with-rrtools.html#cb652-2" aria-hidden="true" tabindex="-1"></a><span class="fu">use_git_config</span>(<span class="at">user.name =</span> <span class="st">&quot;Jane&quot;</span>,</span>
<span id="cb652-3"><a href="creating-a-research-compendium-with-rrtools.html#cb652-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">user.email =</span> <span class="st">&quot;jane@example.org&quot;</span>)</span>
<span id="cb652-4"><a href="creating-a-research-compendium-with-rrtools.html#cb652-4" aria-hidden="true" tabindex="-1"></a><span class="co"># intialise git and commit</span></span>
<span id="cb652-5"><a href="creating-a-research-compendium-with-rrtools.html#cb652-5" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git</span>()</span></code></pre></div>
<p><strong>N.B. Beware, if you are working locally, you may have ended up with two Rstudio sessions of <code>rrcompendium</code>.</strong> Make sure to only have one session of a single project at one time to avoid problems.</p>
<p><br></p>
</div>
<div id="inspect-templates" class="section level3">
<h3>Inspect templates</h3>
<pre><code>.
├── DESCRIPTION &lt;- .............................package metadata
|                                               dependency management
├── NAMESPACE &lt;- ...............................AUTO-GENERATED on build
├── R &lt;- .......................................folder for functions
├── man &lt;- .....................................AUTO-GENERATED on build
└── rrcompendium.Rproj &lt;- ......................rstudio project file</code></pre>
<p><code>rrtools::create_compendium()</code> creates the <strong>bare backbone of infrastructure required for a research compendium</strong>. At this point it provides facilities to store general metadata about our compendium (eg bibliographic details to create a citation) and manage dependencies in the <code>DESCRIPTION</code> file and store and document functions in the <code>R/</code> folder. Together these allow us to <strong>manage, install and share functionality associated with our project</strong>.</p>
<p><br></p>
</div>
<div id="get-workshop-materials" class="section level3">
<h3>Get workshop materials</h3>
<p>Today we’ll be working with <strong>a subset of materials from the published compendium</strong> of code, data, and author’s manuscript:</p>
<div id="carl-boettiger.-2018-april-17.-cboettignoise-phenomena-supplement-to-from-noise-to-knowledge-how-randomness-generates-novel-phenomena-and-reveals-information-version-revision-2.-zenodo.-httpdoi.org10.5281zenodo.1219780" class="section level5">
<h5>Carl Boettiger. (2018, April 17). <em>cboettig/noise-phenomena: Supplement to: “From noise to knowledge: how randomness generates novel phenomena and reveals information”</em> (Version revision-2). <em>Zenodo</em>. <a href="http://doi.org/10.5281/zenodo.1219780" class="uri">http://doi.org/10.5281/zenodo.1219780</a></h5>
<p>accompanying the publication:</p>
</div>
<div id="carl-boettiger-.-from-noise-to-knowledge-how-randomness-generates-novel-phenomena-and-reveals-information.-published-in-ecology-letters-22-may-2018-httpsdoi.org10.1111ele.13085" class="section level5">
<h5>Carl Boettiger <a href="https://orcid.org/0000-0002-1642-628X"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" /></a>. <em>From noise to knowledge: how randomness generates novel phenomena and reveals information</em>. Published in <em>Ecology Letters</em>, 22 May 2018 <a href="https://doi.org/10.1111/ele.13085" class="uri">https://doi.org/10.1111/ele.13085</a></h5>
<p><img src="assets/Boettiger-2018.png" heigth="250px" width="400px"></p>
<p>Let’s first create a folder to dowload the materials into. It’s sometimes useful to have a folder to hold materials that are not formally part of the project (i.e. we will not commit these files to git). I like to call such folders <code>attic</code>, so let’s create such a folder</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb654-1"><a href="creating-a-research-compendium-with-rrtools.html#cb654-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;attic&quot;</span>)</span></code></pre></div>
<p>Let’s also add the <code>attic/</code> dir to <code>.gitignore</code> by adding the following text to it (remember to include a new line at the end of the file)</p>
<pre><code>attic/*</code></pre>
<p>You can <strong>download the materials using <code>usethis::use_course()</code></strong> and supplying a path to a destination folder to argument <code>destdir</code>. Let’s download everything into the <code>attic/</code> folder.</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb656-1"><a href="creating-a-research-compendium-with-rrtools.html#cb656-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_course</span>(<span class="at">url =</span> <span class="st">&quot;bit.ly/rrtools_wks&quot;</span>, <span class="at">destdir =</span> <span class="st">&quot;attic&quot;</span>)</span></code></pre></div>
<p>This will <strong>download</strong> everything we need from a GitHub repository as a <code>.zip</code> file, <strong>unzip</strong> it and launch it in a <strong>new Rstudio session</strong> for us to explore.</p>
<p><br></p>
</div>
<div id="inspect-materials" class="section level4">
<h4>Inspect materials</h4>
<p>The follwing files should now be contained in your <code>attic/rrtools-wkshp-materials-master</code> folder</p>
<pre><code>├── README.md &lt;- .......................repo README
├── analysis.R &lt;- ......................analysis underlying paper
├── gillespie.csv &lt;- ...................data
├── paper.pdf &lt;- .......................LaTex pdf of the paper
├── paper.txt &lt;- .......................text body of the paper
└── refs.bib &lt;- ........................bibtex bibliographic file</code></pre>
<p><br></p>
<p>In this workshop we’ll attempt <strong>a partial reproduction of the original paper</strong> using the materials we’ve just downloaded.</p>
<p>We’ll <strong>use this as an opportunity to create a new research compendium using <code>rrtools</code> and friends!</strong> 🎊</p>
<p><br></p>
<hr />
</div>
</div>
</div>
<div id="update-description-file" class="section level2">
<h2>🚦 Update <code>DESCRIPTION</code> file</h2>
<p>Let’s <strong>update some basic details in the <code>DESCRIPTION</code> file</strong>:</p>
<pre><code>Package: rrcompendium
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R:
    person(given = &quot;First&quot;,
           family = &quot;Last&quot;,
           role = c(&quot;aut&quot;, &quot;cre&quot;),
           email = &quot;first.last@example.com&quot;)
Description: What the package does (one paragraph).
License: MIT + file LICENSE
ByteCompile: true
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1
Imports: bookdown,
    here
Suggests: devtools,
    git2r
</code></pre>
<p><br></p>
<div id="title" class="section level3">
<h3>Title</h3>
<p>Let’s start with <strong>giving our compendium a descriptive title</strong>:</p>
<pre><code>Title: Partial Reproduction of Boettiger Ecology Letters 2018;21:1255–1267 
    with rrtools</code></pre>
<p><br></p>
</div>
<div id="version" class="section level3">
<h3>Version</h3>
<p>We don’t need to change the version now but using <a href="https://semver.org/">semantic versioning</a> for our compendium can be a really useful way to track versions. In general, <strong>versions below <code>0.0.1</code> are in development</strong>, hence the <code>DESCRIPTION</code> file defaults to <code>0.0.0.9000</code>.</p>
<p><br></p>
</div>
<div id="authors-1" class="section level3">
<h3>Authors</h3>
<p>Next let’s <strong>specify the author of the compendium</strong>. Edit with <strong>your own details</strong>.</p>
<pre><code>Authors@R: 
    person(given = &quot;Anna&quot;,
           family = &quot;Krystalli&quot;,
           role = c(&quot;aut&quot;, &quot;cre&quot;),
           email = &quot;annakrystalli@googlemail.com&quot;)</code></pre>
<p>For more details on specifying authors, check documentation for <code>?person</code></p>
<p><br></p>
</div>
<div id="description" class="section level3">
<h3>Description</h3>
<p>Let’s <strong>add a bit more detail about the contents of the compendium</strong> in the Description.</p>
<pre><code>Description: This repository contains the research compendium of the 
    partial reproduction of Boettiger Ecology Letters 2018;21:1255–1267. 
    The compendium contains all data, code, and text associated with this       sub-section of the analysis</code></pre>
<p><br></p>
</div>
<div id="license" class="section level3">
<h3>License</h3>
<p>Finally, let’s <strong>create a new license for the material we create</strong>. We’ll use an <a href="https://opensource.org/licenses/MIT"><strong>MIT license</strong></a>. Note however that <strong>his only covers the code</strong>. We can do this with:</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb662-1"><a href="creating-a-research-compendium-with-rrtools.html#cb662-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_mit_license</span>(<span class="st">&quot;Anna Krystalli&quot;</span>)</span></code></pre></div>
<pre><code>✔ Setting License field in DESCRIPTION to &#39;MIT + file LICENSE&#39;
✔ Writing &#39;LICENSE.md&#39;
✔ Adding &#39;^LICENSE\\.md$&#39; to &#39;.Rbuildignore&#39;</code></pre>
<p>This overwrites the current files <code>LICENSE</code> and <code>LICENSE.md</code> and updates the <code>DESCRIPTION</code> file, embedding our name in the details of the license.</p>
<pre><code>License: MIT + file LICENSE</code></pre>
<p><br></p>
</div>
<div id="recap" class="section level3">
<h3>Recap</h3>
<p>We’ve finished updating our <code>DESCRIPTION</code> file! 🎉</p>
<p>It should look a bit like this:</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb665-1"><a href="creating-a-research-compendium-with-rrtools.html#cb665-1" aria-hidden="true" tabindex="-1"></a>Package<span class="sc">:</span> rrcompendium</span>
<span id="cb665-2"><a href="creating-a-research-compendium-with-rrtools.html#cb665-2" aria-hidden="true" tabindex="-1"></a>Title<span class="sc">:</span> Partial Reproduction of Boettiger Ecology Letters <span class="dv">2018</span>;<span class="dv">21</span><span class="sc">:</span>1255–<span class="dv">1267</span> </span>
<span id="cb665-3"><a href="creating-a-research-compendium-with-rrtools.html#cb665-3" aria-hidden="true" tabindex="-1"></a>    with rrtools</span>
<span id="cb665-4"><a href="creating-a-research-compendium-with-rrtools.html#cb665-4" aria-hidden="true" tabindex="-1"></a>Version<span class="sc">:</span> <span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">0.9000</span></span>
<span id="cb665-5"><a href="creating-a-research-compendium-with-rrtools.html#cb665-5" aria-hidden="true" tabindex="-1"></a>Authors<span class="sc">@</span>R<span class="sc">:</span> </span>
<span id="cb665-6"><a href="creating-a-research-compendium-with-rrtools.html#cb665-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">person</span>(<span class="at">given =</span> <span class="st">&quot;Anna&quot;</span>,</span>
<span id="cb665-7"><a href="creating-a-research-compendium-with-rrtools.html#cb665-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">&quot;Krystalli&quot;</span>,</span>
<span id="cb665-8"><a href="creating-a-research-compendium-with-rrtools.html#cb665-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">role =</span> <span class="fu">c</span>(<span class="st">&quot;aut&quot;</span>, <span class="st">&quot;cre&quot;</span>),</span>
<span id="cb665-9"><a href="creating-a-research-compendium-with-rrtools.html#cb665-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">email =</span> <span class="st">&quot;annakrystalli@googlemail.com&quot;</span>)</span>
<span id="cb665-10"><a href="creating-a-research-compendium-with-rrtools.html#cb665-10" aria-hidden="true" tabindex="-1"></a>Description<span class="sc">:</span> This repository contains the research compendium of the partial </span>
<span id="cb665-11"><a href="creating-a-research-compendium-with-rrtools.html#cb665-11" aria-hidden="true" tabindex="-1"></a>    reproduction of Boettiger Ecology Letters <span class="dv">2018</span>;<span class="dv">21</span><span class="sc">:</span>1255–<span class="fl">1267.</span> The compendium </span>
<span id="cb665-12"><a href="creating-a-research-compendium-with-rrtools.html#cb665-12" aria-hidden="true" tabindex="-1"></a>    contains all data, code, and text associated with this sub<span class="sc">-</span>section of the </span>
<span id="cb665-13"><a href="creating-a-research-compendium-with-rrtools.html#cb665-13" aria-hidden="true" tabindex="-1"></a>    analysis.</span>
<span id="cb665-14"><a href="creating-a-research-compendium-with-rrtools.html#cb665-14" aria-hidden="true" tabindex="-1"></a>License<span class="sc">:</span> MIT <span class="sc">+</span> file LICENSE</span>
<span id="cb665-15"><a href="creating-a-research-compendium-with-rrtools.html#cb665-15" aria-hidden="true" tabindex="-1"></a>ByteCompile<span class="sc">:</span> true</span>
<span id="cb665-16"><a href="creating-a-research-compendium-with-rrtools.html#cb665-16" aria-hidden="true" tabindex="-1"></a>Encoding<span class="sc">:</span> UTF<span class="dv">-8</span></span>
<span id="cb665-17"><a href="creating-a-research-compendium-with-rrtools.html#cb665-17" aria-hidden="true" tabindex="-1"></a>LazyData<span class="sc">:</span> true</span>
<span id="cb665-18"><a href="creating-a-research-compendium-with-rrtools.html#cb665-18" aria-hidden="true" tabindex="-1"></a>Roxygen<span class="sc">:</span> <span class="fu">list</span>(<span class="at">markdown =</span> <span class="cn">TRUE</span>)</span>
<span id="cb665-19"><a href="creating-a-research-compendium-with-rrtools.html#cb665-19" aria-hidden="true" tabindex="-1"></a>RoxygenNote<span class="sc">:</span> <span class="dv">7</span>.<span class="fl">1.1</span></span>
<span id="cb665-20"><a href="creating-a-research-compendium-with-rrtools.html#cb665-20" aria-hidden="true" tabindex="-1"></a>Imports<span class="sc">:</span> bookdown,</span>
<span id="cb665-21"><a href="creating-a-research-compendium-with-rrtools.html#cb665-21" aria-hidden="true" tabindex="-1"></a>    here</span>
<span id="cb665-22"><a href="creating-a-research-compendium-with-rrtools.html#cb665-22" aria-hidden="true" tabindex="-1"></a>Suggests<span class="sc">:</span> devtools,</span>
<span id="cb665-23"><a href="creating-a-research-compendium-with-rrtools.html#cb665-23" aria-hidden="true" tabindex="-1"></a>    git2r</span></code></pre></div>
<p>and your project folder should contain:</p>
<pre><code>├── CONDUCT.md
├── CONTRIBUTING.md
├── DESCRIPTION
├── LICENSE
├── LICENSE.md
├── NAMESPACE
├── README.Rmd
├── analysis
│   ├── data
│   │   ├── DO-NOT-EDIT-ANY-FILES-IN-HERE-BY-HAND
│   │   ├── derived_data
│   │   └── raw_data
│   ├── figures
│   ├── paper
│   │   ├── paper.Rmd
│   │   └── references.bib
│   ├── supplementary-materials
│   └── templates
│       ├── author-info-blocks.lua
│       ├── journal-of-archaeological-science.csl
│       ├── pagebreak.lua
│       ├── scholarly-metadata.lua
│       ├── template.Rmd
│       └── template.docx
├── attic
│   └── rrtools-wkshp-materials-master
│       ├── README.md
│       ├── analysis.R
│       ├── gillespie.csv
│       ├── paper.pdf
│       ├── paper.txt
│       └── refs.bib
├── rrcompendium.Rproj
└── runtime.txt</code></pre>
<p>Let’s commit our work and move on to preparing our compendium for sharing on GitHub.</p>
<p><br></p>
<hr />
</div>
</div>
<div id="sharing-a-compendium-on-github" class="section level2">
<h2>🚦Sharing a compendium on GitHub</h2>
<p><br></p>
</div>
<div id="update-readme" class="section level2">
<h2>Update README</h2>
<p>Every GitHub repository needs a <code>README</code> landing page.</p>
<p>When we intialised our research compendium, <strong>an <code>rrtools</code> <code>README</code> template</strong> was created.</p>
<p>You can always re-create one with:</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="creating-a-research-compendium-with-rrtools.html#cb667-1" aria-hidden="true" tabindex="-1"></a>rrtools<span class="sc">::</span><span class="fu">use_readme_rmd</span>()</span></code></pre></div>
<pre><code>
✔ Creating &#39;README.Rmd&#39; from template.
✔ Adding &#39;README.Rmd&#39; to `.Rbuildignore`.
● Modify &#39;README.Rmd&#39;
✔ Rendering README.Rmd to README.md for GitHub.
✔ Adding code of conduct.
✔ Creating &#39;CONDUCT.md&#39; from template.
✔ Adding &#39;CONDUCT.md&#39; to `.Rbuildignore`.
✔ Adding instructions to contributors.
✔ Creating &#39;CONTRIBUTING.md&#39; from template.
✔ Adding &#39;CONTRIBUTING.md&#39; to `.Rbuildignore`.
</code></pre>
<p>This <strong>generates README.Rmd and renders it to README.md</strong>, ready to display on GitHub. It contains:</p>
<ul>
<li>details of authorship and DOI of the associated paper.</li>
<li>details of authorship and DOI of the code and data.</li>
<li>a <strong>template citation</strong> to show others how to cite your project.</li>
<li>instructions on how to download and install the compendium</li>
<li>instructions on how to reproduce the analysis</li>
<li><strong>license information for the text, figures, code and data</strong> in your
compendium</li>
</ul>
<p><br></p>
<p>The call also adds two other markdown files:</p>
<ul>
<li><code>CONDUCT.md</code>: a <strong>code of conduct for users</strong></li>
<li><code>CONTRIBUTING.md</code>:: basic <strong>instructions for people who want to contribute</strong> to our compendium</li>
</ul>
<p><br></p>
</div>
<div id="update-readme-1" class="section level2">
<h2>update <code>README</code></h2>
<p>There’s <strong>4 main edits</strong> we need to make to the template:</p>
<div id="add-title" class="section level3">
<h3>add title</h3>
<p>In the first code chunk, assign the title to the <code>title</code> object:</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="creating-a-research-compendium-with-rrtools.html#cb669-1" aria-hidden="true" tabindex="-1"></a>Title <span class="ot">&lt;-</span> <span class="st">&quot;Partial Reproduction of Boettiger Ecology Letters 2018;21:1255–1267 with rrtools&quot;</span></span></code></pre></div>
</div>
<div id="edit-author-details" class="section level3">
<h3>edit author details</h3>
<p>Where details of authors are requested, add your own name</p>
<p>We don’t have a link to the DOI or details of where our partial reproduction is published so just leave as is.</p>
</div>
<div id="update-zip-url" class="section level3">
<h3>update zip url</h3>
<p>This is a link to download a zipped file of the repository. To update the template, just paste the url of your compendium repository like so:</p>
<pre><code>[master.zip](https://github.com/annakrystalli/rrcompendium/archive/master.zip)</code></pre>
</div>
<div id="adjust-data-license" class="section level3">
<h3>adjust data LICENSE</h3>
<p>Let’s <strong>adjust the data LICENSE to match the source compendium license</strong>, which is CC-BY 4.0. Let’s also add Carl Boettiger as copyright holder of the data.</p>
<pre><code>**Text and figures :**  [CC-BY-4.0](http://creativecommons.org/licenses/by/4.0/), Copyright (c) 2018 Carl Boettiger.

**Code :** See the [DESCRIPTION](DESCRIPTION) file

**Data :** [CC-BY-4.0](http://creativecommons.org/licenses/by/4.0/), Copyright (c) 2018 Carl Boettiger.</code></pre>
<p>Remember to knit your <code>README.Rmd</code> to it’s <code>.md</code> version.</p>
<p><br></p>
</div>
</div>
<div id="create-github-repository" class="section level2">
<h2>🚦 Create GitHub repository</h2>
<p>Next, we’ll <strong>create a GitHub repository to share our compendium</strong>. We’ll make use of our <code>GITHUB_PAT</code> and go for <code>https</code> authentication. We can do this with function:</p>
<p>You will need to set up <code>gitcreds</code> again in this new project!</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="creating-a-research-compendium-with-rrtools.html#cb672-1" aria-hidden="true" tabindex="-1"></a><span class="co"># configure GitHub PAT credentials</span></span>
<span id="cb672-2"><a href="creating-a-research-compendium-with-rrtools.html#cb672-2" aria-hidden="true" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>()</span>
<span id="cb672-3"><a href="creating-a-research-compendium-with-rrtools.html#cb672-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-4"><a href="creating-a-research-compendium-with-rrtools.html#cb672-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create GitHub repository and push</span></span>
<span id="cb672-5"><a href="creating-a-research-compendium-with-rrtools.html#cb672-5" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_github</span>(<span class="at">protocol =</span> <span class="st">&quot;https&quot;</span>)</span></code></pre></div>
<pre><code>✔ Setting active project to &#39;/Users/Anna/Documents/workflows/rrcompendium&#39;
● Check title and description
  Name:        rrcompendium
  Description: Partial Reproduction of Boettiger Ecology Letters 2018;21:1255–1267 with rrtools
  </code></pre>
<p>The function will prompt you to confirm the name and description for your GitHub repo which it parses from our <code>DESCRIPTION</code> file. If everything looks good select the affirmative option.</p>
<pre><code>Are title and description ok?
1: Not now
2: Definitely
3: Nope
</code></pre>
<p>If creation of the repo was successfull you should see the following console output:</p>
<pre><code>✔ Creating GitHub repository
✔ Adding GitHub remote
✔ Adding GitHub links to DESCRIPTION
✔ Setting URL field in DESCRIPTION to &#39;https://github.com/annakrystalli/rrcompendium&#39;
✔ Setting BugReports field in DESCRIPTION to &#39;https://github.com/annakrystalli/rrcompendium/issues&#39;
✔ Pushing to GitHub and setting remote tracking branch
✔ Opening URL https://github.com/annakrystalli/rrcompendium</code></pre>
<div id="commit-and-push-to-github" class="section level3">
<h3>Commit and push to GitHub</h3>
<div id="weve-now-completed-our-rrtools-readme.rmd" class="section level4">
<h4>We’ve now completed our <code>rrtools</code> <code>README.Rmd</code>! 🎉</h4>
<ul>
<li><p>Render it to update the <code>README.md</code> file which is displayed on GitHub</p></li>
<li><p>Commit and push to GitHub.</p></li>
</ul>
<p>You’re Github repository README should look like this on the site:</p>
<p><img src="assets/README-webshot.png" /><!-- --></p>
<hr />
<p><br></p>
<hr />
</div>
</div>
</div>
<div id="setting-up-the-analysis-folder" class="section level2">
<h2>🚦 Setting up the analysis folder</h2>
<p><br></p>
</div>
<div id="complete-analysis" class="section level2">
<h2>Complete <code>analysis</code></h2>
<p>We’ll now move to working in our <strong>analysis folder which will contain our analysis and paper</strong>. It already exists but you can re-create it by using function <code>rrtools::use_analysis()</code></p>
<p>The function has three <code>location =</code> options:</p>
<ul>
<li><p><code>top_level</code> to create a top-level <code>analysis/</code> directory</p></li>
<li><p><code>inst</code> to create an <code>inst/</code> directory (so that all the sub-directories are available after the package is installed)</p></li>
<li><p><code>vignettes</code> to create a <code>vignettes/</code> directory (and automatically update the <code>DESCRIPTION</code>).</p></li>
</ul>
<p>The default is a top-level <code>analysis/</code>.</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="creating-a-research-compendium-with-rrtools.html#cb676-1" aria-hidden="true" tabindex="-1"></a>rrtools<span class="sc">::</span><span class="fu">use_analysis</span>()</span></code></pre></div>
<pre><code>✔ Adding bookdown to Imports
✔ Creating &#39;analysis&#39; directory and contents
✔ Creating &#39;analysis&#39;
✔ Creating &#39;analysis/paper&#39;
✔ Creating &#39;analysis/figures&#39;
✔ Creating &#39;analysis/templates&#39;
✔ Creating &#39;analysis/data&#39;
✔ Creating &#39;analysis/data/raw_data&#39;
✔ Creating &#39;analysis/data/derived_data&#39;
✔ Creating &#39;references.bib&#39; from template.
✔ Creating &#39;paper.Rmd&#39; from template.

Next, you need to:  ↓ ↓ ↓ ↓ 
● Write your article/report/thesis, start at the paper.Rmd file
● Add the citation style library file (csl) to replace the default provided here, see https://github.com/citation-style-language/
● Add bibliographic details of cited items to the &#39;references.bib&#39; file
● For adding captions &amp; cross-referencing in an Rmd, see https://bookdown.org/yihui/bookdown/
● For adding citations &amp; reference lists in an Rmd, see http://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html

Note that:
⚠ Your data files are tracked by Git and will be pushed to GitHub</code></pre>
<p>Regardless for <code>location</code> option, the contents of the created sub-directories are the same:</p>
<pre><code>analysis
├── data
│   ├── DO-NOT-EDIT-ANY-FILES-IN-HERE-BY-HAND
│   ├── derived_data
│   └── raw_data
├── figures
├── paper
│   ├── paper.Rmd
│   └── references.bib
├── supplementary-materials
└── templates
    ├── author-info-blocks.lua
    ├── journal-of-archaeological-science.csl
    ├── pagebreak.lua
    ├── scholarly-metadata.lua
    ├── template.Rmd
    └── template.docx</code></pre>
<p>Let’s inspect</p>
<div id="paper.rmd" class="section level3">
<h3><code>paper.Rmd</code></h3>
<p><code>paper.Rmd</code> is ready to write in and render with bookdown. It includes:</p>
<ul>
<li><p>a YAML header that identifies the <code>references.bib</code> file and the supplied <code>csl</code> file (Citation Style Language) to style the reference list)</p></li>
<li><p>a <strong>colophon</strong> that <strong>adds some git commit details to the end of the document</strong>. This means that the output file (HTML/PDF/Word) is always traceable to a specific state of the code.</p></li>
</ul>
</div>
<div id="references.bib" class="section level3">
<h3><code>references.bib</code></h3>
<p>The <code>references.bib</code> file has just one item to demonstrate the format. It is ready to insert more reference details.</p>
<p>We can replace the supplied <code>csl</code> file with a different citation style from <a href="https://github.com/citation-style-language/" class="uri">https://github.com/citation-style-language/</a></p>
<p><br></p>
<hr />
</div>
</div>
<div id="reproduce-a-paper-in-rmd" class="section level2">
<h2>🚦 Reproduce a paper in Rmd</h2>
<p>In this section we’re going to <strong>create a literate programming document to reproduce the paper</strong> in a format suitable for <strong>journal submission</strong> or as a <strong>pre-print</strong>. We’ll do this using the course materials we downloaded.</p>
<p>In particular, we’re going to <strong>combine</strong> the <strong>code in <code>analysis.R</code></strong>, the <strong><code>text</code> in <code>paper.txt</code></strong> and the <strong>references in the <code>refs.bib</code></strong> file in an <code>.Rmd</code> document to reproduce <a href="https://github.com/annakrystalli/rrtools-wkshp-materials/blob/master/paper.pdf"><code>paper.pdf</code></a>.</p>
<p>More information on working on <a href="https://bookdown.org/yihui/rmarkdown/journals.html">academic journals with Bookdown</a></p>
<p><br></p>
</div>
<div id="setup-data" class="section level2">
<h2>Setup data</h2>
<p><br></p>
<div id="copy-data-to-data" class="section level3">
<h3>Copy data to <code>data/</code></h3>
<p>To begin, let’s <strong>copy <code>gillespie.csv</code></strong> from the course materials you downloaded in <code>rrtools-wkshp-materials-master/</code> <strong>to the subfolder <code>analysis/data/raw_data/</code></strong> in <code>rrcompendium</code></p>
<p>We can do this programmatically with:</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="creating-a-research-compendium-with-rrtools.html#cb679-1" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">file_copy</span>(<span class="st">&quot;attic/rrtools-wkshp-materials-master/gillespie.csv&quot;</span>, </span>
<span id="cb679-2"><a href="creating-a-research-compendium-with-rrtools.html#cb679-2" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;analysis/data/raw_data/&quot;</span>)</span></code></pre></div>
<p>Your data folder should now look like this:</p>
<pre><code>analysis/data
├── DO-NOT-EDIT-ANY-FILES-IN-HERE-BY-HAND
├── derived_data
└── raw_data
    └── gillespie.csv</code></pre>
</div>
</div>
<div id="inspect-analysis.r-file" class="section level2">
<h2>Inspect analysis.R file</h2>
<p>Let’s also <strong>open <code>analysis.R</code></strong> in the course materials and run the code. The script has some <strong>initial setup</strong>, then <strong>loads the data</strong>, <strong>recodes one of the columns</strong> for plotting and then <strong>plots the results</strong> of the simulation, which <strong>generates figure 1 in <a href="https://github.com/annakrystalli/rrtools-wkshp-materials/blob/master/paper.pdf"><code>paper.pdf</code></a></strong>.</p>
<div id="analysis.r" class="section level4">
<h4><code>analysis.R</code></h4>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb681-1"><a href="creating-a-research-compendium-with-rrtools.html#cb681-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb681-2"><a href="creating-a-research-compendium-with-rrtools.html#cb681-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb681-3"><a href="creating-a-research-compendium-with-rrtools.html#cb681-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb681-4"><a href="creating-a-research-compendium-with-rrtools.html#cb681-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb681-5"><a href="creating-a-research-compendium-with-rrtools.html#cb681-5" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_grey</span>())</span></code></pre></div>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="creating-a-research-compendium-with-rrtools.html#cb682-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load-data</span></span>
<span id="cb682-2"><a href="creating-a-research-compendium-with-rrtools.html#cb682-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;gillespie.csv&quot;</span>), <span class="at">col_types =</span> <span class="st">&quot;cdiddd&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb683"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb683-1"><a href="creating-a-research-compendium-with-rrtools.html#cb683-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create colour palette</span></span>
<span id="cb683-2"><a href="creating-a-research-compendium-with-rrtools.html#cb683-2" aria-hidden="true" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">ptol_pal</span>()(<span class="dv">2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="creating-a-research-compendium-with-rrtools.html#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recode-data</span></span>
<span id="cb684-2"><a href="creating-a-research-compendium-with-rrtools.html#cb684-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb684-3"><a href="creating-a-research-compendium-with-rrtools.html#cb684-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">system_size =</span> <span class="fu">recode</span>(system_size, </span>
<span id="cb684-4"><a href="creating-a-research-compendium-with-rrtools.html#cb684-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">large =</span> <span class="st">&quot;A. 1000 total sites&quot;</span>, </span>
<span id="cb684-5"><a href="creating-a-research-compendium-with-rrtools.html#cb684-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">small =</span> <span class="st">&quot;B. 100 total sites&quot;</span>)) </span>
<span id="cb684-6"><a href="creating-a-research-compendium-with-rrtools.html#cb684-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-7"><a href="creating-a-research-compendium-with-rrtools.html#cb684-7" aria-hidden="true" tabindex="-1"></a><span class="co"># plot-gillespie</span></span>
<span id="cb684-8"><a href="creating-a-research-compendium-with-rrtools.html#cb684-8" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb684-9"><a href="creating-a-research-compendium-with-rrtools.html#cb684-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time)) <span class="sc">+</span> </span>
<span id="cb684-10"><a href="creating-a-research-compendium-with-rrtools.html#cb684-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> mean), <span class="at">lty=</span><span class="dv">2</span>, <span class="at">col=</span>colours[<span class="dv">2</span>]) <span class="sc">+</span> </span>
<span id="cb684-11"><a href="creating-a-research-compendium-with-rrtools.html#cb684-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> minus_sd), <span class="at">lty=</span><span class="dv">2</span>, <span class="at">col=</span>colours[<span class="dv">2</span>]) <span class="sc">+</span> </span>
<span id="cb684-12"><a href="creating-a-research-compendium-with-rrtools.html#cb684-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> plus_sd), <span class="at">lty=</span><span class="dv">2</span>, <span class="at">col=</span>colours[<span class="dv">2</span>]) <span class="sc">+</span> </span>
<span id="cb684-13"><a href="creating-a-research-compendium-with-rrtools.html#cb684-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> n), <span class="at">col=</span>colours[<span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb684-14"><a href="creating-a-research-compendium-with-rrtools.html#cb684-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>system_size, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) </span></code></pre></div>
<p><img src="rrresearchACCE20_files/figure-html/unnamed-chunk-473-1.png" width="672" /></p>
<hr />
</div>
</div>
<div id="create-journal-article-template-using-rticles" class="section level2">
<h2>🚦 Create journal article template using <code>rticles</code></h2>
<p>The <code>rticles</code> package is designed to <strong>simplify the creation of documents that conform to submission standards</strong>. A suite of custom R Markdown templates for popular journals is provided by the package.</p>
<p><br></p>
<div id="delete-paper-subdirectory" class="section level3">
<h3>delete <code>paper/</code> subdirectory</h3>
<p>First, let’s <strong>delete the current <code>analysis/paper</code> folder</strong> as we’re going to create a new folder and <code>paper.Rmd</code> template.</p>
<p>We can do this programmatically with:</p>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb685-1"><a href="creating-a-research-compendium-with-rrtools.html#cb685-1" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_delete</span>(<span class="st">&quot;analysis/paper&quot;</span>)</span></code></pre></div>
<p><br></p>
</div>
<div id="create-new-paper-template" class="section level3">
<h3>create new paper template</h3>
<p>This particular paper was published in Ecology Letters, an Elsevier Journal. We can <strong>create a new paper.Rmd template</strong> from the templates provided by <code>rticles</code> package.</p>
<p>We can use the <strong>New R Markdown</strong> dialog</p>
<p>Select:</p>
<ul>
<li><strong>Template:</strong> Elesevier Journal Article</li>
<li><strong>Name:</strong> paper</li>
<li><strong>Location:</strong> <code>rrcompendium/analysis</code></li>
</ul>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="creating-a-research-compendium-with-rrtools.html#cb686-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;assets/rticle.png&quot;</span>)</span></code></pre></div>
<p><img src="assets/rticle.png" /><!-- --></p>
<p>Or we can use <code>rmarkdown::draft()</code> to create articles:</p>
<div class="sourceCode" id="cb687"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb687-1"><a href="creating-a-research-compendium-with-rrtools.html#cb687-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">draft</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;analysis&quot;</span>,<span class="st">&quot;paper.Rmd&quot;</span>), <span class="at">template =</span> <span class="st">&quot;elsevier&quot;</span>, <span class="at">package =</span> <span class="st">&quot;rticles&quot;</span>)</span></code></pre></div>
<p>Both these functions create the following files in a new directory <code>analysis/paper</code>.</p>
<pre><code>analysis/paper
├── elsarticle.cls
├── elsevier-harvard-without-titles.csl
├── elsevier-harvard.csl
├── elsevier-vancouver.csl
├── elsevier-with-titles-alphabetical.csl
├── elsevier-with-titles.csl
├── elsevier-without-titles.csl
├── mybibfile.bib
├── numcompress.sty
└── paper.Rmd</code></pre>
<ul>
<li><p>The <code>*.cls</code> files contain citation language styles for the references.</p></li>
<li><p>The <code>mybibfile.bib</code> contains an example reference list.</p></li>
<li><p>The new <code>paper.Rmd</code> is the file we will be working in.</p></li>
</ul>
<p>Let’s open it up and start editing it.</p>
<hr />
<p><br></p>
</div>
</div>
<div id="update-yaml" class="section level2">
<h2>🚦 Update YAML</h2>
<p>The <strong>YAML header in <code>Paper.Rmd</code></strong> contains <strong>document wide metadata</strong> and is pre-populated with some fields relevant to an academic publication.</p>
<pre><code>---
title: Short Paper
author:
  - name: Alice Anonymous
    email: alice@example.com
    affiliation: Some Institute of Technology
    footnote: 1
  - name: Bob Security
    email: bob@example.com
    affiliation: Another University
  - name: Cat Memes
    email: cat@example.com
    affiliation: Another University
    footnote: 2
  - name: Derek Zoolander
    email: derek@example.com
    affiliation: Some Institute of Technology
    footnote: 2
address:
  - code: Some Institute of Technology
    address: Department, Street, City, State, Zip
  - code: Another University
    address: Department, Street, City, State, Zip
footnote:
  - code: 1
    text: &quot;Corresponding Author&quot;
  - code: 2
    text: &quot;Equal contribution&quot;
abstract: |
  This is the abstract.

  It consists of two paragraphs.

journal: &quot;An awesome journal&quot;
date: &quot;2021-05-06&quot;
bibliography: mybibfile.bib
#linenumbers: true
#numbersections: true
csl: elsevier-harvard.csl
output: rticles::elsevier_article
---</code></pre>
<p>Here we’re <strong>going to reproduce <code>paper.pdf</code> as is</strong>, so we’ll actually be editing the file with <strong>details from the original publication</strong>.</p>
<p>First, let’s <strong>clear all text BELOW the YAML header</strong> (which is <strong>delimited by <code>---</code></strong>. DO NOT delete the YAML header).</p>
<p>Next, let’s <strong>open <code>paper.txt</code></strong> from the course material which contains all text from the in <code>paper.pdf</code>. We can <strong>use it to complete some of the fields in the YAML header</strong>.</p>
<p><br></p>
<div id="title-1" class="section level3">
<h3>title</h3>
<p>Add the paper title to this field</p>
<pre><code>title: &quot;From noise to knowledge: how randomness generates novel phenomena and reveals information&quot;
</code></pre>
<p><br></p>
</div>
<div id="author" class="section level3">
<h3>author</h3>
<p>Here we specify author details.</p>
<pre><code>author:
  - name: &quot;Carl Boettiger&quot;
    affiliation: a
    email: &quot;cboettig@berkeley.edu&quot;</code></pre>
<p><br></p>
</div>
<div id="address" class="section level3">
<h3>address</h3>
<p>Here we <strong>specify the addresses associated with the affiliations</strong> specified in <code>authors</code></p>
<pre><code>address:
  - code: a
    address: &quot;Dept of Environmental Science, Policy, and Management, University of California Berkeley, Berkeley CA 94720-3114, USA&quot;</code></pre>
<p>Note that the field <code>code</code> in <code>address</code> cross-references with the affiliations specified in <code>author</code>.</p>
<p><br></p>
</div>
<div id="bibliography" class="section level3">
<h3>bibliography</h3>
<p>Before specifying the bibliography, we need to <strong>copy the <code>refs.bib</code></strong> file associated with <code>paper.pdf</code> from the course materials and <strong>save it in our <code>analysis/paper</code></strong> subdirectory.</p>
<p>We can do this programmatically with:</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb693-1"><a href="creating-a-research-compendium-with-rrtools.html#cb693-1" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">file_copy</span>(<span class="st">&quot;attic/rrtools-wkshp-materials-master/refs.bib&quot;</span>, <span class="st">&quot;analysis/paper/&quot;</span>)</span></code></pre></div>
<p>Next we can set the <code>refs.bib</code> as the source for our paper’s bibliography:</p>
<pre><code>bibliography: refs.bib</code></pre>
<p><br></p>
</div>
<div id="layout" class="section level3">
<h3>🚦 layout</h3>
<p>We can add an additional field called <code>layout</code> which specifies the <strong>layout of the output</strong> and takes the following values.</p>
<ul>
<li><strong>review:</strong> doublespace margins</li>
<li><strong>3p:</strong> singlespace margins</li>
<li><strong>5p:</strong> two-column</li>
</ul>
<p>Let’s <strong>use single space margins</strong></p>
<pre><code>layout:  3p</code></pre>
<p><br></p>
</div>
<div id="preamble" class="section level3">
<h3>preamble</h3>
<p>We can add also an additional field called <strong><code>preamble</code></strong>. This <strong>allows us to include LaTeX packages and functions</strong>. We’ll use the following to <strong>add linenumbers and doublespacing</strong>.</p>
<pre><code>preamble: |
  \usepackage[nomarkers]{endfloat}
  \linenumbers
  \usepackage{setspace}
  \doublespacing</code></pre>
<p><br></p>
</div>
<div id="abstract" class="section level3">
<h3>🚦 abstract</h3>
<p>This field should <strong>contain the abstract</strong></p>
<pre><code>abstract: |

  # Abstract
  
  Noise, as the term itself suggests, is most often seen a nuisance to ecological insight, a inconvenient reality that must be acknowledged, a haystack that must be stripped away to reveal the processes of interest underneath. Yet despite this well-earned reputation, noise is often interesting in its own right: noise can induce novel phenomena that could not be understood from some underlying determinstic model alone.  Nor is all noise the same, and close examination of differences in frequency, color or magnitude can reveal insights that would otherwise be inaccessible.  Yet with each aspect of stochasticity leading to some new or unexpected behavior, the time is right to move beyond the familiar refrain of &quot;everything is important&quot; (Bjørnstad &amp; Grenfell 2001).  Stochastic phenomena can suggest new ways of inferring process from pattern, and thus spark more dialog between theory and empirical perspectives that best advances the field as a whole. I highlight a few compelling examples, while observing that the study of stochastic phenomena are only beginning to make this translation into empirical inference.  There are rich opportunities at this interface in the years ahead.  
</code></pre>
</div>
<div id="output" class="section level3">
<h3>output</h3>
<p>The <strong>output format</strong>. In this case, the template is correctly pre-populated with <code>rticles::elsevier_article</code> so no need to edit.</p>
<pre><code>output: rticles::elsevier_article</code></pre>
<p><br></p>
<p>At this point, your YAML header should look like this:</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb699-1"><a href="creating-a-research-compendium-with-rrtools.html#cb699-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb699-2"><a href="creating-a-research-compendium-with-rrtools.html#cb699-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;From noise to knowledge: how randomness generates novel phenomena and reveals information&quot;</span></span>
<span id="cb699-3"><a href="creating-a-research-compendium-with-rrtools.html#cb699-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span></span>
<span id="cb699-4"><a href="creating-a-research-compendium-with-rrtools.html#cb699-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Carl Boettiger&quot;</span></span>
<span id="cb699-5"><a href="creating-a-research-compendium-with-rrtools.html#cb699-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">affiliation</span><span class="kw">:</span><span class="at"> a</span></span>
<span id="cb699-6"><a href="creating-a-research-compendium-with-rrtools.html#cb699-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;cboettig@berkeley.edu&quot;</span></span>
<span id="cb699-7"><a href="creating-a-research-compendium-with-rrtools.html#cb699-7" aria-hidden="true" tabindex="-1"></a><span class="fu">address</span><span class="kw">:</span></span>
<span id="cb699-8"><a href="creating-a-research-compendium-with-rrtools.html#cb699-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">code</span><span class="kw">:</span><span class="at"> a</span></span>
<span id="cb699-9"><a href="creating-a-research-compendium-with-rrtools.html#cb699-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">address</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Dept of Environmental Science, Policy, and Management, University of California Berkeley, Berkeley CA 94720-3114, USA&quot;</span></span>
<span id="cb699-10"><a href="creating-a-research-compendium-with-rrtools.html#cb699-10" aria-hidden="true" tabindex="-1"></a><span class="fu">bibliography</span><span class="kw">:</span><span class="at"> refs.bib</span></span>
<span id="cb699-11"><a href="creating-a-research-compendium-with-rrtools.html#cb699-11" aria-hidden="true" tabindex="-1"></a><span class="fu">layout</span><span class="kw">:</span><span class="at">  3p</span><span class="co"> # review = doublespace, 3p = singlespace, 5p = two-column</span></span>
<span id="cb699-12"><a href="creating-a-research-compendium-with-rrtools.html#cb699-12" aria-hidden="true" tabindex="-1"></a><span class="fu">preamble</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb699-13"><a href="creating-a-research-compendium-with-rrtools.html#cb699-13" aria-hidden="true" tabindex="-1"></a>  \usepackage[nomarkers]{endfloat}</span>
<span id="cb699-14"><a href="creating-a-research-compendium-with-rrtools.html#cb699-14" aria-hidden="true" tabindex="-1"></a>  \linenumbers</span>
<span id="cb699-15"><a href="creating-a-research-compendium-with-rrtools.html#cb699-15" aria-hidden="true" tabindex="-1"></a>  \usepackage{setspace}</span>
<span id="cb699-16"><a href="creating-a-research-compendium-with-rrtools.html#cb699-16" aria-hidden="true" tabindex="-1"></a>  \doublespacing</span>
<span id="cb699-17"><a href="creating-a-research-compendium-with-rrtools.html#cb699-17" aria-hidden="true" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb699-18"><a href="creating-a-research-compendium-with-rrtools.html#cb699-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb699-19"><a href="creating-a-research-compendium-with-rrtools.html#cb699-19" aria-hidden="true" tabindex="-1"></a>  Noise, as the term itself suggests, is most often seen a nuisance to ecological insight, a inconvenient reality that must be acknowledged, a haystack that must be stripped away to reveal the processes of interest underneath. Yet despite this well-earned reputation, noise is often interesting in its own right: noise can induce novel phenomena that could not be understood from some underlying determinstic model alone.  Nor is all noise the same, and close examination of differences in frequency, color or magnitude can reveal insights that would otherwise be inaccessible.  Yet with each aspect of stochasticity leading to some new or unexpected behavior, the time is right to move beyond the familiar refrain of &quot;everything is important&quot; [@Bjornstad2001].  Stochastic phenomena can suggest new ways of inferring process from pattern, and thus spark more dialog between theory and empirical perspectives that best advances the field as a whole. I highlight a few compelling examples, while observing that the study of stochastic phenomena are only beginning to make this translation into empirical inference.  There are rich opportunities at this interface in the years ahead.  </span>
<span id="cb699-20"><a href="creating-a-research-compendium-with-rrtools.html#cb699-20" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> rticles::elsevier_article</span></span>
<span id="cb699-21"><a href="creating-a-research-compendium-with-rrtools.html#cb699-21" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="add-text" class="section level2">
<h2>🚦 Add text</h2>
<p>Now let’s <strong>add the main body of the paper from <code>paper.txt</code></strong>.</p>
<p><br></p>
<div id="add-new-page-after-abstract" class="section level3">
<h3>add new page after abstract</h3>
<p>First, let’s a add a new page after the abstract using:</p>
<pre><code>\newpage
</code></pre>
<p><br></p>
</div>
<div id="copy-and-paste-text-from-paper.txt" class="section level3">
<h3>copy and paste text from <code>paper.txt</code></h3>
<p>We do not need the details we’ve just completed the YAML with, so ignore the title, abstract etc and just copy everything in <code>paper.txt</code> <strong>from the Introduction header down to and including the reference section header</strong>.</p>
<pre><code># Introduction: Noise the nuisance

To many, stochasticity, or more simply, noise,
is just that -- something which obscures patterns we are

...
...
...
...
...

# Acknowledgements

The author acknowledges feedback and advice from the editor,
Tim Coulson and two anonymous reviewers. This work was supported in
part by  USDA National Institute of Food and Agriculture, Hatch
project CA-B-INS-0162-H.

# References
</code></pre>
</div>
<div id="check-pdf-output" class="section level3">
<h3>Check pdf output</h3>
<p>Let’s knit our document and have our first look at the resulting pdf by clicking on the <strong>Knit</strong> tab.</p>
<p><br></p>
</div>
</div>
<div id="update-references" class="section level2">
<h2>🚦 Update references</h2>
<p>Next we’ll replace the flat citations in the text with real linked citation which can be used to <strong>auto-generate formatted inline citations and the references section</strong>.</p>
<div id="insert-formatted-citations" class="section level3">
<h3>Insert formatted citations</h3>
<p>We’ll use the <strong><code>citr</code> package</strong>, which provides functions and an RStudio addin to search a BibTeX-file to <strong>create and insert formatted Markdown citations</strong> into the current document.</p>
<p>Once <code>citr</code> is installed and you have restarted your R session, the addin appears in the addin menu. The <strong>addin will automatically look up the Bib(La)TeX-file(s) specified in the YAML front matter</strong>.</p>
<div id="to-insert-a-citation" class="section level4">
<h4>To insert a citation</h4>
<ol style="list-style-type: decimal">
<li><p><strong>Select text</strong> to replace with a citation</p></li>
<li><p><strong>Launch <code>citr</code> addin</strong>:
<img src="assets/citr-addin.png" width="700px"></p></li>
<li><p><strong>Search</strong> for citation to insert
<img src="assets/citr-select.png" width="700px"></p></li>
<li><p><strong>Select</strong> citation to insert
<img src="assets/citr-insert.png" width="700px"></p></li>
<li><p><strong>Insert</strong> citation
<img src="assets/citr-inserted.png" width="700px"></p></li>
</ol>
<p><strong>Carry on updating the rest of the citations</strong>. Don’t forget to check the abstract for citations!</p>
<p><br></p>
</div>
</div>
</div>
<div id="update-math" class="section level2">
<h2>🚦 Update math</h2>
<p>For the sake of time today, and not to open this topic too deeply here, I’ve included the following <strong>LaTex equation syntax</strong> in the text:</p>
<pre><code>\begin{align}
\frac{\mathrm{d} n}{\mathrm{d} t} = \underbrace{c n \left(1 - \frac{n}{N}\right)}_{\textrm{birth}} - \underbrace{e n}_{\textrm{death}}, \label{levins}
\end{align}</code></pre>
<p>that <strong>generates equation 1 in the <code>paper.pdf</code></strong>.</p>
<p><span class="math display">\[\begin{align}
\frac{\mathrm{d} n}{\mathrm{d} t} = \underbrace{c n \left(1 - \frac{n}{N}\right)}_{\textrm{birth}} - \underbrace{e n}_{\textrm{death}}, \label{levins}
\end{align}\]</span></p>
<p>So you don’t need to edit anything here.</p>
<p>Check <a href="https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#math-expressions">Math expressions</a> and
<a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html">Markdown extensions by bookdown</a> for more information.
<br></p>
<div id="update-inline-math" class="section level3">
<h3>update inline math</h3>
<p><strong>Inline LaTeX equations and parameters</strong> can be written <strong>between a pair of dollar signs</strong> using the LaTeX syntax, e.g., <code>$f(x) = 1/x$</code> generates <span class="math inline">\(f(x) = 1/x\)</span>.</p>
<p>Using <code>paper.pdf</code> to identify mathematical expressions in the text (generally they appear in italic), <strong>edit your <code>paper.Rmd</code>, enclosing them between dollar signs</strong>.</p>
</div>
<div id="check-pdf-output-1" class="section level3">
<h3>Check pdf output</h3>
<p>Let’s knit our document to <strong>check our references and maths annotations</strong> have been updated correctly by clicking on the <strong>Knit</strong> tab.</p>
<p><br></p>
<hr />
</div>
</div>
<div id="add-code" class="section level2">
<h2>🚦 Add code</h2>
<p>Now that we’ve set up the text for our paper, let’s <strong>insert the code to generate figure 1.</strong></p>
<p><br></p>
<div id="add-libraries-chunk" class="section level3">
<h3>Add <code>libraries</code> chunk</h3>
<p>First let’s insert a <code>libraries</code> code chunk right at the top of the document to set up our analysis. Because it’s a setup chunk we set <code>include = F</code> which suppresses all output resulting from chunk evaluation.</p>
<pre><code>```{r libraries, include=FALSE}
    
 ```</code></pre>
<div id="set-document-chunk-options" class="section level4">
<h4>set document chunk options</h4>
<p>Now, let’s set some <code>knitr</code> options for the whole document by adding the following code to our <code>libraries</code> chunk:</p>
<div class="sourceCode" id="cb704"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb704-1"><a href="creating-a-research-compendium-with-rrtools.html#cb704-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, </span>
<span id="cb704-2"><a href="creating-a-research-compendium-with-rrtools.html#cb704-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">dev=</span><span class="st">&quot;cairo_pdf&quot;</span>, <span class="at">fig.width=</span><span class="dv">7</span>, <span class="at">fig.height=</span><span class="fl">3.5</span>)</span></code></pre></div>
<p>We’re setting default chunk options to:</p>
<ul>
<li><code>echo = FALSE</code></li>
<li><code>message = FALSE</code></li>
<li><code>warning = FALSE</code></li>
</ul>
<p>to suppress code, warnings and messages in the output, and</p>
<ul>
<li><code>dev="cairo_pdf"</code></li>
<li><code>fig.width=7</code></li>
<li><code>fig.height=3.5</code></li>
</ul>
<p>to specify how figures will appear.</p>
</div>
</div>
<div id="add-libraries" class="section level3">
<h3>add libraries</h3>
<p>Copy and paste the <strong>code for loading all the libraries from <code>analysis.R</code></strong>. Add library <code>rrcompendium</code> so we can access function <code>recode_system_size</code>. The <code>libraries</code> chunk should now look like so:</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb705-1"><a href="creating-a-research-compendium-with-rrtools.html#cb705-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>, <span class="at">warning=</span><span class="cn">FALSE</span>, </span>
<span id="cb705-2"><a href="creating-a-research-compendium-with-rrtools.html#cb705-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">dev=</span><span class="st">&quot;cairo_pdf&quot;</span>, <span class="at">fig.width=</span><span class="dv">7</span>, <span class="at">fig.height=</span><span class="fl">3.5</span>)</span>
<span id="cb705-3"><a href="creating-a-research-compendium-with-rrtools.html#cb705-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb705-4"><a href="creating-a-research-compendium-with-rrtools.html#cb705-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb705-5"><a href="creating-a-research-compendium-with-rrtools.html#cb705-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb705-6"><a href="creating-a-research-compendium-with-rrtools.html#cb705-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb705-7"><a href="creating-a-research-compendium-with-rrtools.html#cb705-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb705-8"><a href="creating-a-research-compendium-with-rrtools.html#cb705-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rrcompendium)</span></code></pre></div>
<p><br></p>
</div>
<div id="add-set-theme-chunk" class="section level3">
<h3>Add <code>set-theme</code> chunk</h3>
<p>Right below the <code>libraries</code> chunk, <strong>insert a new chunk and call it <code>set-theme</code></strong></p>
<p>Copy the <strong>code to set the plot theme</strong> and pasted into the <code>set-theme</code> code:</p>
<div class="sourceCode" id="cb706"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb706-1"><a href="creating-a-research-compendium-with-rrtools.html#cb706-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_grey</span>())</span></code></pre></div>
<p><br></p>
</div>
<div id="add-figure1-chunk" class="section level3">
<h3>Add <code>figure1</code> chunk</h3>
<p>Now <strong>scroll down</strong> towards the bottom of the document and <strong>create a new chunk just above the Conclusions</strong> section. Call it <strong><code>figure1</code></strong></p>
<div id="add-code-1" class="section level4">
<h4>Add code</h4>
<p>Copy and <strong>paste the remaining code into a new chunk which will create figure 1</strong>.</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb707-1"><a href="creating-a-research-compendium-with-rrtools.html#cb707-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create colour palette</span></span>
<span id="cb707-2"><a href="creating-a-research-compendium-with-rrtools.html#cb707-2" aria-hidden="true" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">ptol_pal</span>()(<span class="dv">2</span>)</span>
<span id="cb707-3"><a href="creating-a-research-compendium-with-rrtools.html#cb707-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb707-4"><a href="creating-a-research-compendium-with-rrtools.html#cb707-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load-data</span></span>
<span id="cb707-5"><a href="creating-a-research-compendium-with-rrtools.html#cb707-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;gillespie.csv&quot;</span>), <span class="at">col_types =</span> <span class="st">&quot;cdiddd&quot;</span>)  </span>
<span id="cb707-6"><a href="creating-a-research-compendium-with-rrtools.html#cb707-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb707-7"><a href="creating-a-research-compendium-with-rrtools.html#cb707-7" aria-hidden="true" tabindex="-1"></a><span class="co"># recode-data</span></span>
<span id="cb707-8"><a href="creating-a-research-compendium-with-rrtools.html#cb707-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb707-9"><a href="creating-a-research-compendium-with-rrtools.html#cb707-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">system_size =</span> <span class="fu">recode</span>(system_size, <span class="at">large =</span> <span class="st">&quot;A. 1000 total sites&quot;</span>, <span class="at">small=</span> <span class="st">&quot;B. 100 total sites&quot;</span>)) </span>
<span id="cb707-10"><a href="creating-a-research-compendium-with-rrtools.html#cb707-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb707-11"><a href="creating-a-research-compendium-with-rrtools.html#cb707-11" aria-hidden="true" tabindex="-1"></a><span class="co"># plot-gillespie</span></span>
<span id="cb707-12"><a href="creating-a-research-compendium-with-rrtools.html#cb707-12" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb707-13"><a href="creating-a-research-compendium-with-rrtools.html#cb707-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time)) <span class="sc">+</span> </span>
<span id="cb707-14"><a href="creating-a-research-compendium-with-rrtools.html#cb707-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> mean), <span class="at">lty=</span><span class="dv">2</span>, <span class="at">col=</span>colours[<span class="dv">2</span>]) <span class="sc">+</span> </span>
<span id="cb707-15"><a href="creating-a-research-compendium-with-rrtools.html#cb707-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> minus_sd), <span class="at">lty=</span><span class="dv">2</span>, <span class="at">col=</span>colours[<span class="dv">2</span>]) <span class="sc">+</span> </span>
<span id="cb707-16"><a href="creating-a-research-compendium-with-rrtools.html#cb707-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> plus_sd), <span class="at">lty=</span><span class="dv">2</span>, <span class="at">col=</span>colours[<span class="dv">2</span>]) <span class="sc">+</span> </span>
<span id="cb707-17"><a href="creating-a-research-compendium-with-rrtools.html#cb707-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> n), <span class="at">col=</span>colours[<span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb707-18"><a href="creating-a-research-compendium-with-rrtools.html#cb707-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>system_size, <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>) </span></code></pre></div>
</div>
<div id="add-caption" class="section level4">
<h4>🚦 Add caption</h4>
<p>Finally, let’s update chunk <code>figure1</code> to <strong>include a figure caption</strong>. The text for the caption is at the bottom of <code>paper.txt</code>. We can include it in the chunk header through <strong>chunk option <code>fig.cap</code></strong> like so:</p>
<pre><code>    ```{r figure1, figure1, fig.cap=&quot;Population dynamics from a Gillespie simulation of the Levins model with large (N=1000, panel A) and small (N=100, panel B) number of sites (blue) show relatively weaker effects of demographic noise in the bigger system. Models are otherwise identical, with e = 0.2 and c = 1 (code in appendix A). Theoretical predictions for mean and plus/minus one standard deviation shown in horizontal re dashed lines.&quot;} ```</code></pre>
<p><br></p>
<hr />
</div>
</div>
</div>
<div id="render-final-document-to-pdf" class="section level2">
<h2>Render final document to pdf</h2>
<p>Let’s <strong>check our final work by re-knitting to <code>pdf</code></strong>. You should be looking at something that looks a lot like <code>paper.pdf</code></p>
<p><br></p>
<hr />
</div>
<div id="add-paper-dependencies" class="section level2">
<h2>🚦 Add paper dependencies</h2>
<p>Finally, before we’re finished, let’s ensure the dependencies introduced in the paper are included. We can use <code>rrtools::add_dependencies_to_description()</code></p>
<div class="sourceCode" id="cb709"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb709-1"><a href="creating-a-research-compendium-with-rrtools.html#cb709-1" aria-hidden="true" tabindex="-1"></a>rrtools<span class="sc">::</span><span class="fu">add_dependencies_to_description</span>()</span></code></pre></div>
<p>This function <strong>scans script files (<code>.R</code>, <code>.Rmd</code>, <code>.Rnw</code>, <code>.Rpres</code>, etc.) for external package dependencies</strong> indicated by <code>library()</code>, <code>require()</code> or <code>::</code> and <strong>adds those packages to the <code>Imports</code> field in the package <code>DESCRIPTION</code></strong>:</p>
<pre><code>Imports: 
    bookdown,
    dplyr,
    ggplot2 (&gt;= 3.0.0),
    ggthemes (&gt;= 3.5.0),
    here (&gt;= 0.1),
    knitr (&gt;= 1.20),
    rticles (&gt;= 0.6)
    </code></pre>
<div id="install-and-restart" class="section level4">
<h4>🔨 <strong>Install and Restart</strong></h4>
</div>
<div id="commit-and-push-to-github-1" class="section level4">
<h4>Commit and push to GitHub!</h4>
</div>
</div>
<div id="final-compendium" class="section level2">
<h2>Final compendium</h2>
<p>You can see the resulting rrcompendium <a href="https://github.com/annakrystalli/rrcompendium-complete">here</a></p>
<p>The complete compendium should contain the following files:</p>
<pre><code>.
├── CONDUCT.md
├── CONTRIBUTING.md
├── DESCRIPTION
├── LICENSE
├── LICENSE.md
├── NAMESPACE
├── R
│   └── process-data.R
├── README.Rmd
├── README.md
├── analysis
│   ├── data
│   │   ├── DO-NOT-EDIT-ANY-FILES-IN-HERE-BY-HAND
│   │   ├── derived_data
│   │   └── raw_data
│   │       └── gillespie.csv
│   ├── figures
│   ├── paper
│   │   ├── elsarticle.cls
│   │   ├── mybibfile.bib
│   │   ├── numcompress.sty
│   │   ├── paper.Rmd
│   │   ├── paper.fff
│   │   ├── paper.pdf
│   │   ├── paper.spl
│   │   ├── paper.tex
│   │   ├── paper_files
│   │   │   └── figure-latex
│   │   │       └── figure1-1.pdf
│   │   └── refs.bib
│   └── templates
│       ├── journal-of-archaeological-science.csl
│       ├── template.Rmd
│       └── template.docx
├── inst
│   └── testdata
│       └── gillespie.csv
├── man
│   └── recode_system_size.Rd
├── rrcompendium.Rproj
└── tests
    ├── testthat
    │   └── test-process-data.R
    └── testthat.R

</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="packaging-functionality.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rrresearchACCE20.pdf", "rrresearchACCE20.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
