<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Paths and Project structure | Reproducible Research Data and Project Management in R</title>
  <meta name="description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Paths and Project structure | Reproducible Research Data and Project Management in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://annakrystalli.me/rrresearchACCE20" />
  
  <meta property="og:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  <meta name="github-repo" content="annakrystalli/rrresearchACCE20" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Paths and Project structure | Reproducible Research Data and Project Management in R" />
  
  <meta name="twitter:description" content="This course focuses on data and project management through R and Rstudio, will introduce students to best practice and equip them with modern tools and techniques for managing data and computational workflows to their full potential." />
  

<meta name="author" content="Course Instructor: Dr Anna Krystalli" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="filenaming-view.html"/>
<link rel="next" href="process.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
<script src="libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
<script src="libs/jsonedit-binding-3.0.0/jsonedit.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Research Data & Project Management in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course description</a></li>
<li class="chapter" data-level="" data-path="welcome-slides.html"><a href="welcome-slides.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="" data-path="rstudio-basics.html"><a href="rstudio-basics.html"><i class="fa fa-check"></i>Intro to R &amp; Rstudio</a></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i>R Basics</a></li>
<li class="chapter" data-level="" data-path="data-types-structures-and-classes.html"><a href="data-types-structures-and-classes.html"><i class="fa fa-check"></i>Data types, structures and classes</a></li>
<li class="chapter" data-level="" data-path="indexing-and-subsetting.html"><a href="indexing-and-subsetting.html"><i class="fa fa-check"></i>Indexing and subsetting</a></li>
<li class="chapter" data-level="" data-path="the-tidyverse-way.html"><a href="the-tidyverse-way.html"><i class="fa fa-check"></i>The tidyverse way</a></li>
<li class="chapter" data-level="" data-path="rdm-intro-view.html"><a href="rdm-intro-view.html"><i class="fa fa-check"></i>Data management Basics</a></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="" data-path="projects-in-rstudio.html"><a href="projects-in-rstudio.html"><i class="fa fa-check"></i>Projects in Rstudio</a></li>
<li class="chapter" data-level="" data-path="filenaming-view.html"><a href="filenaming-view.html"><i class="fa fa-check"></i>Good File Naming</a></li>
<li class="chapter" data-level="" data-path="path-proj-str.html"><a href="path-proj-str.html"><i class="fa fa-check"></i>Paths and Project structure</a></li>
<li class="part"><span><b>III Data Munging</b></span></li>
<li class="chapter" data-level="" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i>Iteration</a></li>
<li class="chapter" data-level="" data-path="data-merge.html"><a href="data-merge.html"><i class="fa fa-check"></i>Merging data</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a></li>
<li class="part"><span><b>IV Working with metadata</b></span></li>
<li class="chapter" data-level="" data-path="metadata-slides.html"><a href="metadata-slides.html"><i class="fa fa-check"></i>Metadata</a></li>
<li><a href="dataspice.html#dataspice">Creating metadata with <code>dataspice</code></a></li>
<li class="part"><span><b>V Analysing and presenting analyses</b></span></li>
<li class="chapter" data-level="" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html"><i class="fa fa-check"></i>Plotting with ggplot2</a></li>
<li class="chapter" data-level="" data-path="literate-programming-in-rmarkdown.html"><a href="literate-programming-in-rmarkdown.html"><i class="fa fa-check"></i>Literate Programming in rmarkdown</a></li>
<li class="part"><span><b>VI Version Control</b></span></li>
<li class="chapter" data-level="" data-path="version-control-with-git.html"><a href="version-control-with-git.html"><i class="fa fa-check"></i>Version Control with Git</a></li>
<li class="chapter" data-level="" data-path="collaborative-github.html"><a href="collaborative-github.html"><i class="fa fa-check"></i>Collaborative GitHub</a></li>
<li><a href="practical-github-rstudio-for-collaborative-coding.html#practical-github-rstudio-for-collaborative-coding">Practical: <code>GitHub</code> &amp; <code>Rstudio</code> for collaborative coding</a></li>
<li class="part"><span><b>VII Packaging Research Projects</b></span></li>
<li class="chapter" data-level="" data-path="managing-dependencies.html"><a href="managing-dependencies.html"><i class="fa fa-check"></i>Managing Dependencies</a></li>
<li class="chapter" data-level="" data-path="packaging-functionality.html"><a href="packaging-functionality.html"><i class="fa fa-check"></i>Packaging functionality</a></li>
<li class="chapter" data-level="" data-path="creating-a-research-compendium-with-rrtools.html"><a href="creating-a-research-compendium-with-rrtools.html"><i class="fa fa-check"></i>Creating a research compendium with rrtools</a></li>
<li class="part"><span><b>VIII Closing</b></span></li>
<li class="chapter" data-level="" data-path="closing-remarks.html"><a href="closing-remarks.html"><i class="fa fa-check"></i>Closing Remarks</a></li>
<li class="part"><span><b>IX APPENDIX</b></span></li>
<li><a href="individual-r.html#individual.r"><code>individual.R</code></a></li>
<li><a href="geolocate-r.html#geolocate.r"><code>geolocate.R</code></a></li>
<li><a href="analysis-r-1.html#analysis.r-1"><code>analysis.R</code></a></li>
<li><a href="index-rmd.html#index.rmd"><code>index.Rmd</code></a></li>
<li><a href="gitignore.html#gitignore"><code>.gitignore</code></a></li>
<li><a href="mypackage-hello-r.html#mypackage-hello.r"><code>mypackage</code> <code>hello.R</code></a></li>
<li><a href="mypackage-readme-rmd.html#mypackage-readme.rmd"><code>mypackage</code> <code>README.Rmd</code></a></li>
<li><a href="mypackage-description.html#mypackage-description"><code>mypackage</code> <code>DESCRIPTION</code></a></li>
<li><a href="rrcompendium-description.html#rrcompendium-description"><code>rrcompendium</code> <code>DESCRIPTION</code></a></li>
<li><a href="rrcompendium-readme-rmd.html#rrcompendium-readme.rmd"><code>rrcompendium</code> <code>README.Rmd</code></a></li>
<li><a href="rrcompendium-paper-rmd-yaml-header.html#rrcompendium-paper.rmd-yaml-header"><code>rrcompendium</code> <code>paper.Rmd</code> YAML header</a></li>
<li><a href="rrcompendium-paper-rmd.html#rrcompendium-paper.rmd"><code>rrcompendium</code> <code>paper.Rmd</code></a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Software Setup</a></li>
<li class="chapter" data-level="" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i>Solutions</a></li>
<li class="divider"></li>
<li><a href="https://annakrystalli.me/rrreasearchACCE2020" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research Data and Project Management in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="path-proj-str" class="section level1">
<h1>Paths and Project structure</h1>
<div id="project-data" class="section level2">
<h2>Project Data</h2>
<p>We’re in our new project so the first thing we need to do is get the data we’ll be working with. This is a common start to any project where you start with a few data files, These might be generated through your data, given by others or published data products and you might need to clean, wrangle and combine them together to perform your analysis.</p>
<blockquote>
<p>Q: Where should I save my raw data files?</p>
</blockquote>
<div id="conventions-data-management" class="section level3">
<h3>conventions: Data management</h3>
<ol style="list-style-type: decimal">
<li>Store raw data in <code>data-raw/</code>: raw inputs to any pre-processing, read only.</li>
</ol>
<ul>
<li>Keep any processing scripts in the same folder</li>
<li>Whether and where you publish data depends on size and copyright considerations.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Store analytical data in <code>data/</code>: any clean, processed data that is used as the input to the analysis.</li>
</ol>
<ul>
<li>Should be published along side analysis.</li>
</ul>
</div>
</div>
<div id="setting-up-a-data-raw-directory" class="section level2">
<h2>Setting up a <code>data-raw/</code> directory</h2>
<p>We <strong>start by creating a <code>data-raw</code> directory</strong> in the root of our project. We can use <code>usethis</code> function <code>usethis::use_data_raw()</code>. This creates the <code>data-raw</code> directory and an <code>.R</code> script within where we can save code that turns raw data into analytical data in the <code>data/</code> folder.</p>
<p>We can supply a name for the analytical dataset we’ll be creating in our script which automatically names the <code>.R</code> script for easy provenance tracking. In this case, we’ll be calling it <code>individual.csv</code> so let’s use <code>"individual"</code> for our name.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="path-proj-str.html#cb251-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data_raw</span>(<span class="at">name =</span> <span class="st">&quot;individual&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="path-proj-str.html#cb252-1" aria-hidden="true" tabindex="-1"></a>✔ Setting active project to <span class="st">&#39;/Users/Anna/Desktop/wood-survey&#39;</span></span>
<span id="cb252-2"><a href="path-proj-str.html#cb252-2" aria-hidden="true" tabindex="-1"></a>✔ Creating <span class="st">&#39;data-raw/&#39;</span></span>
<span id="cb252-3"><a href="path-proj-str.html#cb252-3" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">&#39;^data-raw$&#39;</span> to <span class="st">&#39;.Rbuildignore&#39;</span></span>
<span id="cb252-4"><a href="path-proj-str.html#cb252-4" aria-hidden="true" tabindex="-1"></a>✔ Writing <span class="st">&#39;data-raw/individual.R&#39;</span></span>
<span id="cb252-5"><a href="path-proj-str.html#cb252-5" aria-hidden="true" tabindex="-1"></a>● Modify <span class="st">&#39;data-raw/individual.R&#39;</span></span>
<span id="cb252-6"><a href="path-proj-str.html#cb252-6" aria-hidden="true" tabindex="-1"></a>● Finish the data preparation script <span class="cf">in</span> <span class="st">&#39;data-raw/individual.R&#39;</span></span>
<span id="cb252-7"><a href="path-proj-str.html#cb252-7" aria-hidden="true" tabindex="-1"></a>● Use <span class="st">`</span><span class="at">usethis::use_data()</span><span class="st">`</span> to add prepared data to package</span></code></pre></div>
<p>The <strong><code>data-raw/individual.R</code></strong> script created contains:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="path-proj-str.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="do">## code to prepare `individual` dataset goes here</span></span>
<span id="cb253-2"><a href="path-proj-str.html#cb253-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-3"><a href="path-proj-str.html#cb253-3" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_data</span>(<span class="st">&quot;individual&quot;</span>)</span></code></pre></div>
<p>We will use this file to perform the necessary preprocessing on our raw data.</p>
<p>However, in the mean time we will also be experimenting with code and copying code over to our <code>individual.R</code> script when we are happy with it. so let’s create a new R script to work in.</p>
<p><strong>File &gt; New File &gt; R script</strong></p>
<p>Let’s save this file in a new folder called <strong><code>attic/</code></strong> and save it as file <code>development.R</code>.</p>
<div id="download-data" class="section level3">
<h3>Download data</h3>
<p>Now that we’ve got our <code>data-raw</code> folder, let’s download our data into it using function <code>usethis::use_course()</code> and supplying it with the url to the materials repository (bit.ly/wood-survey-data) and the path to the directory we want the materials saved into (<code>"data-raw"</code>).</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="path-proj-str.html#cb254-1" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_course</span>(<span class="st">&quot;bit.ly/wood-survey-data&quot;</span>,</span>
<span id="cb254-2"><a href="path-proj-str.html#cb254-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">destdir =</span> <span class="st">&quot;data-raw&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb255"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb255-1"><a href="path-proj-str.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="ex">✔</span> Downloading from <span class="st">&#39;https://github.com/annakrystalli/wood-survey-data/archive/master.zip&#39;</span></span>
<span id="cb255-2"><a href="path-proj-str.html#cb255-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Downloaded:</span> 0.03 MB  </span>
<span id="cb255-3"><a href="path-proj-str.html#cb255-3" aria-hidden="true" tabindex="-1"></a><span class="ex">✔</span> Download stored in <span class="st">&#39;data-raw/wood-survey-data-master.zip&#39;</span></span>
<span id="cb255-4"><a href="path-proj-str.html#cb255-4" aria-hidden="true" tabindex="-1"></a><span class="ex">✔</span> Unpacking ZIP file into <span class="st">&#39;wood-survey-data-master/&#39;</span> <span class="er">(</span><span class="ex">13</span> files extracted<span class="kw">)</span></span>
<span id="cb255-5"><a href="path-proj-str.html#cb255-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Shall</span> we delete the ZIP file <span class="er">(</span><span class="st">&#39;wood-survey-data-master.zip&#39;</span><span class="kw">)</span><span class="ex">?</span></span>
<span id="cb255-6"><a href="path-proj-str.html#cb255-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-7"><a href="path-proj-str.html#cb255-7" aria-hidden="true" tabindex="-1"></a><span class="ex">1:</span> Negative</span>
<span id="cb255-8"><a href="path-proj-str.html#cb255-8" aria-hidden="true" tabindex="-1"></a><span class="ex">2:</span> Absolutely not</span>
<span id="cb255-9"><a href="path-proj-str.html#cb255-9" aria-hidden="true" tabindex="-1"></a><span class="ex">3:</span> I agree</span>
<span id="cb255-10"><a href="path-proj-str.html#cb255-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-11"><a href="path-proj-str.html#cb255-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Selection:</span> 3</span>
<span id="cb255-12"><a href="path-proj-str.html#cb255-12" aria-hidden="true" tabindex="-1"></a><span class="ex">✔</span> Deleting <span class="st">&#39;wood-survey-data-master.zip&#39;</span></span>
<span id="cb255-13"><a href="path-proj-str.html#cb255-13" aria-hidden="true" tabindex="-1"></a><span class="ex">✔</span> Opening <span class="st">&#39;wood-survey-data-master/&#39;</span> in the file manager</span></code></pre></div>
</div>
</div>
<div id="neon-data" class="section level2">
<h2>NEON Data</h2>
<p>The downloaded folder contains a <strong>subset of data from the NEON Woody plant vegetation survey</strong>.</p>
<p><strong>Citation:</strong>
<em>National Ecological Observatory Network. 2020. Data Products: DP1.10098.001. Provisional data downloaded from <a href="http://data.neonscience.org" class="uri">http://data.neonscience.org</a> on 2020-01-15. Battelle, Boulder, CO, USA</em></p>
<p>This data product was downloaded from the <a href="http://data.neonscience.org/browse-data">NEON data portal</a> and contains quality-controlled data from in-situ measurements of live and standing dead woody individuals and shrub groups, from all terrestrial NEON sites with qualifying woody vegetation.</p>
<p>Surveys of each site are completed once every 3 years.</p>
<p>Let’s have a look at what we’ve downloaded:</p>
<pre><code>.
├── R
├── data-raw
│   ├── individual.R
│   └── wood-survey-data-master
│       ├── NEON_vst_variables.csv
│       ├── README.md
│       ├── individual [67 entries exceeds filelimit, not opening dir]
│       ├── methods
│       │   ├── NEON.DOC.000914vB.pdf
│       │   ├── NEON.DOC.000987vH.pdf
│       │   └── NEON_vegStructure_userGuide_vA.pdf
│       ├── vst_mappingandtagging.csv
│       └── vst_perplotperyear.csv
└── wood-survey.Rproj</code></pre>
<p>The important files for the analysis we want to perform are</p>
<pre><code>├── individual [67 entries exceeds filelimit, not opening dir]
├── vst_mappingandtagging.csv
└── vst_perplotperyear.csv</code></pre>
<ul>
<li><strong><code>vst_perplotperyear</code></strong>: Plot level metadata, including plot geolocation,
<ul>
<li>one record per <code>plotID</code> per <code>eventID</code>,</li>
<li>describe the presence/absence of woody growth forms</li>
<li>sampling area utilized for each growth form.</li>
</ul></li>
<li><strong><code>vst_mappingandtagging</code></strong>: Mapping, identifying and tagging of individual stems for remeasurement
<ul>
<li>one record per <code>individualID</code>,</li>
<li>data invariant through time, including <code>tagID</code>, <code>taxonID</code> and mapped location.</li>
<li>Records can be linked to <code>vst_perplotperyear</code> via the <code>plotID</code> and <code>eventID</code> fields.</li>
</ul></li>
<li><strong><code>vst_apparentindividual</code></strong>: Biomass and productivity measurements of apparent individuals.
<ul>
<li>may contain multiple records per individuals</li>
<li>includes growth form, structure</li>
<li>currently in separate files contained in <code>individual/</code></li>
<li>may be linked
<ul>
<li><code>vst_mappingandtagging</code> records via <code>individualID</code></li>
<li><code>vst_perplotperyear</code> via the <code>plotID</code> and <code>eventID</code> fields.</li>
</ul></li>
</ul></li>
</ul>
<div class="alert alert-secondary">
<svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg">
<path d="M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"></path>
</svg>
<p>As our first challenge, we are going to combined all the files in <code>individual/</code> into a single analytical data file!</p>
</div>
</div>
<div id="paths" class="section level2">
<h2>Paths</h2>
<p>First let’s investigate our data. We want to access the files so we need to give R paths in order to load the data. We can work with the file system programmatically through R.</p>
<ul>
<li><code>here</code>: Use <code>here::here()</code> to create paths relative to the project root directory.
<ul>
<li>portable</li>
<li>independent of the where code is evaluated or saved.</li>
</ul></li>
</ul>
<p>Let’s start by creating a path to the downloaded data directory using <code>here</code>.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="path-proj-str.html#cb258-1" aria-hidden="true" tabindex="-1"></a>raw_data_path <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data-raw&quot;</span>, <span class="st">&quot;wood-survey-data-master&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="path-proj-str.html#cb259-1" aria-hidden="true" tabindex="-1"></a>raw_data_path</span></code></pre></div>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="path-proj-str.html#cb260-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;/cloud/project/data-raw/wood-survey-data-master&quot;</span></span></code></pre></div>
<p>We can use <code>raw_data_path</code> as our basis for specifying paths to files within it. There’s a number of ways we can do this in R but I wanted to introduce you to package <code>fs</code>. It has a nice interface and extensive functionality.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="path-proj-str.html#cb261-1" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">path</span>(raw_data_path, <span class="st">&quot;individual&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="path-proj-str.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span>cloud<span class="sc">/</span>project<span class="sc">/</span>data<span class="sc">-</span>raw<span class="sc">/</span>wood<span class="sc">-</span>survey<span class="sc">-</span>data<span class="sc">-</span>master<span class="sc">/</span>individual</span></code></pre></div>
<p>Let’s now use function <code>dir_ls</code> to get a character vector of paths to all the individual files in directory <code>individual</code>.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="path-proj-str.html#cb263-1" aria-hidden="true" tabindex="-1"></a>individual_paths <span class="ot">&lt;-</span> fs<span class="sc">::</span><span class="fu">dir_ls</span>(fs<span class="sc">::</span><span class="fu">path</span>(raw_data_path, <span class="st">&quot;individual&quot;</span>))</span>
<span id="cb263-2"><a href="path-proj-str.html#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(individual_paths)</span></code></pre></div>
<pre><code>## /cloud/project/data-raw/wood-survey-data-master/individual/NEON.D01.BART.DP1.10098.001.vst_apparentindividual.2015-08.basic.20190806T172340Z.csv
## /cloud/project/data-raw/wood-survey-data-master/individual/NEON.D01.BART.DP1.10098.001.vst_apparentindividual.2015-09.basic.20190806T144119Z.csv
## /cloud/project/data-raw/wood-survey-data-master/individual/NEON.D01.BART.DP1.10098.001.vst_apparentindividual.2016-08.basic.20190806T143255Z.csv
## /cloud/project/data-raw/wood-survey-data-master/individual/NEON.D01.BART.DP1.10098.001.vst_apparentindividual.2016-09.basic.20190806T143433Z.csv
## /cloud/project/data-raw/wood-survey-data-master/individual/NEON.D01.BART.DP1.10098.001.vst_apparentindividual.2016-10.basic.20190806T144133Z.csv
## /cloud/project/data-raw/wood-survey-data-master/individual/NEON.D01.BART.DP1.10098.001.vst_apparentindividual.2017-07.basic.20190806T144111Z.csv</code></pre>
<p>We can check how many files we’ve got:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="path-proj-str.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(individual_paths)</span></code></pre></div>
<pre><code>## [1] 67</code></pre>
<p>We can now use this vector of paths to read in files. Let’s read the first file in and check it out. We use function <code>read_csv()</code> from <code>readr</code> package which reads comma delimited files into tibbles.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="path-proj-str.html#cb267-1" aria-hidden="true" tabindex="-1"></a>indiv_df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(individual_paths[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   uid = col_character(),
##   namedLocation = col_character(),
##   date = col_date(format = &quot;&quot;),
##   eventID = col_character(),
##   domainID = col_character(),
##   siteID = col_character(),
##   plotID = col_character(),
##   individualID = col_character(),
##   growthForm = col_character(),
##   stemDiameter = col_double(),
##   measurementHeight = col_double(),
##   height = col_double()
## )</code></pre>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="path-proj-str.html#cb269-1" aria-hidden="true" tabindex="-1"></a>indiv_df</span></code></pre></div>
<pre><code>## # A tibble: 376 x 12
##    uid     namedLocation  date       eventID domainID siteID plotID individualID
##    &lt;chr&gt;   &lt;chr&gt;          &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       
##  1 a36a16… BART_037.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  2 68dc7a… BART_037.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  3 a8951a… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  4 eb348e… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  5 2a4478… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  6 e48520… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  7 280c90… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  8 0e5060… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
##  9 4918ca… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
## 10 ef16cb… BART_044.base… 2015-08-26 vst_BA… D01      BART   BART_… NEON.PLA.D0…
## # … with 366 more rows, and 4 more variables: growthForm &lt;chr&gt;,
## #   stemDiameter &lt;dbl&gt;, measurementHeight &lt;dbl&gt;, height &lt;dbl&gt;</code></pre>
<p>Run <code>?read_delim</code> for more details on reading in tabular data.</p>
</div>
<div id="basic-checks" class="section level2">
<h2>Basic checks</h2>
<p>Let’s perform some of the basic checks we learnt before we proceed.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="path-proj-str.html#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(indiv_df)</span></code></pre></div>
<p><img src="assets/indiv_df.png" /><!-- --></p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="path-proj-str.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(indiv_df)</span></code></pre></div>
<pre><code>##  [1] &quot;uid&quot;               &quot;namedLocation&quot;     &quot;date&quot;             
##  [4] &quot;eventID&quot;           &quot;domainID&quot;          &quot;siteID&quot;           
##  [7] &quot;plotID&quot;            &quot;individualID&quot;      &quot;growthForm&quot;       
## [10] &quot;stemDiameter&quot;      &quot;measurementHeight&quot; &quot;height&quot;</code></pre>
<pre><code>## spec_tbl_df[,12] [376 × 12] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ uid              : chr [1:376] &quot;a36a162d-ed1f-4f80-ae45-88e973855c68&quot; &quot;68dc7adf-48e2-4f7a-9272-9a468fde6d55&quot; &quot;a8951ab9-4462-48dd-ab9e-7b89e24f2e03&quot; &quot;eb348eaf-3969-46a4-ac3b-523c3548efeb&quot; ...
##  $ namedLocation    : chr [1:376] &quot;BART_037.basePlot.vst&quot; &quot;BART_037.basePlot.vst&quot; &quot;BART_044.basePlot.vst&quot; &quot;BART_044.basePlot.vst&quot; ...
##  $ date             : Date[1:376], format: &quot;2015-08-26&quot; &quot;2015-08-26&quot; ...
##  $ eventID          : chr [1:376] &quot;vst_BART_2015&quot; &quot;vst_BART_2015&quot; &quot;vst_BART_2015&quot; &quot;vst_BART_2015&quot; ...
##  $ domainID         : chr [1:376] &quot;D01&quot; &quot;D01&quot; &quot;D01&quot; &quot;D01&quot; ...
##  $ siteID           : chr [1:376] &quot;BART&quot; &quot;BART&quot; &quot;BART&quot; &quot;BART&quot; ...
##  $ plotID           : chr [1:376] &quot;BART_037&quot; &quot;BART_037&quot; &quot;BART_044&quot; &quot;BART_044&quot; ...
##  $ individualID     : chr [1:376] &quot;NEON.PLA.D01.BART.05285&quot; &quot;NEON.PLA.D01.BART.05279&quot; &quot;NEON.PLA.D01.BART.05419&quot; &quot;NEON.PLA.D01.BART.05092&quot; ...
##  $ growthForm       : chr [1:376] &quot;single bole tree&quot; &quot;single bole tree&quot; &quot;single bole tree&quot; &quot;single bole tree&quot; ...
##  $ stemDiameter     : num [1:376] 17.1 13.7 12.3 12.1 29.2 12.1 23.4 39.5 10 10.6 ...
##  $ measurementHeight: num [1:376] 130 130 130 130 130 130 130 130 130 130 ...
##  $ height           : num [1:376] 15.2 9.8 7.7 15.2 16.7 10.6 18.4 19 5.7 8.7 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   uid = col_character(),
##   ..   namedLocation = col_character(),
##   ..   date = col_date(format = &quot;&quot;),
##   ..   eventID = col_character(),
##   ..   domainID = col_character(),
##   ..   siteID = col_character(),
##   ..   plotID = col_character(),
##   ..   individualID = col_character(),
##   ..   growthForm = col_character(),
##   ..   stemDiameter = col_double(),
##   ..   measurementHeight = col_double(),
##   ..   height = col_double()
##   .. )</code></pre>
<pre><code>##      uid            namedLocation           date              eventID         
##  Length:376         Length:376         Min.   :2015-08-26   Length:376        
##  Class :character   Class :character   1st Qu.:2015-08-27   Class :character  
##  Mode  :character   Mode  :character   Median :2015-08-27   Mode  :character  
##                                        Mean   :2015-08-27                     
##                                        3rd Qu.:2015-08-31                     
##                                        Max.   :2015-08-31                     
##    domainID            siteID             plotID          individualID      
##  Length:376         Length:376         Length:376         Length:376        
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##   growthForm         stemDiameter   measurementHeight     height     
##  Length:376         Min.   : 2.00   Min.   : 10.0     Min.   : 0.50  
##  Class :character   1st Qu.:13.90   1st Qu.:130.0     1st Qu.:10.60  
##  Mode  :character   Median :20.20   Median :130.0     Median :14.30  
##                     Mean   :23.01   Mean   :129.5     Mean   :13.91  
##                     3rd Qu.:29.55   3rd Qu.:130.0     3rd Qu.:17.23  
##                     Max.   :69.90   Max.   :130.0     Max.   :30.20</code></pre>
<p>Everything looks good. So let’s move onto the next step of reading in all the files and combining them together. To do this, we’ll examine the principles of <strong>Iteration</strong>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="filenaming-view.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="process.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["rrresearchACCE20.pdf", "rrresearchACCE20.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
